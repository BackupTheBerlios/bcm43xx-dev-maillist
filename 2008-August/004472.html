<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> sudden wlan0 no scan results
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20sudden%20wlan0%20no%20scan%20results&In-Reply-To=%3C48A8539C.7000805%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004467.html">
   <LINK REL="Next"  HREF="004477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>sudden wlan0 no scan results</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20sudden%20wlan0%20no%20scan%20results&In-Reply-To=%3C48A8539C.7000805%40lwfinger.net%3E"
       TITLE="sudden wlan0 no scan results">Larry.Finger at lwfinger.net
       </A><BR>
    <I>Sun Aug 17 18:36:44 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004467.html">sudden wlan0 no scan results
</A></li>
        <LI>Next message: <A HREF="004477.html">sudden wlan0 no scan results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4472">[ date ]</a>
              <a href="thread.html#4472">[ thread ]</a>
              <a href="subject.html#4472">[ subject ]</a>
              <a href="author.html#4472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Francesco Marass wrote:
&gt;<i> Hello
</I>&gt;<i> 
</I>&gt;<i> I have a BCM4312 wireless card that I've always successfully used with
</I>&gt;<i> the b43 driver. However, for the past few days I've been unable to
</I>&gt;<i> find any wireless networks, so connecting to one was impossible.
</I>&gt;<i> `iwlist wlan0 scan` now always returns No scan results.
</I>&gt;<i> 
</I>&gt;<i> I run Debian testing, with a 2.6.25.4 x86_64 kernel. I have not made
</I>&gt;<i> changes to the system, aside from the usual updates and everything
</I>&gt;<i> else is working correctly.
</I>&gt;<i> 
</I>&gt;<i> My syslog when my interface worked looked like this:
</I>&gt;<i> 
</I>&gt;<i> Aug  2 09:19:10 febian kernel: b43-phy0: Broadcom 4311 WLAN found
</I>&gt;<i> Aug  2 09:19:10 febian kernel: b43-phy0 debug: Found PHY: Analog 4,
</I>&gt;<i> Type 2, Revision 8
</I>&gt;<i> Aug  2 09:19:10 febian kernel: b43-phy0 debug: Found Radio: Manuf
</I>&gt;<i> 0x17F, Version 0x2050, Revision 2
</I>&gt;<i> Aug  2 09:19:10 febian kernel: phy0: Selected rate control algorithm 'pid'
</I>&gt;<i> Aug  2 09:19:10 febian kernel: Broadcom 43xx driver loaded [ Features:
</I>&gt;<i> PL, Firmware-ID: FW13 ]
</I>&gt;<i> Aug  2 09:19:19 febian NetworkManager: &lt;info&gt;  starting...
</I>&gt;<i> Aug  2 09:19:19 febian NetworkManager: &lt;info&gt;  New VPN service
</I>&gt;<i> 'openvpn' (org.freedesktop.NetworkManager.openvpn).
</I>&gt;<i> Aug  2 09:19:20 febian kernel: b43-phy0: Loading firmware version
</I>&gt;<i> 410.2160 (2007-05-26 15:32:10)
</I>&gt;<i> Aug  2 09:19:21 febian kernel: b43-phy0 debug: Chip initialized
</I>&gt;<i> Aug  2 09:19:21 febian kernel: b43-phy0 debug: 32-bit DMA initialized136401
</I>&gt;<i> Aug  2 09:19:21 febian kernel: Registered led device: b43-phy0::tx
</I>&gt;<i> Aug  2 09:19:21 febian kernel: Registered led device: b43-phy0::rx
</I>&gt;<i> Aug  2 09:19:21 febian kernel: b43-phy0 debug: Wireless interface started
</I>&gt;<i> Aug  2 09:19:21 febian kernel: b43-phy0 debug: Adding Interface type 2
</I>&gt;<i> Aug  2 09:19:21 febian kernel: ADDRCONF(NETDEV_UP): wlan0: link is not ready
</I>&gt;<i> Aug  2 09:20:00 febian kernel: b43-phy0 debug: Using hardware based
</I>&gt;<i> encryption for keyidx: 0, mac: ff:ff:ff:ff:ff:ff
</I>&gt;<i> Aug  2 09:20:00 febian kernel: wlan0: Initial auth_alg=0
</I>&gt;<i> Aug  2 09:20:00 febian kernel: wlan0: authenticate with AP 00:1c:10:9f:c5:15
</I>&gt;<i> Aug  2 09:20:00 febian kernel: wlan0: RX authentication from
</I>&gt;<i> 00:1c:10:9f:c5:15 (alg=0 transaction=2 status=0)
</I>&gt;<i> Aug  2 09:20:00 febian kernel: wlan0: authenticated
</I>&gt;<i> Aug  2 09:20:00 febian kernel: wlan0: associate with AP 00:1c:10:9f:c5:15
</I>&gt;<i> Aug  2 09:20:00 febian kernel: wlan0: RX AssocResp from
</I>&gt;<i> 00:1c:10:9f:c5:15 (capab=0x411 status=0 aid=2)
</I>&gt;<i> Aug  2 09:20:00 febian kernel: wlan0: associated
</I>&gt;<i> Aug  2 09:20:00 febian kernel: ADDRCONF(NETDEV_CHANGE): wlan0: link
</I>&gt;<i> becomes ready
</I>&gt;<i> Aug  2 09:20:00 febian dhclient: Internet Systems Consortium DHCP Client V3.1.1
</I>&gt;<i> Aug  2 09:20:00 febian dhclient: Copyright 2004-2008 Internet Systems
</I>&gt;<i> Consortium.
</I>&gt;<i> Aug  2 09:20:00 febian dhclient: All rights reserved.
</I>&gt;<i> Aug  2 09:20:00 febian dhclient: For info, please visit
</I>&gt;<i> <A HREF="http://www.isc.org/sw/dhcp/">http://www.isc.org/sw/dhcp/</A>
</I>&gt;<i> Aug  2 09:20:00 febian dhclient:
</I>&gt;<i> Aug  2 09:20:00 febian dhclient: wmaster0: unknown hardware address type 801
</I>&gt;<i> Aug  2 09:20:01 febian dhclient: wmaster0: unknown hardware address type 801
</I>&gt;<i> Aug  2 09:20:01 febian dhclient: Listening on LPF/wlan0/XXX
</I>&gt;<i> Aug  2 09:20:01 febian dhclient: Sending on   LPF/wlan0/XXX
</I>&gt;<i> Aug  2 09:20:01 febian dhclient: Sending on   Socket/fallback
</I>&gt;<i> Aug  2 09:20:01 febian dhclient: DHCPDISCOVER on wlan0 to
</I>&gt;<i> 255.255.255.255 port 67 interval 5
</I>&gt;<i> Aug  2 09:20:01 febian avahi-daemon[3173]: Joining mDNS multicast
</I>&gt;<i> group on interface wlan0.IPv6 with address fe80::21a:73ff:fe49:d828.
</I>&gt;<i> Aug  2 09:20:01 febian avahi-daemon[3173]: New relevant interface
</I>&gt;<i> wlan0.IPv6 for mDNS.
</I>&gt;<i> Aug  2 09:20:01 febian avahi-daemon[3173]: Registering new address
</I>&gt;<i> record for fe80::21a:73ff:fe49:d828 on wlan0.*.
</I>&gt;<i> Aug  2 09:20:02 febian dhclient: DHCPOFFER from 192.168.1.1
</I>&gt;<i> Aug  2 09:20:02 febian dhclient: DHCPREQUEST on wlan0 to 255.255.255.255 port 67
</I>&gt;<i> Aug  2 09:20:02 febian dhclient: DHCPACK from 192.168.1.1
</I>&gt;<i> Aug  2 09:20:02 febian avahi-daemon[3173]: Joining mDNS multicast
</I>&gt;<i> group on interface wlan0.IPv4 with address 192.168.1.102.
</I>&gt;<i> Aug  2 09:20:02 febian avahi-daemon[3173]: New relevant interface
</I>&gt;<i> wlan0.IPv4 for mDNS.
</I>&gt;<i> Aug  2 09:20:02 febian avahi-daemon[3173]: Registering new address
</I>&gt;<i> record for 192.168.1.102 on wlan0.IPv4.
</I>&gt;<i> Aug  2 09:20:02 febian dhclient: bound to 192.168.1.102 -- renewal in
</I>&gt;<i> 40017 seconds.
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Current syslog (with non-working interface):
</I>&gt;<i> 
</I>&gt;<i> Aug  3 16:10:50 febian kernel: b43-phy0: Broadcom 4311 WLAN found
</I>&gt;<i> Aug  3 16:10:50 febian kernel: b43-phy0 debug: Found PHY: Analog 4,
</I>&gt;<i> Type 2, Revision 8
</I>&gt;<i> Aug  3 16:10:50 febian kernel: b43-phy0 debug: Found Radio: Manuf
</I>&gt;<i> 0x17F, Version 0x2050, Revision 2
</I>&gt;<i> Aug  3 16:10:50 febian kernel: phy0: Selected rate control algorithm 'pid'
</I>&gt;<i> Aug  3 16:10:50 febian kernel: Broadcom 43xx driver loaded [ Features:
</I>&gt;<i> PL, Firmware-ID: FW13 ]
</I>&gt;<i> Aug  3 16:10:59 febian NetworkManager: &lt;info&gt;  starting...
</I>&gt;<i> Aug  3 16:10:59 febian NetworkManager: &lt;info&gt;  New VPN service
</I>&gt;<i> 'openvpn' (org.freedesktop.NetworkManager.openvpn).
</I>&gt;<i> Aug  3 16:11:00 febian kernel: b43-phy0: Loading firmware version
</I>&gt;<i> 410.2160 (2007-05-26 15:32:10)
</I>&gt;<i> Aug  3 16:11:01 febian kernel: b43-phy0 debug: Chip initialized
</I>&gt;<i> Aug  3 16:11:01 febian kernel: b43-phy0 debug: 32-bit DMA initialized
</I>&gt;<i> Aug  3 16:11:01 febian kernel: Registered led device: b43-phy0::tx
</I>&gt;<i> Aug  3 16:11:01 febian kernel: Registered led device: b43-phy0::rx
</I>&gt;<i> Aug  3 16:11:01 febian kernel: b43-phy0 debug: Wireless interface started
</I>&gt;<i> Aug  3 16:11:01 febian kernel: b43-phy0 debug: Adding Interface type 2
</I>&gt;<i> Aug  3 16:11:01 febian kernel: ADDRCONF(NETDEV_UP): wlan0: link is not ready
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> My interfaces configuration is very simple:
</I>&gt;<i> 
</I>&gt;<i> iface wlan0 inet dhcp
</I>&gt;<i>   wireless-essid XXXX
</I>&gt;<i>   wireless-key YYYY
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> Without NetworkManager I tried the procedure by hand without success:
</I>&gt;<i> # ifconfig wlan0 up
</I>&gt;<i> # dmesg | tail
</I>&gt;<i> b43-phy0: Loading firmware version 410.2160 (2007-05-26 15:32:10)
</I>&gt;<i> b43-phy0 debug: Chip initialized
</I>&gt;<i> b43-phy0 debug: 32-bit DMA initialized
</I>&gt;<i> Registered led device: b43-phy0::tx
</I>&gt;<i> Registered led device: b43-phy0::rx
</I>&gt;<i> b43-phy0 debug: Wireless interface started
</I>&gt;<i> b43-phy0 debug: Adding Interface type 2
</I>&gt;<i> b43-phy0 debug: Using hardware based encryption for keyidx: 0, mac:
</I>&gt;<i> ff:ff:ff:ff:ff:ff
</I>&gt;<i> ADDRCONF(NETDEV_UP): wlan0: link is not ready
</I>&gt;<i> # iwconfig wlan0 essid XXX
</I>&gt;<i> # iwconfig wlan0 key YYY
</I>&gt;<i> # dmesg | tail
</I>&gt;<i> b43-phy0 debug: Disabling hardware based encryption for keyidx: 0,
</I>&gt;<i> mac: ff:ff:ff:ff:ff:ff
</I>&gt;<i> b43-phy0 debug: Using hardware based encryption for keyidx: 0, mac:
</I>&gt;<i> ff:ff:ff:ff:ff:ff
</I>&gt;<i> # iwlist wlan0 scan
</I>&gt;<i> wlan0             No scan results
</I>&gt;<i> 
</I>&gt;<i> I even downloaded the driver again and re-cut the firmware, but it did not help.
</I>&gt;<i> 
</I>&gt;<i> I hope there is an explanation and a solution for this, as I am
</I>&gt;<i> reluctant to try the windoze driver with ndiswrapper.
</I>&gt;<i> 
</I>&gt;<i> I add an lspci -v regarding this card for more information:
</I>&gt;<i> 30:00.0 Network controller: Broadcom Corporation BCM4312 802.11a/b/g (rev 01)
</I>&gt;<i>         Subsystem: Hewlett-Packard Company Device 1361
</I>&gt;<i>         Flags: bus master, fast devsel, latency 0, IRQ 18
</I>&gt;<i>         Memory at c8000000 (32-bit, non-prefetchable) [size=16K]
</I>&gt;<i>         Capabilities: &lt;access denied&gt;
</I>&gt;<i>         Kernel driver in use: b43-pci-bridge
</I>&gt;<i>         Kernel modules: ssb
</I>
I don't see anything wrong with b43. The message shows that your 
interface is not UP. I use openSUSE and I don't know exactly what the 
command 'iface' does, but it looks as if something changed there, or 
in other network support software.

Did you make any changes in your system? Perhaps reloading the package 
that contains iface will fix the problem.

Larry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004467.html">sudden wlan0 no scan results
</A></li>
	<LI>Next message: <A HREF="004477.html">sudden wlan0 no scan results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4472">[ date ]</a>
              <a href="thread.html#4472">[ thread ]</a>
              <a href="subject.html#4472">[ subject ]</a>
              <a href="author.html#4472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
