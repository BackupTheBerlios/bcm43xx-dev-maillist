<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> sudden wlan0 no scan results
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-August/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20sudden%20wlan0%20no%20scan%20results&In-Reply-To=%3C4016b2fa0808142339i5e88e787tfbc7c014d607f225%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004461.html">
   <LINK REL="Next"  HREF="004472.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>sudden wlan0 no scan results</H1>
    <B>Francesco Marass</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20sudden%20wlan0%20no%20scan%20results&In-Reply-To=%3C4016b2fa0808142339i5e88e787tfbc7c014d607f225%40mail.gmail.com%3E"
       TITLE="sudden wlan0 no scan results">fmarass at gmail.com
       </A><BR>
    <I>Fri Aug 15 08:39:39 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004461.html">Broadcom card wont pickup access point signal
</A></li>
        <LI>Next message: <A HREF="004472.html">sudden wlan0 no scan results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4467">[ date ]</a>
              <a href="thread.html#4467">[ thread ]</a>
              <a href="subject.html#4467">[ subject ]</a>
              <a href="author.html#4467">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello

I have a BCM4312 wireless card that I've always successfully used with
the b43 driver. However, for the past few days I've been unable to
find any wireless networks, so connecting to one was impossible.
`iwlist wlan0 scan` now always returns No scan results.

I run Debian testing, with a 2.6.25.4 x86_64 kernel. I have not made
changes to the system, aside from the usual updates and everything
else is working correctly.

My syslog when my interface worked looked like this:

Aug  2 09:19:10 febian kernel: b43-phy0: Broadcom 4311 WLAN found
Aug  2 09:19:10 febian kernel: b43-phy0 debug: Found PHY: Analog 4,
Type 2, Revision 8
Aug  2 09:19:10 febian kernel: b43-phy0 debug: Found Radio: Manuf
0x17F, Version 0x2050, Revision 2
Aug  2 09:19:10 febian kernel: phy0: Selected rate control algorithm 'pid'
Aug  2 09:19:10 febian kernel: Broadcom 43xx driver loaded [ Features:
PL, Firmware-ID: FW13 ]
Aug  2 09:19:19 febian NetworkManager: &lt;info&gt;  starting...
Aug  2 09:19:19 febian NetworkManager: &lt;info&gt;  New VPN service
'openvpn' (org.freedesktop.NetworkManager.openvpn).
Aug  2 09:19:20 febian kernel: b43-phy0: Loading firmware version
410.2160 (2007-05-26 15:32:10)
Aug  2 09:19:21 febian kernel: b43-phy0 debug: Chip initialized
Aug  2 09:19:21 febian kernel: b43-phy0 debug: 32-bit DMA initialized136401
Aug  2 09:19:21 febian kernel: Registered led device: b43-phy0::tx
Aug  2 09:19:21 febian kernel: Registered led device: b43-phy0::rx
Aug  2 09:19:21 febian kernel: b43-phy0 debug: Wireless interface started
Aug  2 09:19:21 febian kernel: b43-phy0 debug: Adding Interface type 2
Aug  2 09:19:21 febian kernel: ADDRCONF(NETDEV_UP): wlan0: link is not ready
Aug  2 09:20:00 febian kernel: b43-phy0 debug: Using hardware based
encryption for keyidx: 0, mac: ff:ff:ff:ff:ff:ff
Aug  2 09:20:00 febian kernel: wlan0: Initial auth_alg=0
Aug  2 09:20:00 febian kernel: wlan0: authenticate with AP 00:1c:10:9f:c5:15
Aug  2 09:20:00 febian kernel: wlan0: RX authentication from
00:1c:10:9f:c5:15 (alg=0 transaction=2 status=0)
Aug  2 09:20:00 febian kernel: wlan0: authenticated
Aug  2 09:20:00 febian kernel: wlan0: associate with AP 00:1c:10:9f:c5:15
Aug  2 09:20:00 febian kernel: wlan0: RX AssocResp from
00:1c:10:9f:c5:15 (capab=0x411 status=0 aid=2)
Aug  2 09:20:00 febian kernel: wlan0: associated
Aug  2 09:20:00 febian kernel: ADDRCONF(NETDEV_CHANGE): wlan0: link
becomes ready
Aug  2 09:20:00 febian dhclient: Internet Systems Consortium DHCP Client V3.1.1
Aug  2 09:20:00 febian dhclient: Copyright 2004-2008 Internet Systems
Consortium.
Aug  2 09:20:00 febian dhclient: All rights reserved.
Aug  2 09:20:00 febian dhclient: For info, please visit
<A HREF="http://www.isc.org/sw/dhcp/">http://www.isc.org/sw/dhcp/</A>
Aug  2 09:20:00 febian dhclient:
Aug  2 09:20:00 febian dhclient: wmaster0: unknown hardware address type 801
Aug  2 09:20:01 febian dhclient: wmaster0: unknown hardware address type 801
Aug  2 09:20:01 febian dhclient: Listening on LPF/wlan0/XXX
Aug  2 09:20:01 febian dhclient: Sending on   LPF/wlan0/XXX
Aug  2 09:20:01 febian dhclient: Sending on   Socket/fallback
Aug  2 09:20:01 febian dhclient: DHCPDISCOVER on wlan0 to
255.255.255.255 port 67 interval 5
Aug  2 09:20:01 febian avahi-daemon[3173]: Joining mDNS multicast
group on interface wlan0.IPv6 with address fe80::21a:73ff:fe49:d828.
Aug  2 09:20:01 febian avahi-daemon[3173]: New relevant interface
wlan0.IPv6 for mDNS.
Aug  2 09:20:01 febian avahi-daemon[3173]: Registering new address
record for fe80::21a:73ff:fe49:d828 on wlan0.*.
Aug  2 09:20:02 febian dhclient: DHCPOFFER from 192.168.1.1
Aug  2 09:20:02 febian dhclient: DHCPREQUEST on wlan0 to 255.255.255.255 port 67
Aug  2 09:20:02 febian dhclient: DHCPACK from 192.168.1.1
Aug  2 09:20:02 febian avahi-daemon[3173]: Joining mDNS multicast
group on interface wlan0.IPv4 with address 192.168.1.102.
Aug  2 09:20:02 febian avahi-daemon[3173]: New relevant interface
wlan0.IPv4 for mDNS.
Aug  2 09:20:02 febian avahi-daemon[3173]: Registering new address
record for 192.168.1.102 on wlan0.IPv4.
Aug  2 09:20:02 febian dhclient: bound to 192.168.1.102 -- renewal in
40017 seconds.


Current syslog (with non-working interface):

Aug  3 16:10:50 febian kernel: b43-phy0: Broadcom 4311 WLAN found
Aug  3 16:10:50 febian kernel: b43-phy0 debug: Found PHY: Analog 4,
Type 2, Revision 8
Aug  3 16:10:50 febian kernel: b43-phy0 debug: Found Radio: Manuf
0x17F, Version 0x2050, Revision 2
Aug  3 16:10:50 febian kernel: phy0: Selected rate control algorithm 'pid'
Aug  3 16:10:50 febian kernel: Broadcom 43xx driver loaded [ Features:
PL, Firmware-ID: FW13 ]
Aug  3 16:10:59 febian NetworkManager: &lt;info&gt;  starting...
Aug  3 16:10:59 febian NetworkManager: &lt;info&gt;  New VPN service
'openvpn' (org.freedesktop.NetworkManager.openvpn).
Aug  3 16:11:00 febian kernel: b43-phy0: Loading firmware version
410.2160 (2007-05-26 15:32:10)
Aug  3 16:11:01 febian kernel: b43-phy0 debug: Chip initialized
Aug  3 16:11:01 febian kernel: b43-phy0 debug: 32-bit DMA initialized
Aug  3 16:11:01 febian kernel: Registered led device: b43-phy0::tx
Aug  3 16:11:01 febian kernel: Registered led device: b43-phy0::rx
Aug  3 16:11:01 febian kernel: b43-phy0 debug: Wireless interface started
Aug  3 16:11:01 febian kernel: b43-phy0 debug: Adding Interface type 2
Aug  3 16:11:01 febian kernel: ADDRCONF(NETDEV_UP): wlan0: link is not ready


My interfaces configuration is very simple:

iface wlan0 inet dhcp
  wireless-essid XXXX
  wireless-key YYYY


Without NetworkManager I tried the procedure by hand without success:
# ifconfig wlan0 up
# dmesg | tail
b43-phy0: Loading firmware version 410.2160 (2007-05-26 15:32:10)
b43-phy0 debug: Chip initialized
b43-phy0 debug: 32-bit DMA initialized
Registered led device: b43-phy0::tx
Registered led device: b43-phy0::rx
b43-phy0 debug: Wireless interface started
b43-phy0 debug: Adding Interface type 2
b43-phy0 debug: Using hardware based encryption for keyidx: 0, mac:
ff:ff:ff:ff:ff:ff
ADDRCONF(NETDEV_UP): wlan0: link is not ready
# iwconfig wlan0 essid XXX
# iwconfig wlan0 key YYY
# dmesg | tail
b43-phy0 debug: Disabling hardware based encryption for keyidx: 0,
mac: ff:ff:ff:ff:ff:ff
b43-phy0 debug: Using hardware based encryption for keyidx: 0, mac:
ff:ff:ff:ff:ff:ff
# iwlist wlan0 scan
wlan0             No scan results

I even downloaded the driver again and re-cut the firmware, but it did not help.

I hope there is an explanation and a solution for this, as I am
reluctant to try the windoze driver with ndiswrapper.

I add an lspci -v regarding this card for more information:
30:00.0 Network controller: Broadcom Corporation BCM4312 802.11a/b/g (rev 01)
        Subsystem: Hewlett-Packard Company Device 1361
        Flags: bus master, fast devsel, latency 0, IRQ 18
        Memory at c8000000 (32-bit, non-prefetchable) [size=16K]
        Capabilities: &lt;access denied&gt;
        Kernel driver in use: b43-pci-bridge
        Kernel modules: ssb


Thank you in advance

Francesco

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004461.html">Broadcom card wont pickup access point signal
</A></li>
	<LI>Next message: <A HREF="004472.html">sudden wlan0 no scan results
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4467">[ date ]</a>
              <a href="thread.html#4467">[ thread ]</a>
              <a href="subject.html#4467">[ subject ]</a>
              <a href="author.html#4467">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
