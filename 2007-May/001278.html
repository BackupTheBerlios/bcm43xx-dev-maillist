<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> BCM4318 doesn't get DHCPOFFERS
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-May/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4318%20doesn%27t%20get%20DHCPOFFERS&In-Reply-To=%3C87sl9t3y99.fsf%40bang.priv.no%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001287.html">
   <LINK REL="Next"  HREF="001279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>BCM4318 doesn't get DHCPOFFERS</H1>
    <B>Steinar Bang</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4318%20doesn%27t%20get%20DHCPOFFERS&In-Reply-To=%3C87sl9t3y99.fsf%40bang.priv.no%3E"
       TITLE="BCM4318 doesn't get DHCPOFFERS">sb at dod.no
       </A><BR>
    <I>Sat May 19 12:26:26 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001287.html">IPV6 autoconf problems
</A></li>
        <LI>Next message: <A HREF="001279.html">BCM4318 doesn't get DHCPOFFERS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1278">[ date ]</a>
              <a href="thread.html#1278">[ thread ]</a>
              <a href="subject.html#1278">[ subject ]</a>
              <a href="author.html#1278">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Platform: Intel Pentium M (Dell D610 laptop),
	  Ubuntu Feisty (upgraded from Edgy upgraded from Dapper,
	  originally installed as Breezy)
	  wpasupplicant 0.5.7-0ubuntu2
	  network-manager 0.6.4-6ubuntu7
	  network-manager-gnome 0.6.4-6ubuntu7
	  linux-image-2.6.20-15-386 2.6.20-15.27

When I first upgraded to Feisty I tried connecting to my WEP protected
AP, and immediately succeeded.  Later I've successfully (for the first
time) connected to a WPA protected AP at work.

But now the laptop no longer succeeds in connecting to my home (WEP
protected) AP.  According to the dhclient logs it believes that it
doesn't get any DHCPOFFERS (though the logs on the DHCP server says
it's received a DHCPDISCOVER and sent a DHCPOFFER), retries two times
and gives up, and then network-manager successfully (and unintentioned
by me) connects to an open WLAN in the neighbourhood, with a much
weaker signal (the laptop is 30cm from my own AP when doing the
tests).

According to the logs in the AP the laptop has connected.  And
according to the logs from the DHCP server, a NIC with the MAC of the
broadcom WLAN card has been given a DHCPOFFER (but has never returned
a DHCPACK).

In earlier OS incarnations, both using first ndiswrapper, and later
bcm43xx, I've seen this kind of flaky behaviour, but a shutdown,
followed by a reboot has usually cleared them up.

Any clues as to where I could start digging for clues, and workarounds
I could try, are highly appreciated.

Thanx!

- Steinar

The usual information follows:

lspci -v:

03:03.0 Network controller: Broadcom Corporation BCM4318 [AirForce One 54g] 802.11g Wireless LAN Controller (rev 02)
        Subsystem: Dell Unknown device 0005
        Flags: bus master, fast devsel, latency 64, IRQ 18
        Memory at dfbfe000 (32-bit, non-prefetchable) [size=8K]

uname -r:

2.6.20-15-386


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001287.html">IPV6 autoconf problems
</A></li>
	<LI>Next message: <A HREF="001279.html">BCM4318 doesn't get DHCPOFFERS
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1278">[ date ]</a>
              <a href="thread.html#1278">[ thread ]</a>
              <a href="subject.html#1278">[ subject ]</a>
              <a href="author.html#1278">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
