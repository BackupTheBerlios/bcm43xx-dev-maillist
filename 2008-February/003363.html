<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20WiFi%20-%20Broadcom%204306%20on%20kernel%202.6.24%20%28b43%20module%29&In-Reply-To=%3Cb1923f7f0802070703he1c4e9ft9baef19c5679f0e0%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003358.html">
   <LINK REL="Next"  HREF="003364.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)</H1>
    <B>Anthony Durity</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20WiFi%20-%20Broadcom%204306%20on%20kernel%202.6.24%20%28b43%20module%29&In-Reply-To=%3Cb1923f7f0802070703he1c4e9ft9baef19c5679f0e0%40mail.gmail.com%3E"
       TITLE="WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)">bcm43xx at jollyrotten.org
       </A><BR>
    <I>Thu Feb  7 16:03:56 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003358.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
        <LI>Next message: <A HREF="003364.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3363">[ date ]</a>
              <a href="thread.html#3363">[ thread ]</a>
              <a href="subject.html#3363">[ subject ]</a>
              <a href="author.html#3363">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi folks,

The same happened with me upgrading from 2.6.22 to 2.6.24 via an upgrade
from Ubuntu Gutsy to Ubuntu Hardy. There is definitely a renaming thing
going on. I tried adding the ATTR clause like you suggested here and also
suggested to another poster if I recall correctly and it didn't work. They
recently pushed a brand spanking new kernel which I haven't tried. What
information would you need to exactly pinpoint the problem. It seems that a
number of people have been bitten by this. Cheers for your great work thus
far by the way.

All the best,
    Anthony

On 2/7/08, Larry Finger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">larry.finger at lwfinger.net</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> Marcelo Juchem wrote:
</I>&gt;<i> &gt; Hi,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;       I have a HP Presario zv6015 laptop with Debian 4.0 installed
</I>&gt;<i> (using
</I>&gt;<i> &gt; the official unstable repository). When running the kernel 2.6.23,
</I>&gt;<i> &gt; everything works fine, even the Broadcom 4306 wireless card (using
</I>&gt;<i> &gt; module bcm43xx shipped with the kernel and firmware ripped with
</I>&gt;<i> &gt; bcm43xx-fwcutter from official Debian unstable repository). But when I
</I>&gt;<i> &gt; boot with the new kernel 2.6.24, the wireless network stops working. I
</I>&gt;<i> &gt; tried everything found in
</I>&gt;<i> &gt; <A HREF="http://www.linuxwireless.org/en/users/Drivers/b43">http://www.linuxwireless.org/en/users/Drivers/b43</A> and searched a lot
</I>&gt;<i> &gt; of solutions on the Internet, but had no success. Both modules b43 and
</I>&gt;<i> &gt; b43 legacy were tried. I think it is a firmware issue, since I had the
</I>&gt;<i> &gt; same problem with bcm43xx and it was solved when I changed the
</I>&gt;<i> &gt; firmware. I have the following firmware files (tried every version
</I>&gt;<i> &gt; listed below):
</I>&gt;<i> &gt; /lib/firmware/b43/*.fw - 4.x firmware extracted with b43-fwcutter
</I>&gt;<i> &gt; /lib/firmware/b43legacy/*.fw - 3.x firmware extracted with b43-fwcutter
</I>&gt;<i> &gt; /lib/firmware/*.fw - 3.x firmware extracted with bcm43xx-fwcutter
</I>&gt;<i> &gt; Any ideas? I don't have much free time available due to work and
</I>&gt;<i> &gt; college, but I have good C and C++ coding skills and am willing to
</I>&gt;<i> &gt; help.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt;       Thanks,
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Marcelo Juchem
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Following is the output of some commands and content of some config
</I>&gt;<i> &gt; files to help the diagnostic.
</I>&gt;<i> &gt; ----------------------------------------------
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; using debian linux with kernel linux-image-2.6.24-1-686
</I>&gt;<i> &gt; updated as of 01/31/2008 from the official debian unstable repository
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; firmware extracted to /lib/firmware/b43
</I>&gt;<i> &gt; broadcom-wl-4.80.53.0 - extracted with b43-fwcutter 009
</I>&gt;<i> &gt; broadcom-wl-4.150.10.5 - extracted with b43-fwcutter 010
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; firmware extracted from these files, found at
</I>&gt;<i> &gt; <A HREF="http://www.linuxwireless.org/en/users/Drivers/b43:">http://www.linuxwireless.org/en/users/Drivers/b43:</A>
</I>&gt;<i> &gt; broadcom-wl-4.80.53.0/kmod/wl_apsta_mimo.o
</I>&gt;<i> &gt; broadcom-wl-4.80.53.0/kmod/wl_apsta.o
</I>&gt;<i> &gt; broadcom-wl-4.150.10.5/driver/wl_apsta_mimo.o
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; b43-fwcutter version 009: obtained from the official debian unstable
</I>&gt;<i> &gt; repository as of 01/31/2008
</I>&gt;<i> &gt; b43-fwcutter version 010: compiled from sources found at
</I>&gt;<i> &gt; <A HREF="http://www.bu3sch.de/b43/fwcutter/">http://www.bu3sch.de/b43/fwcutter/</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --- 'lspci' output - BEGIN ---
</I>&gt;<i> &gt; 03:02.0 Network controller: Broadcom Corporation BCM4306 802.11b/g
</I>&gt;<i> &gt; Wireless LAN Controller (rev 03)
</I>&gt;<i> &gt; --- 'lspci' output - END ---
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --- /etc/network/interfaces - BEGIN ---
</I>&gt;<i> &gt; # I changed the ESSID, nickname and password to placeholders
</I>&gt;<i> &gt; iface lo inet loopback
</I>&gt;<i> &gt; auto lo
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; iface eth1 inet dhcp
</I>&gt;<i> &gt; wireless-essid WiFiNetworkESSID
</I>&gt;<i> &gt; wireless-mode Managed
</I>&gt;<i> &gt; wireless-channel 6
</I>&gt;<i> &gt; wireless-nickname nickname
</I>&gt;<i> &gt; wireless-key open s:password
</I>&gt;<i> &gt; hostname nickname
</I>&gt;<i> &gt; auto eth1
</I>&gt;<i> &gt; --- /etc/network/interfaces - END ---
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --- 'dmesg' output - BEGIN ---
</I>&gt;<i> &gt; b43-phy1: Broadcom 4306 WLAN found
</I>&gt;<i> &gt; phy1: Selected rate control algorithm 'simple'
</I>&gt;<i> &gt; udev: renamed network interface wmaster0 to eth1
</I>&gt;<i> &gt; --- 'dmesg' output - END ---
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --- 'iwlist eth1 scan' output - BEGIN ---
</I>&gt;<i> &gt; eth1 Interface doesn't support scanning.
</I>&gt;<i> &gt; --- 'iwlist eth1 scan' output - END ---
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; --- 'ifup' output - BEGIN ---
</I>&gt;<i> &gt; Error for wireless request &quot;Set Mode&quot; (8B06) :
</I>&gt;<i> &gt; SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> &gt; Error for wireless request &quot;Set Encode&quot; (8B2A) :
</I>&gt;<i> &gt; SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> &gt; Error for wireless request &quot;Set Frequency&quot; (8B04) :
</I>&gt;<i> &gt; SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> &gt; Error for wireless request &quot;Set ESSID&quot; (8B1A) :
</I>&gt;<i> &gt; SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> &gt; Internet Systems Consortium DHCP Client V3.1.0
</I>&gt;<i> &gt; Copyright 2004-2007 Internet Systems Consortium.
</I>&gt;<i> &gt; All rights reserved.
</I>&gt;<i> &gt; For info, please visit <A HREF="http://www.isc.org/sw/dhcp/">http://www.isc.org/sw/dhcp/</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; eth1: unknown hardware address type 801
</I>&gt;<i> &gt; SIOCSIFFLAGS: Operation not supported
</I>&gt;<i> &gt; SIOCSIFFLAGS: Operation not supported
</I>&gt;<i> &gt; eth1: unknown hardware address type 801
</I>&gt;<i> &gt; Listening on LPF/eth1/
</I>&gt;<i> &gt; Sending on LPF/eth1/
</I>&gt;<i> &gt; Sending on Socket/fallback
</I>&gt;<i> &gt; receive_packet failed on eth1: Network is down
</I>&gt;<i> &gt; option_space_encapsulate: option space agent does not exist, but is
</I>&gt;<i> configured.
</I>&gt;<i> &gt; DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 8
</I>&gt;<i> &gt; send_packet: Network is down
</I>&gt;<i> &gt; DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 10
</I>&gt;<i> &gt; send_packet: Network is down
</I>&gt;<i> &gt; DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 21
</I>&gt;<i> &gt; send_packet: Network is down
</I>&gt;<i> &gt; DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 19
</I>&gt;<i> &gt; send_packet: Network is down
</I>&gt;<i> &gt; DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 3
</I>&gt;<i> &gt; send_packet: Network is down
</I>&gt;<i> &gt; No DHCPOFFERS received.
</I>&gt;<i> &gt; No working leases in persistent database - sleeping.
</I>&gt;<i> &gt; --- 'ifup' output - END ---
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> I think your renaming is messed up. If you had sent the output of
</I>&gt;<i> iwconfig, I could tell for sure. I
</I>&gt;<i> am betting that your /etc/udev/rules.d/70-persistent-net.rules needs a
</I>&gt;<i> rule like
</I>&gt;<i>
</I>&gt;<i> SUBSYSTEM==&quot;net&quot;, DRIVERS==&quot;?*&quot;, ATTR{address}==&quot;XX:XX:XX:XX:XX:XX&quot;,
</I>&gt;<i> ATTR{type}==&quot;1&quot;, NAME=&quot;eth1&quot;
</I>&gt;<i>
</I>&gt;<i> On your system, I think the ATTR clause is missing and your iwconfig list
</I>&gt;<i> ends up with eth1 and
</I>&gt;<i> wlan0-rename, rather than wmaster0 and eth1. The clue is that wmaster0 has
</I>&gt;<i> type 801.
</I>&gt;<i>
</I>&gt;<i> Fix your udev rules, and it should work.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Larry
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Bcm43xx-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;<i>
</I>-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20080207/675812b4/attachment.html">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20080207/675812b4/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003358.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
	<LI>Next message: <A HREF="003364.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3363">[ date ]</a>
              <a href="thread.html#3363">[ thread ]</a>
              <a href="subject.html#3363">[ subject ]</a>
              <a href="author.html#3363">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
