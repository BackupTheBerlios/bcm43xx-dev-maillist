<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20WiFi%20-%20Broadcom%204306%20on%20kernel%202.6.24%20%28b43%20module%29&In-Reply-To=%3C47AA6724.2040701%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003356.html">
   <LINK REL="Next"  HREF="003363.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20WiFi%20-%20Broadcom%204306%20on%20kernel%202.6.24%20%28b43%20module%29&In-Reply-To=%3C47AA6724.2040701%40lwfinger.net%3E"
       TITLE="WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)">larry.finger at lwfinger.net
       </A><BR>
    <I>Thu Feb  7 03:04:20 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003356.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
        <LI>Next message: <A HREF="003363.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3358">[ date ]</a>
              <a href="thread.html#3358">[ thread ]</a>
              <a href="subject.html#3358">[ subject ]</a>
              <a href="author.html#3358">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Marcelo Juchem wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> 	I have a HP Presario zv6015 laptop with Debian 4.0 installed (using
</I>&gt;<i> the official unstable repository). When running the kernel 2.6.23,
</I>&gt;<i> everything works fine, even the Broadcom 4306 wireless card (using
</I>&gt;<i> module bcm43xx shipped with the kernel and firmware ripped with
</I>&gt;<i> bcm43xx-fwcutter from official Debian unstable repository). But when I
</I>&gt;<i> boot with the new kernel 2.6.24, the wireless network stops working. I
</I>&gt;<i> tried everything found in
</I>&gt;<i> <A HREF="http://www.linuxwireless.org/en/users/Drivers/b43">http://www.linuxwireless.org/en/users/Drivers/b43</A> and searched a lot
</I>&gt;<i> of solutions on the Internet, but had no success. Both modules b43 and
</I>&gt;<i> b43 legacy were tried. I think it is a firmware issue, since I had the
</I>&gt;<i> same problem with bcm43xx and it was solved when I changed the
</I>&gt;<i> firmware. I have the following firmware files (tried every version
</I>&gt;<i> listed below):
</I>&gt;<i> /lib/firmware/b43/*.fw - 4.x firmware extracted with b43-fwcutter
</I>&gt;<i> /lib/firmware/b43legacy/*.fw - 3.x firmware extracted with b43-fwcutter
</I>&gt;<i> /lib/firmware/*.fw - 3.x firmware extracted with bcm43xx-fwcutter
</I>&gt;<i> Any ideas? I don't have much free time available due to work and
</I>&gt;<i> college, but I have good C and C++ coding skills and am willing to
</I>&gt;<i> help.
</I>&gt;<i> 
</I>&gt;<i> 	Thanks,
</I>&gt;<i> 
</I>&gt;<i> Marcelo Juchem
</I>&gt;<i> 
</I>&gt;<i> Following is the output of some commands and content of some config
</I>&gt;<i> files to help the diagnostic.
</I>&gt;<i> ----------------------------------------------
</I>&gt;<i> 
</I>&gt;<i> using debian linux with kernel linux-image-2.6.24-1-686
</I>&gt;<i> updated as of 01/31/2008 from the official debian unstable repository
</I>&gt;<i> 
</I>&gt;<i> firmware extracted to /lib/firmware/b43
</I>&gt;<i> broadcom-wl-4.80.53.0 - extracted with b43-fwcutter 009
</I>&gt;<i> broadcom-wl-4.150.10.5 - extracted with b43-fwcutter 010
</I>&gt;<i> 
</I>&gt;<i> firmware extracted from these files, found at
</I>&gt;<i> <A HREF="http://www.linuxwireless.org/en/users/Drivers/b43:">http://www.linuxwireless.org/en/users/Drivers/b43:</A>
</I>&gt;<i> broadcom-wl-4.80.53.0/kmod/wl_apsta_mimo.o
</I>&gt;<i> broadcom-wl-4.80.53.0/kmod/wl_apsta.o
</I>&gt;<i> broadcom-wl-4.150.10.5/driver/wl_apsta_mimo.o
</I>&gt;<i> 
</I>&gt;<i> b43-fwcutter version 009: obtained from the official debian unstable
</I>&gt;<i> repository as of 01/31/2008
</I>&gt;<i> b43-fwcutter version 010: compiled from sources found at
</I>&gt;<i> <A HREF="http://www.bu3sch.de/b43/fwcutter/">http://www.bu3sch.de/b43/fwcutter/</A>
</I>&gt;<i> 
</I>&gt;<i> --- 'lspci' output - BEGIN ---
</I>&gt;<i> 03:02.0 Network controller: Broadcom Corporation BCM4306 802.11b/g
</I>&gt;<i> Wireless LAN Controller (rev 03)
</I>&gt;<i> --- 'lspci' output - END ---
</I>&gt;<i> 
</I>&gt;<i> --- /etc/network/interfaces - BEGIN ---
</I>&gt;<i> # I changed the ESSID, nickname and password to placeholders
</I>&gt;<i> iface lo inet loopback
</I>&gt;<i> auto lo
</I>&gt;<i> 
</I>&gt;<i> iface eth1 inet dhcp
</I>&gt;<i> wireless-essid WiFiNetworkESSID
</I>&gt;<i> wireless-mode Managed
</I>&gt;<i> wireless-channel 6
</I>&gt;<i> wireless-nickname nickname
</I>&gt;<i> wireless-key open s:password
</I>&gt;<i> hostname nickname
</I>&gt;<i> auto eth1
</I>&gt;<i> --- /etc/network/interfaces - END ---
</I>&gt;<i> 
</I>&gt;<i> --- 'dmesg' output - BEGIN ---
</I>&gt;<i> b43-phy1: Broadcom 4306 WLAN found
</I>&gt;<i> phy1: Selected rate control algorithm 'simple'
</I>&gt;<i> udev: renamed network interface wmaster0 to eth1
</I>&gt;<i> --- 'dmesg' output - END ---
</I>&gt;<i> 
</I>&gt;<i> --- 'iwlist eth1 scan' output - BEGIN ---
</I>&gt;<i> eth1 Interface doesn't support scanning.
</I>&gt;<i> --- 'iwlist eth1 scan' output - END ---
</I>&gt;<i> 
</I>&gt;<i> --- 'ifup' output - BEGIN ---
</I>&gt;<i> Error for wireless request &quot;Set Mode&quot; (8B06) :
</I>&gt;<i> SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> Error for wireless request &quot;Set Encode&quot; (8B2A) :
</I>&gt;<i> SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> Error for wireless request &quot;Set Frequency&quot; (8B04) :
</I>&gt;<i> SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> Error for wireless request &quot;Set ESSID&quot; (8B1A) :
</I>&gt;<i> SET failed on device eth1 ; Operation not supported.
</I>&gt;<i> Internet Systems Consortium DHCP Client V3.1.0
</I>&gt;<i> Copyright 2004-2007 Internet Systems Consortium.
</I>&gt;<i> All rights reserved.
</I>&gt;<i> For info, please visit <A HREF="http://www.isc.org/sw/dhcp/">http://www.isc.org/sw/dhcp/</A>
</I>&gt;<i> 
</I>&gt;<i> eth1: unknown hardware address type 801
</I>&gt;<i> SIOCSIFFLAGS: Operation not supported
</I>&gt;<i> SIOCSIFFLAGS: Operation not supported
</I>&gt;<i> eth1: unknown hardware address type 801
</I>&gt;<i> Listening on LPF/eth1/
</I>&gt;<i> Sending on LPF/eth1/
</I>&gt;<i> Sending on Socket/fallback
</I>&gt;<i> receive_packet failed on eth1: Network is down
</I>&gt;<i> option_space_encapsulate: option space agent does not exist, but is configured.
</I>&gt;<i> DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 8
</I>&gt;<i> send_packet: Network is down
</I>&gt;<i> DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 10
</I>&gt;<i> send_packet: Network is down
</I>&gt;<i> DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 21
</I>&gt;<i> send_packet: Network is down
</I>&gt;<i> DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 19
</I>&gt;<i> send_packet: Network is down
</I>&gt;<i> DHCPDISCOVER on eth1 to 255.255.255.255 port 67 interval 3
</I>&gt;<i> send_packet: Network is down
</I>&gt;<i> No DHCPOFFERS received.
</I>&gt;<i> No working leases in persistent database - sleeping.
</I>&gt;<i> --- 'ifup' output - END ---
</I>
I think your renaming is messed up. If you had sent the output of iwconfig, I could tell for sure. I
am betting that your /etc/udev/rules.d/70-persistent-net.rules needs a rule like

SUBSYSTEM==&quot;net&quot;, DRIVERS==&quot;?*&quot;, ATTR{address}==&quot;XX:XX:XX:XX:XX:XX&quot;, ATTR{type}==&quot;1&quot;, NAME=&quot;eth1&quot;

On your system, I think the ATTR clause is missing and your iwconfig list ends up with eth1 and
wlan0-rename, rather than wmaster0 and eth1. The clue is that wmaster0 has type 801.

Fix your udev rules, and it should work.

Larry


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003356.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
	<LI>Next message: <A HREF="003363.html">WiFi - Broadcom 4306 on kernel 2.6.24 (b43 module)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3358">[ date ]</a>
              <a href="thread.html#3358">[ thread ]</a>
              <a href="subject.html#3358">[ subject ]</a>
              <a href="author.html#3358">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
