<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> BCM94311MCG Rev 2 connects then drops on HP DV6605/ AMD64 X2
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-February/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM94311MCG%20Rev%202%20connects%20then%20drops%20on%20HP%20DV6605/%20AMD64%20X2&In-Reply-To=%3Ca3813c560802081656g1c065f72kc9d0dbcb192b6dba%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003367.html">
   <LINK REL="Next"  HREF="003383.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>BCM94311MCG Rev 2 connects then drops on HP DV6605/ AMD64 X2</H1>
    <B>glenn greenfield</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM94311MCG%20Rev%202%20connects%20then%20drops%20on%20HP%20DV6605/%20AMD64%20X2&In-Reply-To=%3Ca3813c560802081656g1c065f72kc9d0dbcb192b6dba%40mail.gmail.com%3E"
       TITLE="BCM94311MCG Rev 2 connects then drops on HP DV6605/ AMD64 X2">glenn.greenfield at gmail.com
       </A><BR>
    <I>Sat Feb  9 01:56:23 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003367.html">BCM94311MCG Rev 2 connects then drops on HP DV6605/ AMD64 X2
</A></li>
        <LI>Next message: <A HREF="003383.html">BCM94311MCG Rev 2 connects then drops on HP DV6605/ AMD64 X2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3382">[ date ]</a>
              <a href="thread.html#3382">[ thread ]</a>
              <a href="subject.html#3382">[ subject ]</a>
              <a href="author.html#3382">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Feb 7, 2008 6:39 PM, Larry Finger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">larry.finger at lwfinger.net</A>&gt; wrote:
&gt;<i>
</I>&gt;<i> glenn greenfield wrote:
</I>&gt;<i> &gt; Debian Sid 64 bit
</I>&gt;<i> &gt; AMD64 X2
</I>&gt;<i> &gt; Kernel 2.6.24-smp w/ 4311_2 patch applied from here:
</I>&gt;<i> &gt; <A HREF="http://linuxwireless.org/download/b43/patch_2.6.24_for_4311_2">http://linuxwireless.org/download/b43/patch_2.6.24_for_4311_2</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; lspci
</I>&gt;<i> &gt; 03:00.0 Network controller: Broadcom Corporation BCM94311MCG wlan
</I>&gt;<i> &gt; mini-PCI (rev 02)
</I>&gt;<i> &gt; _______________________________________________________
</I>&gt;<i> &gt; My kernel configuration:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # zcat /proc/config.gz |grep B43
</I>&gt;<i> &gt; CONFIG_B43=m
</I>&gt;<i> &gt; CONFIG_B43_PCI_AUTOSELECT=y
</I>&gt;<i> &gt; CONFIG_B43_PCICORE_AUTOSELECT=y
</I>&gt;<i> &gt; CONFIG_B43_LEDS=y
</I>&gt;<i> &gt; CONFIG_B43_RFKILL=y
</I>&gt;<i> &gt; CONFIG_B43_DEBUG=y
</I>&gt;<i> &gt; CONFIG_B43_DMA=y
</I>&gt;<i> &gt; CONFIG_B43_PIO=y
</I>&gt;<i> &gt; CONFIG_B43_DMA_AND_PIO_MODE=y
</I>&gt;<i> &gt; # CONFIG_B43_DMA_MODE is not set
</I>&gt;<i> &gt; # CONFIG_B43_PIO_MODE is not set
</I>&gt;<i> &gt; CONFIG_B43LEGACY=m
</I>&gt;<i> &gt; CONFIG_B43LEGACY_PCI_AUTOSELECT=y
</I>&gt;<i> &gt; CONFIG_B43LEGACY_PCICORE_AUTOSELECT=y
</I>&gt;<i> &gt; CONFIG_B43LEGACY_LEDS=y
</I>&gt;<i> &gt; CONFIG_B43LEGACY_RFKILL=y
</I>&gt;<i> &gt; CONFIG_B43LEGACY_DEBUG=y
</I>&gt;<i> &gt; CONFIG_B43LEGACY_DMA=y
</I>&gt;<i> &gt; CONFIG_B43LEGACY_PIO=y
</I>&gt;<i> &gt; CONFIG_B43LEGACY_DMA_AND_PIO_MODE=y
</I>&gt;<i> &gt; # CONFIG_B43LEGACY_DMA_MODE is not set
</I>&gt;<i> &gt; # CONFIG_B43LEGACY_PIO_MODE is not set
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I have completely disabled BCM43xx
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; # zcat /proc/config.gz |grep BCM43
</I>&gt;<i> &gt; # CONFIG_BCM43XX is not set
</I>&gt;<i> &gt; ________________________________________________________
</I>&gt;<i> &gt; # lsmod|grep b43
</I>&gt;<i> &gt; b43                   161840  0
</I>&gt;<i> &gt; rfkill                  9680  3 rfkill_input,b43
</I>&gt;<i> &gt; mac80211              143948  1 b43
</I>&gt;<i> &gt; led_class               6664  1 b43
</I>&gt;<i> &gt; input_polldev           6352  1 b43
</I>&gt;<i> &gt; ________________________________________________________
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; dmesg|grep b43
</I>&gt;<i> &gt; b43-phy0: Broadcom 4311 WLAN found
</I>&gt;<i> &gt; b43-phy0 debug: Found PHY: Analog 4, Type 2, Revision 9
</I>&gt;<i> &gt; b43-phy0 debug: Found Radio: Manuf 0x17F, Version 0x2050, Revision 2
</I>&gt;<i> &gt; input: b43-phy0 as /devices/virtual/input/input9
</I>&gt;<i> &gt; b43-phy0 debug: Loading firmware version 351.126 (2006-07-29 05:54:02)
</I>&gt;<i> &gt; b43-phy0 debug: Chip initialized
</I>&gt;<i> &gt; b43-phy0 debug: 64-bit DMA initialized
</I>&gt;<i> &gt; Registered led device: b43-phy0:tx
</I>&gt;<i> &gt; Registered led device: b43-phy0:rx
</I>&gt;<i> &gt; Registered led device: b43-phy0:radio
</I>&gt;<i> &gt; b43-phy0 ERROR: PHY transmission error
</I>&gt;<i> &gt; b43-phy0 debug: Wireless interface started
</I>&gt;<i> &gt; b43-phy0 debug: Adding Interface type 2
</I>&gt;<i> &gt; b43-phy0 debug: Removing Interface type 2
</I>&gt;<i> &gt; b43-phy0 debug: Wireless interface stopped
</I>&gt;<i> &gt; b43-phy0 debug: DMA-64 0x0200 (RX) max used slots: 1/64
</I>&gt;<i> &gt; b43-phy0 debug: DMA-64 0x0340 (TX) max used slots: 0/128
</I>&gt;<i> &gt; b43-phy0 debug: DMA-64 0x0300 (TX) max used slots: 0/128
</I>&gt;<i> &gt; b43-phy0 debug: DMA-64 0x02C0 (TX) max used slots: 0/128
</I>&gt;<i> &gt; b43-phy0 debug: DMA-64 0x0280 (TX) max used slots: 0/128
</I>&gt;<i> &gt; b43-phy0 debug: DMA-64 0x0240 (TX) max used slots: 2/128
</I>&gt;<i> &gt; b43-phy0 debug: DMA-64 0x0200 (TX) max used slots: 0/128
</I>&gt;<i> &gt; input: b43-phy0 as /devices/virtual/input/input10
</I>&gt;<i> &gt; b43-phy0 debug: Loading firmware version 351.126 (2006-07-29 05:54:02)
</I>&gt;<i> &gt; b43-phy0 debug: Chip initialized
</I>&gt;<i> &gt; b43-phy0 debug: 64-bit DMA initialized
</I>&gt;<i> &gt; Registered led device: b43-phy0:tx
</I>&gt;<i> &gt; Registered led device: b43-phy0:rx
</I>&gt;<i> &gt; Registered led device: b43-phy0:radio
</I>&gt;<i> &gt; b43-phy0 debug: Wireless interface started
</I>&gt;<i> &gt; b43-phy0 debug: Adding Interface type 2
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; The device configures and comes up no problem.
</I>&gt;<i> &gt; I can even obtain an i.p. via DHCP however the connection only stays
</I>&gt;<i> &gt; up for a matter of seconds until I get this error:
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; b43-phy0 ERROR: PHY transmission error
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; at which point the device is useless and cannot be made to connect
</I>&gt;<i> &gt; again until after a reboot.
</I>&gt;<i> &gt; Currently I do use WPA however I've even tried disabling encryption
</I>&gt;<i> &gt; entirely but the problem persists.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; I'm not sure what to try at this point.  If you'd like further info
</I>&gt;<i> &gt; from my system just say so and I'll be glad to post it.
</I>&gt;<i>
</I>&gt;<i> Do you get more than one PHY transmission error? With the BCM4311/2, you will get one every time the
</I>&gt;<i> interface is brought up. We don't know why, but it is not critical. I use that interface with WPA
</I>&gt;<i> and have no troubles.
</I>&gt;<i>
</I>&gt;<i> Please send the appropriate section of /var/log/messages starting with the firmware version message,
</I>&gt;<i> and continuing through to after it has disconnected.
</I>&gt;<i>
</I>&gt;<i> Larry
</I>&gt;<i>
</I>
eth0: no link during initialization.
NET: Registered protocol family 10
lo: Disabled Privacy Extensions
ADDRCONF(NETDEV_UP): eth0: link is not ready
ADDRCONF(NETDEV_UP): wlan0: link is not ready
lp: driver loaded but no devices found
ppdev: user-space parallel port driver
wlan0: Initial auth_alg=0
wlan0: authenticate with AP 00:12:17:2f:bb:b6
wlan0: RX authentication from 00:12:17:2f:bb:b6 (alg=0 transaction=2 status=0)
wlan0: authenticated
wlan0: associate with AP 00:12:17:2f:bb:b6
wlan0: RX AssocResp from 00:12:17:2f:bb:b6 (capab=0x411 status=0 aid=2)
wlan0: associated
wlan0: CTS protection enabled (BSSID=00:12:17:2f:bb:b6)
wlan0: WMM queue=2 aci=0 acm=0 aifs=3 cWmin=15 cWmax=1023 burst=0
wlan0: WMM queue=3 aci=1 acm=0 aifs=7 cWmin=15 cWmax=1023 burst=0
wlan0: WMM queue=1 aci=2 acm=0 aifs=2 cWmin=7 cWmax=15 burst=30
wlan0: WMM queue=0 aci=3 acm=0 aifs=2 cWmin=3 cWmax=7 burst=15
ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
Clocksource tsc unstable (delta = -158243821 ns)
wlan0: no IPv6 routers present
b43-phy0 debug: Removing Interface type 2
b43-phy0 debug: Wireless interface stopped
b43-phy0 debug: DMA-64 0x0200 (RX) max used slots: 1/64
b43-phy0 debug: DMA-64 0x0340 (TX) max used slots: 0/128
b43-phy0 debug: DMA-64 0x0300 (TX) max used slots: 0/128
b43-phy0 debug: DMA-64 0x02C0 (TX) max used slots: 0/128
b43-phy0 debug: DMA-64 0x0280 (TX) max used slots: 0/128
b43-phy0 debug: DMA-64 0x0240 (TX) max used slots: 4/128
b43-phy0 debug: DMA-64 0x0200 (TX) max used slots: 0/128
input: b43-phy0 as /devices/virtual/input/input10
b43-phy0 debug: Loading firmware version 351.126 (2006-07-29 05:54:02)
b43-phy0 debug: Chip initialized
b43-phy0 debug: 64-bit DMA initialized
Registered led device: b43-phy0:tx
Registered led device: b43-phy0:rx
Registered led device: b43-phy0:radio
b43-phy0 debug: Wireless interface started
b43-phy0 debug: Adding Interface type 2
ADDRCONF(NETDEV_UP): wlan0: link is not ready
eth0: no link during initialization.
ADDRCONF(NETDEV_UP): eth0: link is not ready
wlan0: CTS protection enabled (BSSID=00:12:17:2f:bb:b6)
wlan0: RX deauthentication from 00:12:17:2f:bb:b6 (reason=16)
wlan0: deauthenticated
wlan0: privacy configuration mismatch and mixed-cell disabled - disassociate
wlan0: Initial auth_alg=0
wlan0: authenticate with AP 00:12:17:2f:bb:b6
wlan0: RX deauthentication from 00:12:17:2f:bb:b6 (reason=6)
wlan0: RX authentication from 00:12:17:2f:bb:b6 (alg=0 transaction=2 status=0)
wlan0: authenticated
wlan0: associate with AP 00:12:17:2f:bb:b6
wlan0: RX AssocResp from 00:12:17:2f:bb:b6 (capab=0x411 status=0 aid=2)
wlan0: associated
wlan0: CTS protection enabled (BSSID=00:12:17:2f:bb:b6)
wlan0: WMM queue=2 aci=0 acm=0 aifs=3 cWmin=15 cWmax=1023 burst=0
wlan0: WMM queue=3 aci=1 acm=0 aifs=7 cWmin=15 cWmax=1023 burst=0
wlan0: WMM queue=1 aci=2 acm=0 aifs=2 cWmin=7 cWmax=15 burst=30
wlan0: WMM queue=0 aci=3 acm=0 aifs=2 cWmin=3 cWmax=7 burst=15
ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
wlan0: no IPv6 routers present
nvidia: module license 'NVIDIA' taints kernel.
ACPI: PCI Interrupt Link [LGPU] enabled at IRQ 16
ACPI: PCI Interrupt 0000:00:12.0[A] -&gt; Link [LGPU] -&gt; GSI 16 (level,
low) -&gt; IRQ 16
PCI: Setting latency timer of device 0000:00:12.0 to 64
NVRM: loading NVIDIA UNIX x86_64 Kernel Module  169.09  Fri Jan 11
14:04:37 PST 2008
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
b43-phy0 ERROR: PHY transmission error
printk: 9 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 9 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 3 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 2 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 5 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 3 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 2 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 1 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 2 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 5 messages suppressed.
b43-phy0 ERROR: PHY transmission error
printk: 2 messages suppressed.
b43-phy0 ERROR: PHY transmission error

Perhaps I have the wrong firmware?  I used what was in Debian on my
first attempts but it seems that version is outdated or just incorrect
for my wireless card.  So I tried this:

wget <A HREF="http://mirror2.openwrt.org/sources/broadcom-wl-4.150.10.5.tar.bz2">http://mirror2.openwrt.org/sources/broadcom-wl-4.150.10.5.tar.bz2</A>
tar xjvf broadcom-wl-4.150.10.5.tar.bz2
cd broadcom-wl-4.150.10.5
b43-fwcutter -w /lib/firmware driver/wl_apsta_mimo.o
Sorry, the input file is either wrong or not supported by b43-fwcutter.
This file has an unknown MD5sum cb8d70972b885b1f8883b943c0261a3c.

I repeated this several times with the same results each time.  Not
sure what to do from this point.


-- 
glenn greenfield

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003367.html">BCM94311MCG Rev 2 connects then drops on HP DV6605/ AMD64 X2
</A></li>
	<LI>Next message: <A HREF="003383.html">BCM94311MCG Rev 2 connects then drops on HP DV6605/ AMD64 X2
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3382">[ date ]</a>
              <a href="thread.html#3382">[ thread ]</a>
              <a href="subject.html#3382">[ subject ]</a>
              <a href="author.html#3382">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
