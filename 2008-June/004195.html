<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> b43 opensource firmware for monitor mode
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-June/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43%20opensource%20firmware%20for%20monitor%20mode&In-Reply-To=%3C22744.201.36.143.231.1212676638.%3Amail%40corporativo.mandic.com.br%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004192.html">
   <LINK REL="Next"  HREF="004196.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>b43 opensource firmware for monitor mode</H1>
    <B>Felipe Maya</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43%20opensource%20firmware%20for%20monitor%20mode&In-Reply-To=%3C22744.201.36.143.231.1212676638.%3Amail%40corporativo.mandic.com.br%3E"
       TITLE="b43 opensource firmware for monitor mode">felipe.maya at vexcorp.com
       </A><BR>
    <I>Thu Jun  5 16:37:18 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004192.html">b43legacy: Problems with dhclient
</A></li>
        <LI>Next message: <A HREF="004196.html">b43 opensource firmware for monitor mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4195">[ date ]</a>
              <a href="thread.html#4195">[ thread ]</a>
              <a href="subject.html#4195">[ subject ]</a>
              <a href="author.html#4195">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">root at OpenWrt</A>:/# insmod b43.ko fwpostfix=-open
Segmentation fault
<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">root at OpenWrt</A>:/# dmesg
Unhandled kernel unaligned access[#1]:
Cpu 0
$ 0   : 00000000 1000b800 08124243 80203008
$ 4   : 80262570 80202f88 00000021 801ffe3c
$ 8   : 80280000 80280000 80279fa0 df809371
$12   : f3a5dbbc 00000000 00200200 32ee058e
$16   : c018b008 80262570 c018b024 802bc6a4
$20   : c0161ef0 c0141000 c018c66c 80202f88
$24   : 00000018 000186a0
$28   : 81e5a000 81e5bd40 00000173 80152044
Hi    : ffffffc5
Lo    : 12af9c00
epc   : c0174d64     Not tainted
ra    : 80152044 Status: 1000b803    KERNEL EXL IE
Cause : 00000010
BadVA : 08124257
PrId  : 00029029
Modules linked in: b43 option usbserial evdev ehci_hcd uhci_hcd ohci_hcd
input_core nf_nat_tftp nf_conntrack_tftp nf_nat_irc nf_conntrack_irc
nf_nat_ftp nf_conntrack_ftp ipt_REDIRECT ipt_NETMAP ppp_async ppp_generic
slhc crc_ccitt rt73usb rt2x00usb rt2x00lib usbcore mac80211 cfg80211
michael_mic arc4 aes deflate ecb cbc blkcipher crypto_hash cryptomgr
crypto_algapi switch_robo switch_core diag
Process insmod (pid: 702, threadinfo=81e5a000, task=8121c9d8)
Stack : 00000001 00000000 00000001 00000001 386d43e2 375027ff 81e3fafc 81e3fb64
        81e5bd80 802bb448 800c4090 800c4080 802bc668 80203008 00000000 8039e500
        c018b008 80262570 c018b024 802bc6a4 c0161ef0 c0141000 c018c66c c00f7a60
        00000173 80152044 80262570 81d4a05e 81df4a10 81d4a000 802bc6c0 802bc600
        8013300c 80132fb0 802bc648 801f408c 81061600 000006fa 802bc6c0 802bc600
        ...
Call
Trace:[&lt;800c4090&gt;][&lt;800c4080&gt;][&lt;c00f7a60&gt;][&lt;80152044&gt;][&lt;8013300c&gt;][&lt;80132fb0&gt;][&lt;801f408c&gt;][&lt;801334a4&gt;][&lt;80131c6c&gt;][&lt;8010016c&gt;][&lt;8013332c&gt;][&lt;80131dd8&gt;][&lt;c00f7a60&gt;][&lt;801321f8&gt;][&lt;80054fa8&gt;][&lt;8006b2c8&gt;][&lt;c0130028&gt;][&lt;8004b1b0&gt;][&lt;8000c7b0&gt;]

Code: afa30034  8fa40068  8c82000c &lt;8c420014&gt; 104001b2  2403ffed  94430026 
24024321  10620005

<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">root at OpenWrt</A>:/# ls -l /lib/firmware/b43-open/
-rw-r--r--    1 root     root           28 Jun  4  2008 b0g0bsinitvals5.fw
-rw-r--r--    1 root     root          224 Jun  4  2008 b0g0initvals5.fw
-rw-r--r--    1 root     root         2856 Jun  4  2008 ucode5.fw

<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">root at OpenWrt</A>:/tmp# cat /proc/modules
b43 125024 1 - Loading 0xc016e000
option 5440 0 - Live 0xc012d000
usbserial 24160 1 option, Live 0xc013a000
evdev 6880 0 - Live 0xc00b2000
ehci_hcd 30384 0 - Live 0xc00c7000
uhci_hcd 19920 0 - Live 0xc0127000
ohci_hcd 16720 0 - Live 0xc00d7000
input_core 20208 1 evdev, Live 0xc00d1000
nf_nat_tftp 480 0 - Live 0xc00c5000
nf_conntrack_tftp 2480 1 nf_nat_tftp, Live 0xc00c3000
nf_nat_irc 960 0 - Live 0xc00c1000
nf_conntrack_irc 2832 1 nf_nat_irc, Live 0xc00b5000
nf_nat_ftp 1472 0 - Live 0xc0086000
nf_conntrack_ftp 5152 1 nf_nat_ftp, Live 0xc00be000
ipt_REDIRECT 736 0 - Live 0xc00b0000
ipt_NETMAP 736 0 - Live 0xc00ae000
ppp_async 9856 0 - Live 0xc00a7000
ppp_generic 20192 1 ppp_async, Live 0xc00b8000
slhc 5376 1 ppp_generic, Live 0xc00ab000
crc_ccitt 1024 1 ppp_async, Live 0xc00a5000
rt73usb 20832 0 - Live 0xc0090000
rt2x00usb 6048 1 rt73usb, Live 0xc0079000
rt2x00lib 15328 2 rt73usb,rt2x00usb, Live 0xc0098000
usbcore 106576 8
option,usbserial,ehci_hcd,uhci_hcd,ohci_hcd,rt73usb,rt2x00usb, Live
0xc010b000
mac80211 160800 3 b43,rt2x00usb,rt2x00lib, Live 0xc00e2000
cfg80211 27504 2 rt2x00lib,mac80211, Live 0xc009d000
michael_mic 1600 0 - Live 0xc0084000
arc4 864 2 - Live 0xc0082000
aes 28240 0 - Live 0xc0088000
deflate 1600 0 - Live 0xc0080000
ecb 1440 2 - Live 0xc007e000
cbc 2496 0 - Live 0xc007c000
blkcipher 3824 2 ecb,cbc, Live 0xc0075000
crypto_hash 1024 0 - Live 0xc0077000
cryptomgr 1472 0 - Live 0xc006a000
crypto_algapi 7040 7 michael_mic,arc4,aes,deflate,ecb,cbc,cryptomgr, Live
0xc0060000
switch_robo 4224 0 - Live 0xc0067000
switch_core 5088 1 switch_robo, Live 0xc0064000
diag 7184 0 - Live 0xc006c000


Note that the RT73 is installed using compat-wireless-2.6, seems work well.


---- Mensagem Original ----
From: &quot;Michael Buesch&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">mb at bu3sch.de</A>&gt;
To: &quot;Pavel Roskin&quot; &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">proski at gnu.org</A>&gt;
Sent: Qui, Junho 5, 2008 10:35 am
Subject: Re: b43 opensource firmware for monitor mode

On Thursday 05 June 2008 04:46:28 Pavel Roskin wrote:
&gt;<i> On Wed, 2008-06-04 at 17:16 +0200, Michael Buesch wrote:
</I>&gt;<i> &gt; Release early, release often.
</I>&gt;<i> &gt; Here's the first testing release of the b43 opensource firmware.
</I>&gt;<i> &gt; <A HREF="http://bu3sch.de/misc/b43-openfw-20080604.tar.bz2">http://bu3sch.de/misc/b43-openfw-20080604.tar.bz2</A>
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; Currently only the receive path is partially implemented. So that
</I>&gt;<i> &gt; means we can only run it in monitor mode for now. This firmware is
</I>&gt;<i> &gt; able to receive packets and push them without special handling (like
</I>&gt;<i> &gt; decrypting) to the driver.
</I>&gt;<i> &gt; There are lots of bugs, of course. Sometimes the PLCP header is
</I>corrupted.
&gt;<i> &gt; That will result in a kernel driver warning in xmit.c.
</I>&gt;<i> &gt;
</I>&gt;<i> &gt; This firmware does _only_ work on wireless core revisions 5, 6, 7, 8 or
</I>10.
&gt;<i>
</I>&gt;<i> That's great news!  Having distributable firmware would simplify
</I>&gt;<i> installation, placing b43 to the same league as Intel devices.  But
</I>&gt;<i> having free firmware would be unique to Broadcom card and extremely
</I>&gt;<i> attractive for research in wireless communications and development of
</I>&gt;<i> novel devices using non-standard protocol extensions.
</I>&gt;<i>
</I>&gt;<i> As a short term goal, maybe bcm4328 could be dumbed down to work with
</I>&gt;<i> b43?
</I>&gt;<i>
</I>&gt;<i> I've tried it with bcm4318 first, and it hung hard on module load.  Even
</I>&gt;<i> Alt-SysRq would not work.  It turns out it was revision 9 missing in
</I>&gt;<i> your list.
</I>&gt;<i>
</I>&gt;<i> Then I tries a bcm4306 device with rev 5 core.  The module loaded.  I
</I>&gt;<i> brought it up in managed mode first.  Scanning didn't work.  I brought
</I>&gt;<i> the device down and set monitor mode.  But the system hung when I tried
</I>&gt;<i> to bring the interface back up.
</I>
There shouldn't be a reason for a freeze. It might crash, yes, but it always
prints out useful messages first for me.

--
Greetings Michael.
_______________________________________________
Bcm43xx-dev mailing list
<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004192.html">b43legacy: Problems with dhclient
</A></li>
	<LI>Next message: <A HREF="004196.html">b43 opensource firmware for monitor mode
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4195">[ date ]</a>
              <a href="thread.html#4195">[ thread ]</a>
              <a href="subject.html#4195">[ subject ]</a>
              <a href="author.html#4195">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
