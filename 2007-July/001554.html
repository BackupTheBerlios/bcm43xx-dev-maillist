<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] Actually set TX power parameters.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-July/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20Actually%20set%20TX%20power%20parameters.&In-Reply-To=%3C8e6f94720707171206n3bf09d15h860fe2c42f5c620a%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001553.html">
   <LINK REL="Next"  HREF="001555.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] Actually set TX power parameters.</H1>
    <B>Will Dyson</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20Actually%20set%20TX%20power%20parameters.&In-Reply-To=%3C8e6f94720707171206n3bf09d15h860fe2c42f5c620a%40mail.gmail.com%3E"
       TITLE="[PATCH] Actually set TX power parameters.">will.dyson at gmail.com
       </A><BR>
    <I>Tue Jul 17 21:06:27 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001553.html">[PATCH] Actually set TX power parameters.
</A></li>
        <LI>Next message: <A HREF="001555.html">Occational lockups during boot with post 2.6.22 kernels
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1554">[ date ]</a>
              <a href="thread.html#1554">[ thread ]</a>
              <a href="subject.html#1554">[ subject ]</a>
              <a href="author.html#1554">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 7/16/07, Will Dyson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">will.dyson at gmail.com</A>&gt; wrote:
&gt;<i> When calculating transmission power for boards without hardware power
</I>&gt;<i> control, we fail to set the phy parameters to the new values we have
</I>&gt;<i> calculated.
</I>
I've been running my box with this patch for the last 24 hours or so,
on top of Michael's git tree + wireless-dev.

Unfortunately, it does not seem to result in any real improvement to
wireless performance. Using the txpower debugging support from
Michael's tree, I see the measured TX power bouncing all over the
place. The target TX power is 14.25 dBm, but my logs show it wandering
from 4ish dBm all the way up to 17 dBm. It never stays at or above the
target power long enough to complete the WPA handshake.

Even when it does get near the target value, the next recalculation
always seems to send it to one extreme or the other.

On the plus side, when I set the attenuation values manually to

Baseband: 3
RF: 5
tx_control: 0x30

I get a measured power output of 17dBm, which allows me to associate
and stay associated (with performance about as good as the softmac
driver).

Hopefully, some tweaking of the start values and adjustment algorithm
will make this driver usable for the majority of people currently
using softmac.

-- 
Will Dyson

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001553.html">[PATCH] Actually set TX power parameters.
</A></li>
	<LI>Next message: <A HREF="001555.html">Occational lockups during boot with post 2.6.22 kernels
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1554">[ date ]</a>
              <a href="thread.html#1554">[ thread ]</a>
              <a href="subject.html#1554">[ subject ]</a>
              <a href="author.html#1554">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
