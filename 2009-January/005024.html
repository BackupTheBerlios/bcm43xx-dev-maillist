<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [RFC 2/7] B43N: Add some register mask and variables to store b43	Nphy values
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BRFC%202/7%5D%20B43N%3A%20Add%20some%20register%20mask%20and%20variables%20to%20store%20b43%0A%09Nphy%20values&In-Reply-To=%3C1197ff4c0901132358r628f940j114f96eec421050b%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005046.html">
   <LINK REL="Next"  HREF="005025.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[RFC 2/7] B43N: Add some register mask and variables to store b43	Nphy values</H1>
    <B>YanBo</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BRFC%202/7%5D%20B43N%3A%20Add%20some%20register%20mask%20and%20variables%20to%20store%20b43%0A%09Nphy%20values&In-Reply-To=%3C1197ff4c0901132358r628f940j114f96eec421050b%40mail.gmail.com%3E"
       TITLE="[RFC 2/7] B43N: Add some register mask and variables to store b43	Nphy values">dreamfly281 at gmail.com
       </A><BR>
    <I>Wed Jan 14 08:58:34 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005046.html">[RFC 1/7]B43N: Update the initn process following the new specs.
</A></li>
        <LI>Next message: <A HREF="005025.html">[RFC 3/7] B43N: Add the periodic calibration function
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5024">[ date ]</a>
              <a href="thread.html#5024">[ thread ]</a>
              <a href="subject.html#5024">[ subject ]</a>
              <a href="author.html#5024">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This patch add some variables like havoid power_control to record  the
11n Phy's states.

Signed-off-by: Li YanBo &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">dreamfly281 at gmail.com</A>&gt;
---
 drivers/net/wireless/b43/phy_n.h |   20 ++++++++++++++++----
 1 files changed, 16 insertions(+), 4 deletions(-)

diff --git a/drivers/net/wireless/b43/phy_n.h b/drivers/net/wireless/b43/phy_n.h
index 1749aef..466a317 100644
--- a/drivers/net/wireless/b43/phy_n.h
+++ b/drivers/net/wireless/b43/phy_n.h
@@ -33,6 +33,7 @@
 #define  B43_NPHY_C1_CGAINI_CL2DETECT		0x2000 /* Clip 2 detect mask */
 #define B43_NPHY_C1_CCK_CGAINI			B43_PHY_N(0x01D) /* Core 1 CCK
compute gain info */
 #define  B43_NPHY_C1_CCK_CGAINI_GAINBKOFF	0x001F /* Gain backoff */
+#define  B43_NPHY_C1_CCK_CGAINI_GAINBKOFF_SHIFT	0
 #define  B43_NPHY_C1_CCK_CGAINI_CLIPGBKOFF	0x01E0 /* CCK barely clip
gain backoff */
 #define B43_NPHY_C1_MINMAX_GAIN			B43_PHY_N(0x01E) /* Core 1 min/max gain */
 #define  B43_NPHY_C1_MINGAIN			0x00FF /* Minimum gain */
@@ -86,6 +87,7 @@
 #define  B43_NPHY_C2_CGAINI_CL2DETECT		0x2000 /* Clip 2 detect mask */
 #define B43_NPHY_C2_CCK_CGAINI			B43_PHY_N(0x033) /* Core 2 CCK
compute gain info */
 #define  B43_NPHY_C2_CCK_CGAINI_GAINBKOFF	0x001F /* Gain backoff */
+#define  B43_NPHY_C2_CCK_CGAINI_GAINBKOFF_SHIFT	0
 #define  B43_NPHY_C2_CCK_CGAINI_CLIPGBKOFF	0x01E0 /* CCK barely clip
gain backoff */
 #define B43_NPHY_C2_MINMAX_GAIN			B43_PHY_N(0x034) /* Core 2 min/max gain */
 #define  B43_NPHY_C2_MINGAIN			0x00FF /* Minimum gain */
@@ -361,8 +363,8 @@
 #define B43_NPHY_BIST_STAT3			B43_PHY_N(0x0EB) /* BIST status 3 */
 #define B43_NPHY_RFCTL_OVER			B43_PHY_N(0x0EC) /* RF control override */
 #define B43_NPHY_MIMOCFG			B43_PHY_N(0x0ED) /* MIMO config */
-#define  B43_NPHY_MIMOCFG_GFMIX			0x0004 /* Greenfield or mixed mode */
-#define  B43_NPHY_MIMOCFG_AUTO			0x0100 /* Greenfield/mixed mode auto */
+#define  B43_NPHY_MIMOCFG_GF			0x0004 /* Greenfield mode */
+#define  B43_NPHY_MIMOCFG_AUTO			0x0100 /* auto/mixed mode  */
 #define B43_NPHY_RADAR_BLNKCTL			B43_PHY_N(0x0EE) /* Radar blank control */
 #define B43_NPHY_A0RADAR_FIFOCTL		B43_PHY_N(0x0EF) /* Antenna 0 radar
FIFO control */
 #define B43_NPHY_A1RADAR_FIFOCTL		B43_PHY_N(0x0F0) /* Antenna 1 radar
FIFO control */
@@ -623,6 +625,7 @@
 #define  B43_NPHY_TXPCTL_CMD_COEFF		0x2000 /* Power control coefficients */
 #define  B43_NPHY_TXPCTL_CMD_HWPCTLEN		0x4000 /* Hardware TX power
control enable */
 #define  B43_NPHY_TXPCTL_CMD_PCTLEN		0x8000 /* TX power control enable */
+#define  B43_NPHY_TXPCTL_CMD_ERDN		0xe000 /* Enable Radio Disable
Notification (Airline Mode) */
 #define B43_NPHY_TXPCTL_N			B43_PHY_N(0x1E8) /* TX power control N num */
 #define  B43_NPHY_TXPCTL_N_TSSID		0x00FF /* N TSSI delay */
 #define  B43_NPHY_TXPCTL_N_TSSID_SHIFT		0
@@ -915,12 +918,21 @@
 #define B2055_C2_B0NB_RSSIVCM		0xDE /* Core 2 B0 narrow-band RSSI VCM */
 #define B2055_C2_GENSPARE2		0xE2 /* Core 2 GEN spare 2 */

-
-
 struct b43_wldev;

 struct b43_phy_n {
 	//TODO lots of missing stuff
+	int deaf_cnt;
+	u16 cctl;		/* register classifer control  */
+	u16 havoid;		/* PHY hang avoidance */
+	u16 tx_pwr;		/* TX power control */
+
+	u16 clip1_dtc;
+	u16 clip2_dtc;
+
+	u16 gain_c0;		/* gain of core 0 */
+	u16 gain_c1;		/* gain of core 1 */
+
 };


-- 
1.5.6.3

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005046.html">[RFC 1/7]B43N: Update the initn process following the new specs.
</A></li>
	<LI>Next message: <A HREF="005025.html">[RFC 3/7] B43N: Add the periodic calibration function
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5024">[ date ]</a>
              <a href="thread.html#5024">[ thread ]</a>
              <a href="subject.html#5024">[ subject ]</a>
              <a href="author.html#5024">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
