<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> opensource firmware now accept version 410 frames
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-January/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20opensource%20firmware%20now%20accept%20version%20410%20frames&In-Reply-To=%3C8930BB48-C78B-4796-8F42-DB1DD3038CCC%40ing.unibs.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005154.html">
   <LINK REL="Next"  HREF="005159.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>opensource firmware now accept version 410 frames</H1>
    <B>Francesco Gringoli</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20opensource%20firmware%20now%20accept%20version%20410%20frames&In-Reply-To=%3C8930BB48-C78B-4796-8F42-DB1DD3038CCC%40ing.unibs.it%3E"
       TITLE="opensource firmware now accept version 410 frames">francesco.gringoli at ing.unibs.it
       </A><BR>
    <I>Sat Jan 31 20:15:22 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005154.html">opensource firmware now accept version 410 frames
</A></li>
        <LI>Next message: <A HREF="005159.html">opensource firmware now accept version 410 frames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5158">[ date ]</a>
              <a href="thread.html#5158">[ thread ]</a>
              <a href="subject.html#5158">[ subject ]</a>
              <a href="author.html#5158">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Jan 31, 2009, at 7:54 AM, Larry Finger wrote:

&gt;<i> Francesco,
</I>&gt;<i>
</I>&gt;<i> I changed the dma.c code to WARN_ON rather than BUG_ON and also dump
</I>&gt;<i> the cookie for the erring case. Of course, the system no longer
</I>&gt;<i> crashes, nor even stops on the first error. I have no idea how many
</I>&gt;<i> errors occurred before I got it stopped, but the cookies for the first
</I>&gt;<i> few offending frames were 0x2030, 0x2032, 0x2048, 0x204c, 0x204e,
</I>&gt;<i> 0x2050, and 0x2052.
</I>&gt;<i>
</I>&gt;<i> When I got it stopped, I dumped /sys/kernel/debug/b43/phy0/txstat and
</I>&gt;<i> obtained:
</I>&gt;<i>
</I>&gt;<i> [cut]
</I>Larry,

many thanks for your help in debugging. However I can't reproduce that  
error. I tried all this afternoon with a 4306rev3 on a CardBus board  
but all efforts to freeze the PC were useless. I checked again the  
difference between r5.0 and r5.1 but it is only 10 lines... so easy to  
debug that I'm pretty sure that error is not due to changes into  
header offsets.

&gt;<i> Is there any way for me to me to freeze the interface when the first
</I>&gt;<i> error occurs without inducing a kernel panic?
</I>I don't understand completely your question: if you need to stop the  
firmware without having its memory corrupted we can add a semaphore  
just after the WARN_ON into shm so that next loop after  
state_machine_start we enter an infinite loop. However this would  
happen after hundreds cycles. Tell me if we can helping adding debug  
blocks into the firmware.

What kind of PC are you testing your CardBus adapter? Is that a 32bit  
or 16bit?

Cheers,
-FG

&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Larry
</I>&gt;<i>
</I>
-------

Francesco Gringoli, PhD - Assistant Professor
Dept. of Electrical Engineering for Automation
University of Brescia
via Branze, 38
25123 Brescia
ITALY

Ph:  ++39.030.3715843
FAX: ++39.030.380014
WWW: <A HREF="http://www.ing.unibs.it/~gringoli">http://www.ing.unibs.it/~gringoli</A>





</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005154.html">opensource firmware now accept version 410 frames
</A></li>
	<LI>Next message: <A HREF="005159.html">opensource firmware now accept version 410 frames
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5158">[ date ]</a>
              <a href="thread.html#5158">[ thread ]</a>
              <a href="subject.html#5158">[ subject ]</a>
              <a href="author.html#5158">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
