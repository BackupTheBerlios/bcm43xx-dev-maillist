<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> PHY Transmission error and radio turned off with b43legacy
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2010-January/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20PHY%20Transmission%20error%20and%20radio%20turned%20off%20with%20b43legacy&In-Reply-To=%3C4B50C916.7090303%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006773.html">
   <LINK REL="Next"  HREF="006777.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>PHY Transmission error and radio turned off with b43legacy</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20PHY%20Transmission%20error%20and%20radio%20turned%20off%20with%20b43legacy&In-Reply-To=%3C4B50C916.7090303%40lwfinger.net%3E"
       TITLE="PHY Transmission error and radio turned off with b43legacy">Larry.Finger at lwfinger.net
       </A><BR>
    <I>Fri Jan 15 20:59:18 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="006773.html">[PATCHes] b43: all N-PHY patches
</A></li>
        <LI>Next message: <A HREF="006777.html">[PATCH 1/7] b43: N-PHY: implement RX PHY cleanup and setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6774">[ date ]</a>
              <a href="thread.html#6774">[ thread ]</a>
              <a href="subject.html#6774">[ subject ]</a>
              <a href="author.html#6774">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 01/15/2010 06:12 AM, Jochen Friedrich wrote:
&gt;<i> Daniel Schmitt wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> hostapd doesn't continue to work after controller is restarted.
</I>&gt;&gt;<i> I also have the problem that the wlan0-interface shall not be upped with
</I>&gt;&gt;<i> &quot;ifconfig wlan0 0.0.0.0 up&quot; before starting hostapd, otherwise no beacons
</I>&gt;&gt;<i> will be send. The interface must be down before starting hostapd.
</I>&gt;&gt;<i> If I terminate a not daemonized hostapd with CTRL+C and restart if
</I>&gt;&gt;<i> without
</I>&gt;&gt;<i> rmmod+modprobe b43legacy, no beacons are sent, too. And I cannot connect
</I>&gt;&gt;<i> the AP.
</I>&gt;&gt;<i> This happens with the bleeding-edge wireless drivers 2009-11-13.
</I>&gt;<i> 
</I>&gt;<i> I noticed the same on MN700 hardware running OpenWrt bleeding edge. The
</I>&gt;<i> init scripts enable and disable wlan0 once before starting hostapd.
</I>&gt;<i> Here, beacons are still being sent, but hostapd is unable to transmit
</I>&gt;<i> any packet. When reloading b43legacy and starting hostapd manually it
</I>&gt;<i> works, but only once.
</I>&gt;<i> 
</I>&gt;<i> The attached patch resolves the problem for me.
</I>
Daniel: Does this patch fix your problem as well?

Has this problem been reported in the kernel bugzilla? If so, what is the number?

How far back does this problem go? From the date of your compat-wireless
package, it seems that 2.6.32 would be affected. How about 2.6.31?

I have tested the patch on my system where it does no harm. I do not run that
system as an AP and had not seen the problem.

As soon as I have the answers to these questions, I will push the patch to
wireless testing.

Thanks for resolving this issue.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006773.html">[PATCHes] b43: all N-PHY patches
</A></li>
	<LI>Next message: <A HREF="006777.html">[PATCH 1/7] b43: N-PHY: implement RX PHY cleanup and setup
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6774">[ date ]</a>
              <a href="thread.html#6774">[ thread ]</a>
              <a href="subject.html#6774">[ subject ]</a>
              <a href="author.html#6774">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
