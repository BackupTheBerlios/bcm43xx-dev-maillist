<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> USB device protocol
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-January/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20USB%20device%20protocol&In-Reply-To=%3C1169815875.15413.1.camel%40johannes.berg%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000195.html">
   <LINK REL="Next"  HREF="000206.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>USB device protocol</H1>
    <B>Johannes Berg</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20USB%20device%20protocol&In-Reply-To=%3C1169815875.15413.1.camel%40johannes.berg%3E"
       TITLE="USB device protocol">johannes at sipsolutions.net
       </A><BR>
    <I>Fri Jan 26 13:51:15 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000195.html">[PATCH] bcm43xx-d80211: Interrogate hardware-enable switch and	update LEDs
</A></li>
        <LI>Next message: <A HREF="000206.html">USB device protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#197">[ date ]</a>
              <a href="thread.html#197">[ thread ]</a>
              <a href="subject.html#197">[ subject ]</a>
              <a href="author.html#197">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Interesting. I looked at the USB dump a bit and compared it to the RNDIS
structures in the Linux rndis gadget driver... The device is a fullmac
device using 802.3 framing.

Most of the interesting things are apparently done via private OIDs and
variables...

Attached are three files to dump the data. If you have a snoopy pro
export log, use:

./rndis-dump.py &lt; SnoopyProExport.log | less

For other logs, this'll need to be adjusted...
You can also give --xml as a command line parameter, then it'll replace
the &lt;payloadbytes&gt; tag contents only instead of stripping all the xml.

If anyone else wants to reverse engineer this protocol I'll send him my
device. Probably not really too hard to do, but absolutely not what I
expected -- I had expected a custom proprietary access interface to the
registers. I'm not too inclined to look at it much as it's a completely
different device. Based on the variables they send to the device, I'd
think they have their driver running on it.

Have fun,
johannes
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rndis.py
Type: text/x-python
Size: 6258 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment.py">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment.py</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rndis-dump.py
Type: text/x-python
Size: 1088 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment-0001.py">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment-0001.py</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: rndis_oids.py
Type: text/x-python
Size: 5971 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment-0002.py">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment-0002.py</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 190 bytes
Desc: This is a digitally signed message part
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment.pgp">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070126/7d73fd77/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000195.html">[PATCH] bcm43xx-d80211: Interrogate hardware-enable switch and	update LEDs
</A></li>
	<LI>Next message: <A HREF="000206.html">USB device protocol
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#197">[ date ]</a>
              <a href="thread.html#197">[ thread ]</a>
              <a href="subject.html#197">[ subject ]</a>
              <a href="author.html#197">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
