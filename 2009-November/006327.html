<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> b43-phy0 ERROR: Fatal DMA error: 0x00000400
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43-phy0%20ERROR%3A%20Fatal%20DMA%20error%3A%200x00000400&In-Reply-To=%3C4AFDAF3D.8070504%40polymtl.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006350.html">
   <LINK REL="Next"  HREF="006330.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>b43-phy0 ERROR: Fatal DMA error: 0x00000400</H1>
    <B>William Bourque</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43-phy0%20ERROR%3A%20Fatal%20DMA%20error%3A%200x00000400&In-Reply-To=%3C4AFDAF3D.8070504%40polymtl.ca%3E"
       TITLE="b43-phy0 ERROR: Fatal DMA error: 0x00000400">william.bourque at polymtl.ca
       </A><BR>
    <I>Fri Nov 13 20:10:53 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006350.html">b43-phy0 ERROR: Fatal DMA error: 0x00000400
</A></li>
        <LI>Next message: <A HREF="006330.html">b43-phy0 ERROR: Fatal DMA error: 0x00000400
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6327">[ date ]</a>
              <a href="thread.html#6327">[ thread ]</a>
              <a href="subject.html#6327">[ subject ]</a>
              <a href="author.html#6327">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Michael Buesch wrote:
&gt;<i> Please test the following patch. It changes more stuff related to the
</I>&gt;<i> descriptor ring handling (remove the old patch first before applying this one).
</I>&gt;<i> <A HREF="http://bu3sch.de/patches/wireless-testing/20091113-1834/patches/001-b43-rewrite-dma-ring-alloc.patch">http://bu3sch.de/patches/wireless-testing/20091113-1834/patches/001-b43-rewrite-dma-ring-alloc.patch</A>
</I>&gt;<i> 
</I>
Hi

Here is the result. I provide two outputs because I tried few times ans 
it gave me somehow different results, especially about DMA descriptor.

I hope it helps.

- William


#1 :
[    7.781844] b43-phy0: Broadcom 4312 WLAN found (core revision 15)
[    7.880289] b43-phy0 debug: Found PHY: Analog 6, Type 5, Revision 1
[    7.880314] b43-phy0 debug: Found Radio: Manuf 0x17F, Version 0x2062, 
Revision 2
[    7.958618] phy0: Selected rate control algorithm 'minstrel'
[    7.958980] Registered led device: b43-phy0::tx
[    7.959029] Registered led device: b43-phy0::rx
[    7.959085] Registered led device: b43-phy0::radio
[    7.959430] Broadcom 43xx driver loaded [ Features: PLS, Firmware-ID: 
FW13 ]
...skipped
[   99.380312] b43 ssb0:0: firmware: requesting b43/ucode15.fw
[   99.395617] b43 ssb0:0: firmware: requesting b43/lp0initvals15.fw
[   99.407106] b43 ssb0:0: firmware: requesting b43/lp0bsinitvals15.fw
[   99.552915] b43-phy0: Loading firmware version 410.2160 (2007-05-26 
15:32:10)
[   99.555371] b43-phy0 debug: b2062: Using crystal tab entry 19200 kHz.
[  113.312878] b43-phy0 debug: Chip initialized
[  113.313311] b43-phy0 debug: 64-bit DMA initialized
[  113.313440] b43-phy0 debug: QoS enabled
[  113.353549] b43-phy0 debug: Wireless interface started
[  113.370279] b43-phy0 debug: Adding Interface type 2
[  113.393835] ADDRCONF(NETDEV_UP): wlan0: link is not ready
[  120.430217] b43-phy0 ERROR: Fatal DMA error: 0x00000800, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0x00000000
[  120.430245] b43-phy0: Controller RESET (DMA error) ...
[  120.430276] b43: Dump of last 20 DMA descriptors
[  120.430290] b43: Descr.  0: 0x0 0x930 0x2587F020 0x80000000
[  120.430300] b43: Descr.  1: 0x0 0x930 0x356F3020 0x80000000
[  120.430310] b43: Descr.  2: 0x0 0x930 0x258BB020 0x80000000
[  120.430319] b43: Descr.  3: 0x0 0x930 0x368C1020 0x80000000
[  120.430329] b43: Descr.  4: 0x0 0x930 0x35744020 0x80000000
[  120.430338] b43: Descr.  5: 0x0 0x930 0x258B9020 0x80000000
[  120.430348] b43: Descr.  6: 0x0 0x930 0x35CAA020 0x80000000
[  120.430358] b43: Descr.  7: 0x0 0x930 0x35771020 0x80000000
[  120.430367] b43: Descr.  8: 0x0 0x930 0x259B8020 0x80000000
[  120.430377] b43: Descr.  9: 0x0 0x930 0x259A5020 0x80000000
[  120.430387] b43: Descr. 10: 0x10000000 0x930 0x36980020 0x80000000
[  120.430397] b43: Descr. 11: 0x0 0x930 0x25967020 0x80000000
[  120.430407] b43: Descr. 12: 0x0 0x930 0x25947020 0x80000000
[  120.430416] b43: Descr. 13: 0x0 0x930 0x35489020 0x80000000
[  120.430426] b43: Descr. 14: 0x0 0x930 0x258B3020 0x80000000
[  120.430436] b43: Descr. 15: 0x0 0x930 0x35DB4020 0x80000000
[  120.430445] b43: Descr. 16: 0x0 0x930 0x369CE020 0x80000000
[  120.430455] b43: Descr. 17: 0x0 0x930 0x3788C020 0x80000000
[  120.430465] b43: Descr. 18: 0x0 0x930 0x25966020 0x80000000
[  120.430474] b43: Descr. 19: 0x0 0x930 0x3554E020 0x80000000
[  120.430681] b43-phy0 debug: Wireless interface stopped
[  120.430698] b43-phy0 debug: DMA-64 rx_ring: Used slots 1/64, Failed 
frames 0/0 = 0.0%, Average tries 0.00
[  120.430804] b43-phy0 debug: DMA-64 tx_ring_AC_BK: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  120.442760] b43-phy0 debug: DMA-64 tx_ring_AC_BE: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  120.462595] b43-phy0 debug: DMA-64 tx_ring_AC_VI: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  120.482563] b43-phy0 debug: DMA-64 tx_ring_AC_VO: Used slots 2/256, 
Failed frames 0/11 = 0.0%, Average tries 1.00
[  120.504203] b43-phy0 debug: DMA-64 tx_ring_mcast: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  120.762641] b43-phy0: Loading firmware version 410.2160 (2007-05-26 
15:32:10)
[  120.765121] b43-phy0 debug: b2062: Using crystal tab entry 19200 kHz.
[  134.520328] b43-phy0 debug: Chip initialized
[  134.520668] b43-phy0 debug: 64-bit DMA initialized
[  134.520799] b43-phy0 debug: QoS enabled
[  134.563410] b43-phy0 debug: Wireless interface started
[  134.563424] b43-phy0: Controller restarted
[  134.583034] b43-phy0 ERROR: Fatal DMA error: 0x00000400, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0x00000000



#2 :
[    7.834359] b43-phy0: Broadcom 4312 WLAN found (core revision 15)
[    7.930184] b43-phy0 debug: Found PHY: Analog 6, Type 5, Revision 1
[    7.930211] b43-phy0 debug: Found Radio: Manuf 0x17F, Version 0x2062, 
Revision 2
[    8.016791] phy0: Selected rate control algorithm 'minstrel'
[    8.017151] Registered led device: b43-phy0::tx
[    8.017198] Registered led device: b43-phy0::rx
[    8.017248] Registered led device: b43-phy0::radio
[    8.017611] Broadcom 43xx driver loaded [ Features: PLS, Firmware-ID: 
FW13 ]
... skipped
[  133.030317] b43 ssb0:0: firmware: requesting b43/ucode15.fw
[  133.046222] b43 ssb0:0: firmware: requesting b43/lp0initvals15.fw
[  133.057351] b43 ssb0:0: firmware: requesting b43/lp0bsinitvals15.fw
[  133.210151] b43-phy0: Loading firmware version 410.2160 (2007-05-26 
15:32:10)
[  133.212556] b43-phy0 debug: b2062: Using crystal tab entry 19200 kHz.
[  146.970364] b43-phy0 debug: Chip initialized
[  146.970739] b43-phy0 debug: 64-bit DMA initialized
[  146.970870] b43-phy0 debug: QoS enabled
[  147.013587] b43-phy0 debug: Wireless interface started
[  147.032945] b43-phy0 ERROR: Fatal DMA error: 0x00000400, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0x00000000
[  147.032968] b43-phy0: Controller RESET (DMA error) ...
[  147.032993] b43: Dump of last 20 DMA descriptors
[  147.033003] b43: Descr.  0: 0x10000000 0x930 0x259A1020 0x80000000
[  147.033013] b43: Descr.  1: 0x0 0x930 0x259A0020 0x80000000
[  147.033023] b43: Descr.  2: 0x0 0x930 0x259AF020 0x80000000
[  147.033033] b43: Descr.  3: 0x0 0x930 0x259AE020 0x80000000
[  147.033042] b43: Descr.  4: 0x0 0x930 0x259AD020 0x80000000
[  147.033052] b43: Descr.  5: 0x0 0x930 0x259AC020 0x80000000
[  147.033061] b43: Descr.  6: 0x0 0x930 0x25993020 0x80000000
[  147.033071] b43: Descr.  7: 0x0 0x930 0x25992020 0x80000000
[  147.033080] b43: Descr.  8: 0x0 0x930 0x25991020 0x80000000
[  147.033090] b43: Descr.  9: 0x0 0x930 0x25990020 0x80000000
[  147.033100] b43: Descr. 10: 0x0 0x930 0x3615F020 0x80000000
[  147.033109] b43: Descr. 11: 0x0 0x930 0x3615E020 0x80000000
[  147.033119] b43: Descr. 12: 0x0 0x930 0x3615D020 0x80000000
[  147.033128] b43: Descr. 13: 0x0 0x930 0x3615C020 0x80000000
[  147.033138] b43: Descr. 14: 0x0 0x930 0x36A2F020 0x80000000
[  147.033147] b43: Descr. 15: 0x0 0x930 0x36A2E020 0x80000000
[  147.033157] b43: Descr. 16: 0x0 0x930 0x36A2D020 0x80000000
[  147.033166] b43: Descr. 17: 0x0 0x930 0x36A2C020 0x80000000
[  147.033176] b43: Descr. 18: 0x0 0x930 0x36085020 0x80000000
[  147.033186] b43: Descr. 19: 0x0 0x930 0x36084020 0x80000000
[  147.033202] b43-phy0 ERROR: Fatal DMA error: 0x00000400, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0x00000000
[  147.033223] b43-phy0: Controller RESET (DMA error) ...
[  147.033256] b43-phy0 debug: Adding Interface type 2
[  147.053038] b43-phy0 debug: Wireless interface stopped
[  147.053066] b43-phy0 debug: DMA-64 rx_ring: Used slots 0/64, Failed 
frames 0/0 = 0.0%, Average tries 0.00
[  147.053134] b43-phy0 debug: DMA-64 tx_ring_AC_BK: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  147.070245] b43-phy0 debug: DMA-64 tx_ring_AC_BE: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  147.090102] b43-phy0 debug: DMA-64 tx_ring_AC_VI: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  147.110250] b43-phy0 debug: DMA-64 tx_ring_AC_VO: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  147.130222] b43-phy0 debug: DMA-64 tx_ring_mcast: Used slots 0/256, 
Failed frames 0/0 = 0.0%, Average tries 0.00
[  147.390296] b43-phy0: Loading firmware version 410.2160 (2007-05-26 
15:32:10)
[  147.392763] b43-phy0 debug: b2062: Using crystal tab entry 19200 kHz.
[  161.150373] b43-phy0 debug: Chip initialized
[  161.150707] b43-phy0 debug: 64-bit DMA initialized
[  161.150838] b43-phy0 debug: QoS enabled
[  161.193542] b43-phy0 debug: Wireless interface started
[  161.193692] b43-phy0 ERROR: Fatal DMA error: 0x00000400, 0x00000000, 
0x00000000, 0x00000000, 0x00000000, 0x00000000
[  161.193704] b43-phy0: Controller RESET (DMA error) ...

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006350.html">b43-phy0 ERROR: Fatal DMA error: 0x00000400
</A></li>
	<LI>Next message: <A HREF="006330.html">b43-phy0 ERROR: Fatal DMA error: 0x00000400
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6327">[ date ]</a>
              <a href="thread.html#6327">[ thread ]</a>
              <a href="subject.html#6327">[ subject ]</a>
              <a href="author.html#6327">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
