<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Fatal DMA error problem with netbook and BCM4312
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Fatal%20DMA%20error%20problem%20with%20netbook%20and%20BCM4312&In-Reply-To=%3C4B0C00B5.1000407%40polymtl.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006477.html">
   <LINK REL="Next"  HREF="006480.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fatal DMA error problem with netbook and BCM4312</H1>
    <B>William Bourque</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Fatal%20DMA%20error%20problem%20with%20netbook%20and%20BCM4312&In-Reply-To=%3C4B0C00B5.1000407%40polymtl.ca%3E"
       TITLE="Fatal DMA error problem with netbook and BCM4312">william.bourque at polymtl.ca
       </A><BR>
    <I>Tue Nov 24 16:50:13 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006477.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
        <LI>Next message: <A HREF="006480.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6479">[ date ]</a>
              <a href="thread.html#6479">[ thread ]</a>
              <a href="subject.html#6479">[ subject ]</a>
              <a href="author.html#6479">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Chris Vine wrote:
&gt;<i> On Mon, 23 Nov 2009 22:58:36 -0500
</I>&gt;<i> William Bourque &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">william.bourque at polymtl.ca</A>&gt; wrote:
</I>&gt;&gt;<i> Larry Finger wrote:
</I>&gt;&gt;&gt;<i> One last check. I would appreciate receiving answers to the
</I>&gt;&gt;&gt;<i> following questions. These questions apply to anyone else with this
</I>&gt;&gt;&gt;<i> problem.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Does the pm_qos patch help your &quot;fatal DMA error&quot; problem,
</I>&gt;&gt;&gt;<i> particularly when booted from power-off?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> If you warm-boot after loading the wl driver, does the patch make
</I>&gt;&gt;&gt;<i> any difference?
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Larry
</I>&gt;&gt;<i> Hi
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I run a test case scenario on my notebook to figure out the QOS patch
</I>&gt;&gt;<i> effect on the card reliability.
</I>&gt;&gt;<i> I would say that the results are not very conclusive, but it seems the
</I>&gt;&gt;<i> patch helped slightly, but not very time.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> To explain the methodology, I ran 4 series of test (Cold boot and warm
</I>&gt;&gt;<i> boot, on battery and pluged in) between a patched and unpatched
</I>&gt;&gt;<i> wireless-testing kernel.
</I>&gt;&gt;<i> The time in the sheet is the time between the first line of the load
</I>&gt;&gt;<i> of the firmware (b43 ssb0:0: firmware: requesting b43/ucode15.fw) to
</I>&gt;&gt;<i> the first DMA error (b43-phy0 ERROR: Fatal DMA error: )
</I>&gt;&gt;<i> Three time, the card crashed but not DMA error were printed in the
</I>&gt;&gt;<i> log. In that case, the line about the interface failing (b43-phy0
</I>&gt;&gt;<i> debug: Wireless interface stopped) were used instead.
</I>&gt;&gt;<i> The &quot;time&quot; is taken accordingly to kernel timestamp printed by dmesg.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Note that this test was design to make the card fails quickly. As soon
</I>&gt;&gt;<i> as the card was up, the full kernel tree was transfert over a wireless
</I>&gt;&gt;<i> LAN, as it has been observed before that fast rate transfert were good
</I>&gt;&gt;<i> at crashing DMA. (I tried &quot;ping -f 172.16.0.1&quot; before but the card was
</I>&gt;&gt;<i> still alive after 5 minutes).
</I>&gt;&gt;<i> Technically the following command was run : ifup wlan0 &amp;&amp; scp -r
</I>&gt;&gt;<i> /usr/src/linux 172.16.0.1:~/
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The result seems to show that the patch has no effect on warm-booted
</I>&gt;&gt;<i> system but it seems to make the card slightly more reliable on
</I>&gt;&gt;<i> cold-booted system, with an average time before crashing of 24.07
</I>&gt;&gt;<i> (patched cold boot) vs 22.98 (unpatched coldboot).
</I>&gt;<i> 
</I>&gt;<i> William,
</I>&gt;<i> 
</I>&gt;<i> Out of interest (I am not a b43 developer), was the warm boot a warm
</I>&gt;<i> boot from a kernel with the proprietary wl driver installed, and if so
</I>&gt;<i> does the wl driver work for you?
</I>
I was using the B43 (GPL) driver but with the proprietary firmware
extracted from Broadcom crap with bfwcutter.
The proprietary driver provided by Broadcom (what you refer as wl?)
fails to even detect the card. They clearly hate their customers.

- William


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006477.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
	<LI>Next message: <A HREF="006480.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6479">[ date ]</a>
              <a href="thread.html#6479">[ thread ]</a>
              <a href="subject.html#6479">[ subject ]</a>
              <a href="author.html#6479">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
