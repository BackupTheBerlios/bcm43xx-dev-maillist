<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH RFC] ssb: Generic SPROM override for devices without SPROM
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20RFC%5D%20ssb%3A%20Generic%20SPROM%20override%20for%20devices%20without%20SPROM&In-Reply-To=%3C200911201511.11042.mb%40bu3sch.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006436.html">
   <LINK REL="Next"  HREF="006439.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH RFC] ssb: Generic SPROM override for devices without SPROM</H1>
    <B>Michael Buesch</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20RFC%5D%20ssb%3A%20Generic%20SPROM%20override%20for%20devices%20without%20SPROM&In-Reply-To=%3C200911201511.11042.mb%40bu3sch.de%3E"
       TITLE="[PATCH RFC] ssb: Generic SPROM override for devices without SPROM">mb at bu3sch.de
       </A><BR>
    <I>Fri Nov 20 15:11:09 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006436.html">[PATCH RFC] ssb: Generic SPROM override for devices without SPROM
</A></li>
        <LI>Next message: <A HREF="006439.html">[PATCH RFC] ssb: Generic SPROM override for devices without SPROM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6437">[ date ]</a>
              <a href="thread.html#6437">[ thread ]</a>
              <a href="subject.html#6437">[ subject ]</a>
              <a href="author.html#6437">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Friday 20 November 2009 15:05:39 Larry Finger wrote:
&gt;<i> On 11/20/2009 05:12 AM, Michael Buesch wrote:
</I>&gt;<i> &gt; This patch adds a generic mechanism for overriding the SPROM mechanism
</I>&gt;<i> &gt; on devices without SPROM hardware.
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; There currently is a major problem with this:
</I>&gt;<i> &gt; It tries to deduce a MAC address from various hardware parameters. But
</I>&gt;<i> &gt; currently it will result in the same MAC address for machines of the same
</I>&gt;<i> &gt; type. Does somebody have an idea of some device-instance specific serial
</I>&gt;<i> &gt; number or something similar that could be hashed into the MAC?
</I>&gt;<i> 
</I>&gt;<i> You might look at the &quot;root=&quot; part of /proc/cmdline. Mine says
</I>&gt;<i> &quot;root=/dev/disk/by-id/ata-TOSHIBA_MK2546GSX_18C2P0KCT-part1&quot;. That disk serial
</I>&gt;<i> number would certainly be unique. Even if it just said &quot;root=/dev/sda1&quot;, it
</I>&gt;<i> would be repeatable.
</I>
Ok, I think this is getting ugly :)
The problem with all this is that if you change the harddisk, or change the partitioning,
the wireless mac address would change. That would surely lead to confusion.

I think we probably have to drop this patch and instead do a mechanism that
fetches the sprom from userspace, if the card doesn't have one. This way we
can have a script in userspace that generates the image based on the PCI ID
information and just randomizes the MAC address once. The firmware loading
mechanism would be useful for that.
In case of an embedded device with the MAC in the nvram, the kernel can still
override the mac address provided by userspace.

-- 
Greetings, Michael.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006436.html">[PATCH RFC] ssb: Generic SPROM override for devices without SPROM
</A></li>
	<LI>Next message: <A HREF="006439.html">[PATCH RFC] ssb: Generic SPROM override for devices without SPROM
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6437">[ date ]</a>
              <a href="thread.html#6437">[ thread ]</a>
              <a href="subject.html#6437">[ subject ]</a>
              <a href="author.html#6437">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
