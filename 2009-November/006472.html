<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Fatal DMA error problem with netbook and BCM4312
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Fatal%20DMA%20error%20problem%20with%20netbook%20and%20BCM4312&In-Reply-To=%3C4B0B59EC.2000809%40polymtl.ca%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006460.html">
   <LINK REL="Next"  HREF="006477.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Fatal DMA error problem with netbook and BCM4312</H1>
    <B>William Bourque</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Fatal%20DMA%20error%20problem%20with%20netbook%20and%20BCM4312&In-Reply-To=%3C4B0B59EC.2000809%40polymtl.ca%3E"
       TITLE="Fatal DMA error problem with netbook and BCM4312">william.bourque at polymtl.ca
       </A><BR>
    <I>Tue Nov 24 04:58:36 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006460.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
        <LI>Next message: <A HREF="006477.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6472">[ date ]</a>
              <a href="thread.html#6472">[ thread ]</a>
              <a href="subject.html#6472">[ subject ]</a>
              <a href="author.html#6472">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
Larry Finger wrote:
&gt;<i> One last check. I would appreciate receiving answers to the following questions.
</I>&gt;<i> These questions apply to anyone else with this problem.
</I>&gt;<i> 
</I>&gt;<i> Does the pm_qos patch help your &quot;fatal DMA error&quot; problem, particularly when
</I>&gt;<i> booted from power-off?
</I>&gt;<i> 
</I>&gt;<i> If you warm-boot after loading the wl driver, does the patch make any difference?
</I>&gt;<i> 
</I>&gt;<i> Larry
</I>
Hi

I run a test case scenario on my notebook to figure out the QOS patch
effect on the card reliability.
I would say that the results are not very conclusive, but it seems the
patch helped slightly, but not very time.

To explain the methodology, I ran 4 series of test (Cold boot and warm
boot, on battery and pluged in) between a patched and unpatched
wireless-testing kernel.
The time in the sheet is the time between the first line of the load of
the firmware (b43 ssb0:0: firmware: requesting b43/ucode15.fw) to the
first DMA error (b43-phy0 ERROR: Fatal DMA error: )
Three time, the card crashed but not DMA error were printed in the log.
In that case, the line about the interface failing (b43-phy0 debug:
Wireless interface stopped) were used instead.
The &quot;time&quot; is taken accordingly to kernel timestamp printed by dmesg.

Note that this test was design to make the card fails quickly. As soon
as the card was up, the full kernel tree was transfert over a wireless
LAN, as it has been observed before that fast rate transfert were good
at crashing DMA. (I tried &quot;ping -f 172.16.0.1&quot; before but the card was
still alive after 5 minutes).
Technically the following command was run : ifup wlan0 &amp;&amp; scp -r
/usr/src/linux 172.16.0.1:~/


The result seems to show that the patch has no effect on warm-booted
system but it seems to make the card slightly more reliable on
cold-booted system, with an average time before crashing of 24.07
(patched cold boot) vs 22.98 (unpatched coldboot).

- William
-------------- next part --------------
An embedded and charset-unspecified text was scrubbed...
Name: Test_BCM4312_QOS
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20091123/745f0511/attachment.ksh">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20091123/745f0511/attachment.ksh</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006460.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
	<LI>Next message: <A HREF="006477.html">Fatal DMA error problem with netbook and BCM4312
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6472">[ date ]</a>
              <a href="thread.html#6472">[ thread ]</a>
              <a href="subject.html#6472">[ subject ]</a>
              <a href="author.html#6472">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
