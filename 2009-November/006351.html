<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> PHY Transmission error and radio turned off with b43legacy
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-November/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20PHY%20Transmission%20error%20and%20radio%20turned%20off%20with%20b43legacy&In-Reply-To=%3C4AFEA7E5.7050608%40schmitt-united.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006344.html">
   <LINK REL="Next"  HREF="006362.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>PHY Transmission error and radio turned off with b43legacy</H1>
    <B>Daniel Schmitt</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20PHY%20Transmission%20error%20and%20radio%20turned%20off%20with%20b43legacy&In-Reply-To=%3C4AFEA7E5.7050608%40schmitt-united.de%3E"
       TITLE="PHY Transmission error and radio turned off with b43legacy">daniel at schmitt-united.de
       </A><BR>
    <I>Sat Nov 14 13:51:49 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006344.html">64-bit DMA problems with BCM4312 using b43
</A></li>
        <LI>Next message: <A HREF="006362.html">PHY Transmission error and radio turned off with b43legacy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6351">[ date ]</a>
              <a href="thread.html#6351">[ thread ]</a>
              <a href="subject.html#6351">[ subject ]</a>
              <a href="author.html#6351">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello group,

I managed to get AP with my bcm4306 rev 2 running using b43legacy and hostapd.
I'm using compat-wireless-2009-11-13 with patches from openwrt trunk for my 
b43legacy driver. I use libnl HEAD version und hostapd 0.6.9.

Now I have two issues.

1)
I'm using Miktorik RB/14 4miniPCI =&gt; 1PCI Adapter for driving my bcm4306 in x86 
PC. It always delivers a signal on minipci PIN 13 which powers down the radio. 
About this nothing is posted in dmesg. If I disconnect PIN13 in minipci card, 
the radio is online and I can scan for nets and start ap.
Letting b43legacy_is_hw_radio_enabled() always return 1 in rfkill.c did not help.
Here is my dmesg when I modprobe b43legacy and do &quot;ifconfig wlan0 0.0.0.0 up&quot;:

b43legacy-phy6: Broadcom 4306 WLAN found
b43legacy-phy6 debug: Found PHY: Analog 1, Type 2, Revision 1
b43legacy-phy6 debug: Found Radio: Manuf 0x17F, Version 0x2050, Revision 2
b43legacy-phy6 debug: Radio initialized
b43legacy-phy6 debug: DebugFS (CONFIG_DEBUG_FS) not enabled in kernel config
phy6: Selected rate control algorithm 'minstrel'
Broadcom 43xx-legacy driver loaded [ Features: PLID, Firmware-ID: FW10 ]
b43legacy ssb0:0: firmware: requesting b43legacy/ucode4.fw
b43legacy ssb0:0: firmware: requesting b43legacy/pcm4.fw
b43legacy ssb0:0: firmware: requesting b43legacy/b0g0initvals2.fw
b43legacy-phy6: Loading firmware version 0x127, patch level 14 (2005-04-18 02:36:27)
b43legacy-phy6 debug: Chip initialized
b43legacy-phy6 debug: 30-bit DMA initialized
b43legacy-phy6 debug: Wireless interface started
b43legacy-phy6 debug: Adding Interface type 2

2)
I'm only interested in 802.11b so I allowed only bitrates 1,2,5.5 and 11 in 
hostapd.conf. By using a WLAN client and doing flood pings with 4096 bytes (ping 
-s 4095 -c 1000 -f), I get several PHY transmission errors

b43legacy-phy6 ERROR: PHY transmission error
b43legacy-phy6 ERROR: PHY transmission error
b43legacy-phy6 ERROR: PHY transmission error
b43legacy-phy6 ERROR: PHY transmission error

this message is repeated 100 times. The result of the ping command shows me 
packet loss of about 100 packets.
Is there anything I can do against these transmission errors?

Thanks,
Daniel

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006344.html">64-bit DMA problems with BCM4312 using b43
</A></li>
	<LI>Next message: <A HREF="006362.html">PHY Transmission error and radio turned off with b43legacy
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6351">[ date ]</a>
              <a href="thread.html#6351">[ thread ]</a>
              <a href="subject.html#6351">[ subject ]</a>
              <a href="author.html#6351">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
