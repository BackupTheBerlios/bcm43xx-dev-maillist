<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Improved opensource firmware
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Improved%20opensource%20firmware&In-Reply-To=%3CA0C0B47B-A44C-4364-A2C4-E39D2152632F%40ing.unibs.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005619.html">
   <LINK REL="Next"  HREF="005621.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Improved opensource firmware</H1>
    <B>Francesco Gringoli</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Improved%20opensource%20firmware&In-Reply-To=%3CA0C0B47B-A44C-4364-A2C4-E39D2152632F%40ing.unibs.it%3E"
       TITLE="Improved opensource firmware">francesco.gringoli at ing.unibs.it
       </A><BR>
    <I>Fri Jul 24 11:57:02 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005619.html">Improved opensource firmware
</A></li>
        <LI>Next message: <A HREF="005621.html">Improved opensource firmware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5620">[ date ]</a>
              <a href="thread.html#5620">[ thread ]</a>
              <a href="subject.html#5620">[ subject ]</a>
              <a href="author.html#5620">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 24, 2009, at 11:43 AM, Michael Buesch wrote:

&gt;<i> On Friday 24 July 2009 02:13:38 Francesco Gringoli wrote:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hello Michael,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> yes, you are right. I was referring to something like mov 0x0000,
</I>&gt;&gt;<i> HOST_MEM[random].
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Jokes apart, I really didn't think about this possibility but I
</I>&gt;&gt;<i> believe your idea is correct. I originally thought, reading the  
</I>&gt;&gt;<i> specs,
</I>&gt;&gt;<i> that the dma controller can be configured not only with the base
</I>&gt;&gt;<i> address but also with a &quot;Descriptor Stop Index&quot;, and I thought this
</I>&gt;&gt;<i> was an upper limit to the memory it can use, beyond that the
</I>&gt;&gt;<i> controller would have turned down to the beginning of the ring.
</I>&gt;&gt;<i> Instead I see from the kernel code that there is not such kind of
</I>&gt;&gt;<i> limit, is it right? Is it the kernel responsible of taking down the
</I>&gt;&gt;<i> controller to the first slot when the dma reserved memory is  
</I>&gt;&gt;<i> exhausted
</I>&gt;&gt;<i> (by writing zero in B43_DMA64_RXINDEX)? Sorry for these questions but
</I>&gt;&gt;<i> I'm missing some details.
</I>&gt;<i>
</I>&gt;<i> Well it depends on the architecture to which places the DMA  
</I>&gt;<i> controller can write.
</I>&gt;<i> On i386 it can write pretty much anywhere. On x86_64 it can probably
</I>&gt;<i> only write to mapped areas due to the IOMMU.
</I>&gt;<i>
</I>&gt;<i> The engine is supposed to wrap reading/writing at the descriptor  
</I>&gt;<i> table end marker
</I>&gt;<i> and should stop at the index marker.
</I>As I wrote to Larry I decided to buy that kind of card. When I get it  
I will try to reproduce that problem and catch the bug. Thanks for  
clarifying the DMA.

&gt;&gt;&gt;&gt;<i> I suppose that the issue on pccard32
</I>&gt;&gt;&gt;&gt;<i> hardware is not yet solved.
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Which issue?
</I>&gt;&gt;<i> The one we are talking about, reported by Larry for some pccard32
</I>&gt;&gt;<i> boards where the opensource firmware crashes. We did several testing
</I>&gt;&gt;<i> with a few 4306 pccard32s the first time Larry reported the problem
</I>&gt;&gt;<i> but unfortunately that hardware has different problems and crashes
</I>&gt;&gt;<i> also with the original firmware.
</I>&gt;<i>
</I>&gt;<i> Ok. I'd like to see some oopses with proprietary firmware.
</I>I will have to send you the laptop and the cards (happens with both  
cards I have of that kind) because there is nothing written on  
display, it simply gets freeze. I also tried to enable the debug  
features such as magic system request keys to print something but they  
do not work. However the board is different than the one Larry  
reported the problem and in my case it can be something due to some  
hardware incompatibility.

&gt;&gt;&gt;<i> This crash does _not_ happen with proprietary firmware.
</I>&gt;&gt;&gt;<i> The only way dev-&gt;fw.rev could crash is by dev being NULL.
</I>&gt;&gt;<i> Got it!
</I>&gt;<i>
</I>&gt;<i> Ok, NULL was a typo. I meant &quot;invalid&quot; instead.
</I>&gt;<i>
</I>&gt;<i> --
</I>Cheers,
-Francesco




&quot;INFORMATIVA SUL TRATTAMENTO DEI DATI PERSONALI&quot;

I dati utilizzati per l'invio del presente messaggio sono trattati dall' Universita' degli
studi di Brescia esclusivamente per finalita' istituzionali. Informazioni piu' dettagliate
anche in ordine ai diritti dell'interessato sono riposte nell'informativa generale e nelle
notizie pubblicate sul sito web dell'Ateneo nella sezione &quot;privacy&quot;.

Il contenuto di questo messaggio e' rivolto unicamente alle persone cui e' indirizzato e puo'
contenere informazioni la cui riservatezza e' tutelata legalmente. Ne sono vietati la
riproduzione, la diffusione e l'uso in mancanza di autorizzazione del destinatario.
Qualora il messaggio fosse pervenuto per errore, preghiamo di eliminarlo.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005619.html">Improved opensource firmware
</A></li>
	<LI>Next message: <A HREF="005621.html">Improved opensource firmware
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5620">[ date ]</a>
              <a href="thread.html#5620">[ thread ]</a>
              <a href="subject.html#5620">[ subject ]</a>
              <a href="author.html#5620">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
