<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> DMA queue overflow
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-July/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20DMA%20queue%20overflow&In-Reply-To=%3CF83D6CFD-D5BF-4080-92E7-401281154EA1%40ing.unibs.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005643.html">
   <LINK REL="Next"  HREF="005647.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>DMA queue overflow</H1>
    <B>Francesco Gringoli</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20DMA%20queue%20overflow&In-Reply-To=%3CF83D6CFD-D5BF-4080-92E7-401281154EA1%40ing.unibs.it%3E"
       TITLE="DMA queue overflow">francesco.gringoli at ing.unibs.it
       </A><BR>
    <I>Thu Jul 30 23:54:17 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005643.html">
</A></li>
        <LI>Next message: <A HREF="005647.html">DMA queue overflow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5646">[ date ]</a>
              <a href="thread.html#5646">[ thread ]</a>
              <a href="subject.html#5646">[ subject ]</a>
              <a href="author.html#5646">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>
On Jul 30, 2009, at 9:02 PM, Larry Finger wrote:

&gt;<i> Francesco,
</I>&gt;<i>
</I>&gt;&gt;<i> skb=NULL somehow smells like a double-free caused by a double-report
</I>&gt;&gt;<i> or something like that.
</I>&gt;<i>
</I>&gt;<i> Based on what Michael said about a double-free, I changed from
</I>&gt;<i> &quot;meta-&gt;skb = NULL&quot; to &quot;meta-&gt;skb = 0x0606060606060606&quot;, and changed to
</I>&gt;<i> testing section apropriately. Now I got two messages, then the
</I>&gt;<i> interface hung, probably due to a bogus skb that was not NULL:
</I>&gt;<i>
</I>&gt;<i> b43: meta data: skb              0606060606060606
</I>&gt;<i>                dmaaddr          0000000020a320bc
</I>&gt;<i>                is_last_fragment 1
</I>&gt;<i> b43: ring data: nr_slots       256
</I>&gt;<i>                used_slots     241
</I>&gt;<i>                current_slot   87
</I>&gt;<i>                index          1
</I>&gt;<i>                tx             1
</I>&gt;<i>                max_used_slots 256
</I>&gt;<i> b43: cookie: 0x2062
</I>&gt;<i>     slot:   99
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> b43: meta data: skb              0606060606060606
</I>&gt;<i>                dmaaddr          00000000279220bc
</I>&gt;<i>                is_last_fragment 1
</I>&gt;<i> b43: ring data: nr_slots       256
</I>&gt;<i>                used_slots     252
</I>&gt;<i>                current_slot   147
</I>&gt;<i>                index          1
</I>&gt;<i>                tx             1
</I>&gt;<i>                max_used_slots 256
</I>&gt;<i> b43: cookie: 0x2044
</I>&gt;<i>     slot:   69
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> It certainly looks as if txstatus is called more than once with the
</I>&gt;<i> same cookie.
</I>&gt;<i>
</I>&gt;<i> Larry
</I>Hi Larry,

many thanks. I will surely look into that direction as soon as I get  
the boards. By the way: I never worked with mini-pci-e and I don't  
even have a desktop PC with that bus, so I plan to get some newer  
desktop around in my department and use a pci-e to mini-pci-e adapter.  
Do you know if such adapter can trigger some incompatibility with b43?  
Or is it completely transparent?

Cheers,
-Francesco



&quot;INFORMATIVA SUL TRATTAMENTO DEI DATI PERSONALI&quot;

I dati utilizzati per l'invio del presente messaggio sono trattati dall' Universita' degli
studi di Brescia esclusivamente per finalita' istituzionali. Informazioni piu' dettagliate
anche in ordine ai diritti dell'interessato sono riposte nell'informativa generale e nelle
notizie pubblicate sul sito web dell'Ateneo nella sezione &quot;privacy&quot;.

Il contenuto di questo messaggio e' rivolto unicamente alle persone cui e' indirizzato e puo'
contenere informazioni la cui riservatezza e' tutelata legalmente. Ne sono vietati la
riproduzione, la diffusione e l'uso in mancanza di autorizzazione del destinatario.
Qualora il messaggio fosse pervenuto per errore, preghiamo di eliminarlo.



</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005643.html">
</A></li>
	<LI>Next message: <A HREF="005647.html">DMA queue overflow
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5646">[ date ]</a>
              <a href="thread.html#5646">[ thread ]</a>
              <a href="subject.html#5646">[ subject ]</a>
              <a href="author.html#5646">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
