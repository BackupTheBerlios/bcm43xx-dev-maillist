<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> bcm4306 rev2 kernel segfault and reboot
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20bcm4306%20rev2%20kernel%20segfault%20and%20reboot&In-Reply-To=%3C69e28c910909101421p16d4a358vde48df828145ca43%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006027.html">
   <LINK REL="Next"  HREF="006034.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>bcm4306 rev2 kernel segfault and reboot</H1>
    <B>G&#225;bor Stefanik</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20bcm4306%20rev2%20kernel%20segfault%20and%20reboot&In-Reply-To=%3C69e28c910909101421p16d4a358vde48df828145ca43%40mail.gmail.com%3E"
       TITLE="bcm4306 rev2 kernel segfault and reboot">netrolller.3d at gmail.com
       </A><BR>
    <I>Thu Sep 10 23:21:35 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006027.html">bcm4306 rev2 kernel segfault and reboot
</A></li>
        <LI>Next message: <A HREF="006034.html">bcm4306 rev2 kernel segfault and reboot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6029">[ date ]</a>
              <a href="thread.html#6029">[ thread ]</a>
              <a href="subject.html#6029">[ subject ]</a>
              <a href="author.html#6029">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Thu, Sep 10, 2009 at 8:43 PM, Daniel Schmitt
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">daniel at schmitt-united.de</A>&gt; wrote:
&gt;<i> Hello bcm43xx developers,
</I>&gt;<i>
</I>&gt;<i> I have problems using a bcm4306 rev 2 minipci card. I got the card out of
</I>&gt;<i> Microsoft mn700. I also have 2 atheros cards. They work.
</I>&gt;<i>
</I>&gt;<i> Here is output of
</I>&gt;<i> uname -a: Linux OpenWrt 2.6.28.10 #5 Thu Sep 10 20:36:33 CEST 2009 armv5teb unknown
</I>&gt;<i>
</I>&gt;<i> lspci -vvn|grep 43 -A7:
</I>&gt;<i> 00:02.0 0280: 14e4:4325 (rev 02)
</I>&gt;<i> &#160; &#160; &#160; &#160; Subsystem: 1414:0004
</I>&gt;<i> &#160; &#160; &#160; &#160; Control: I/O- Mem- BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr+
</I>&gt;<i> Stepping- SERR+ FastB2B- DisINTx-
</I>&gt;<i> &#160; &#160; &#160; &#160; Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort-
</I>&gt;<i> &lt;MAbort- &gt;SERR- &lt;PERR- INTx-
</I>&gt;<i> &#160; &#160; &#160; &#160; Interrupt: pin A routed to IRQ 27
</I>&gt;<i> &#160; &#160; &#160; &#160; Region 0: Memory at 48020000 (32-bit, non-prefetchable) [disabled]
</I>&gt;<i> [size=8K]
</I>&gt;<i>
</I>&gt;<i> 00:03.0 0200: 168c:001b (rev 01)
</I>&gt;<i> --
</I>&gt;<i> 00:04.0 0280: 14e4:4325 (rev 02)
</I>&gt;<i> &#160; &#160; &#160; &#160; Subsystem: 1414:0004
</I>&gt;<i> &#160; &#160; &#160; &#160; Control: I/O- Mem- BusMaster- SpecCycle- MemWINV- VGASnoop- ParErr+
</I>&gt;<i> Stepping- SERR+ FastB2B- DisINTx-
</I>&gt;<i> &#160; &#160; &#160; &#160; Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast &gt;TAbort- &lt;TAbort-
</I>&gt;<i> &lt;MAbort- &gt;SERR- &lt;PERR- INTx-
</I>&gt;<i> &#160; &#160; &#160; &#160; Interrupt: pin A routed to IRQ 25
</I>&gt;<i> &#160; &#160; &#160; &#160; Region 0: Memory at 48022000 (32-bit, non-prefetchable) [disabled]
</I>&gt;<i> [size=8K]
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> When I use latest trunk openwrt on my Compes WP188 ipx4xx board with latest
</I>&gt;<i> compat-wireless 2009-09-09 and with the ssb.ko inside the compat-wireless I get
</I>&gt;<i> the following kernel panic:
</I>&gt;<i>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">root at OpenWrt</A>:/lib/modules/2.6.28.10# insmod ssb.ko
</I>&gt;<i> PCI: enabling device 0000:00:02.0 (0140 -&gt; 0142)
</I>&gt;<i> Bad mode in data abort handler detected
</I>&gt;<i> Internal error: Oops - bad mode: 0 [#1]
</I>&gt;<i> Modules linked in: ssb(+)
</I>&gt;<i> CPU: 0 &#160; &#160;Not tainted &#160;(2.6.28.10 #2)
</I>&gt;<i> pc : [&lt;ffff01fc&gt;] &#160; &#160;lr : [&lt;bf002d94&gt;] &#160; &#160;psr: a0000092
</I>&gt;<i> sp : c392bb5c &#160;ip : 00000001 &#160;fp : c392bbcc
</I>&gt;<i> r10: c0230184 &#160;r9 : bf009000 &#160;r8 : 0000ffff
</I>&gt;<i> r7 : c3ad4248 &#160;r6 : c393b000 &#160;r5 : 00000025 &#160;r4 : 00000000
</I>&gt;<i> r3 : c48c9048 &#160;r2 : c392bba4 &#160;r1 : 00000001 &#160;r0 : 90480000
</I>&gt;<i> Flags: NzCv &#160;IRQs off &#160;FIQs on &#160;Mode IRQ_32 &#160;ISA ARM &#160;Segment user
</I>&gt;<i> Control: 000039ff &#160;Table: 03968000 &#160;DAC: 00000015
</I>&gt;<i> Process insmod (pid: 1508, stack limit = 0xc392a260)
</I>&gt;<i> Stack: (0xc392bb5c to 0xc392c000)
</I>&gt;<i> bb40: &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160; &#160;90480000
</I>&gt;<i> bb60: 00000001 c392bba4 c48c9048 00000000 00000025 c393b000 c3ad4248 0000ffff
</I>&gt;<i> bb80: bf009000 c0230184 c392bbcc 00000001 c392bb5c bf002d94 ffff01fc a0000092
</I>&gt;<i> bba0: ffffffff c392bbb0 ffffffb9 c392bbfc c3ad4200 c393b000 c392bbf4 bf0067c0
</I>&gt;<i> bbc0: c392bbf0 c392bbd0 bf002d94 bf002624 c392bbf4 c393b000 c393b31c 00000000
</I>&gt;<i> bbe0: bf002bdc c392bc98 c392bbf4 bf000eb0 bf002be8 00000000 00000000 00000000
</I>&gt;<i> bc00: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
</I>&gt;<i> bc20: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
</I>&gt;<i> bc40: 00000000 00000000 00000000 00000000 00000000 00000000 00000000 00000000
</I>&gt;<i> bc60: 00000000 00000000 00000000 00000000 00000000 c3811400 00000000 c393b000
</I>&gt;<i> bc80: 00000000 c02409cc c0228a60 c392bca8 c392bc9c bf000fd8 bf000ddc c392bcc4
</I>&gt;<i> bca0: c392bcac bf003dfc bf000fb8 bf006634 c3811400 00000000 c392bce4 c392bcc8
</I>&gt;<i> bcc0: c0115d30 bf003d70 c3811458 bf006668 bf006668 c012ef64 c392bd08 c392bce8
</I>&gt;<i> bce0: c012ee60 c0115cd4 c3811458 bf006668 c3811504 c012ef64 c39532a0 c392bd24
</I>&gt;<i> bd00: c392bd0c c012eff0 c012edc4 00000000 c392bd28 bf006668 c392bd4c c392bd28
</I>&gt;<i> bd20: c012e498 c012ef70 c382d598 c38114a0 00000000 bf006668 bf006668 00000000
</I>&gt;<i> bd40: c392bd5c c392bd50 c012ecc8 c012e44c c392bd88 c392bd60 c012e950 c012ecb4
</I>&gt;<i> bd60: bf006328 bf006634 bf006668 bf006668 00000000 c392a000 befe9e98 c392bdac
</I>&gt;<i> bd80: c392bd8c c012f198 c012e8b0 bf006634 00000000 bf006668 00000000 c392a000
</I>&gt;<i> bda0: c392bdc8 c392bdb0 c0115fa4 c012f150 00000000 bf0066a0 00075028 c392bdd8
</I>&gt;<i> bdc0: c392bdcc bf003d10 c0115f64 c392bde8 c392bddc bf009080 bf003ce8 c392bdfc
</I>&gt;<i> bde0: c392bdec bf00905c bf009078 00000000 c392bf80 c392be00 c00212b0 bf00900c
</I>&gt;<i> be00: c0033640 00000000 00000000 c38f5c00 c392be5c c392be20 c017de80 c0033620
</I>&gt;<i> be20: 00000000 00000000 00000001 00000000 00000000 00000010 c3a3ec20 00000004
</I>&gt;<i> be40: 00000000 c02b5700 c022f280 c022f268 c392be80 c392be60 c0067940 c006618c
</I>&gt;<i> be60: 00000000 00000009 c48b9000 00000001 bf0066a0 c392be90 c392be84 c0067a44
</I>&gt;<i> be80: c0067840 c392bea4 c392be94 c3a16ec0 0000000a c48b9000 c392bec4 c392bea8
</I>&gt;<i> bea0: c007b774 c008466c 00000000 00000000 00000000 c392a000 c392bed4 c392bec8
</I>&gt;<i> bec0: c007b844 c007b6e8 c392bf80 c392bed8 c005d188 c007b820 00000000 c392bf50
</I>&gt;<i> bee0: c392bf48 c392bef0 bf0066ac c48bff50 00000000 c48bfca8 c48bfbd0 c3a16ca0
</I>&gt;<i> bf00: c48c0c68 00000016 00000017 0000000d 00000000 000000c0 000000c0 c48c0068
</I>&gt;<i> bf20: c48c0c58 c012e64c c48c0040 c48c0068 bf006338 00000017 00000000 00000000
</I>&gt;<i> bf40: 00000000 00000000 00009980 bf0066a0 00075028 00000000 00009980 bf0066a0
</I>&gt;<i> bf60: 00075028 00000000 c0021f84 c392a000 befe9e98 c392bfa4 c392bf84 c005d4c4
</I>&gt;<i> bf80: c0021284 c00864d8 00009980 00075028 00000002 00000080 00000000 c392bfa8
</I>&gt;<i> bfa0: c0021de0 c005d440 00009980 00075028 00075028 00009980 00075018 00075028
</I>&gt;<i> bfc0: 00009980 00075028 00000002 befe9f63 befe9bec 00000002 befe9e98 0000c8c0
</I>&gt;<i> bfe0: 40051a94 befe8bcc 0001181c 40051aa0 20000010 00075028 00000000 00000000
</I>&gt;<i> Backtrace:
</I>&gt;<i> Function entered at [&lt;bf002618&gt;] from [&lt;bf002d94&gt;]
</I>&gt;<i> Function entered at [&lt;bf002bdc&gt;] from [&lt;bf000eb0&gt;]
</I>&gt;<i> &#160;r8:bf002bdc r7:00000000 r6:c393b31c r5:c393b000 r4:c392bbf4
</I>&gt;<i> Function entered at [&lt;bf000dd0&gt;] from [&lt;bf000fd8&gt;]
</I>&gt;<i> Function entered at [&lt;bf000fac&gt;] from [&lt;bf003dfc&gt;]
</I>&gt;<i> Function entered at [&lt;bf003d64&gt;] from [&lt;c0115d30&gt;]
</I>&gt;<i> &#160;r6:00000000 r5:c3811400 r4:bf006634
</I>&gt;<i> Function entered at [&lt;c0115cc8&gt;] from [&lt;c012ee60&gt;]
</I>&gt;<i> &#160;r7:c012ef64 r6:bf006668 r5:bf006668 r4:c3811458
</I>&gt;<i> Function entered at [&lt;c012edb8&gt;] from [&lt;c012eff0&gt;]
</I>&gt;<i> &#160;r8:c39532a0 r7:c012ef64 r6:c3811504 r5:bf006668 r4:c3811458
</I>&gt;<i> Function entered at [&lt;c012ef64&gt;] from [&lt;c012e498&gt;]
</I>&gt;<i> &#160;r6:bf006668 r5:c392bd28 r4:00000000
</I>&gt;<i> Function entered at [&lt;c012e440&gt;] from [&lt;c012ecc8&gt;]
</I>&gt;<i> &#160;r7:00000000 r6:bf006668 r5:bf006668 r4:00000000
</I>&gt;<i> Function entered at [&lt;c012eca8&gt;] from [&lt;c012e950&gt;]
</I>&gt;<i> Function entered at [&lt;c012e8a4&gt;] from [&lt;c012f198&gt;]
</I>&gt;<i> Function entered at [&lt;c012f144&gt;] from [&lt;c0115fa4&gt;]
</I>&gt;<i> &#160;r8:c392a000 r7:00000000 r6:bf006668 r5:00000000 r4:bf006634
</I>&gt;<i> Function entered at [&lt;c0115f58&gt;] from [&lt;bf003d10&gt;]
</I>&gt;<i> &#160;r6:00075028 r5:bf0066a0 r4:00000000
</I>&gt;<i> Function entered at [&lt;bf003cdc&gt;] from [&lt;bf009080&gt;]
</I>&gt;<i> Function entered at [&lt;bf00906c&gt;] from [&lt;bf00905c&gt;]
</I>&gt;<i> Function entered at [&lt;bf009000&gt;] from [&lt;c00212b0&gt;]
</I>&gt;<i> &#160;r4:00000000
</I>&gt;<i> Function entered at [&lt;c0021278&gt;] from [&lt;c005d4c4&gt;]
</I>&gt;<i> Function entered at [&lt;c005d434&gt;] from [&lt;c0021de0&gt;]
</I>&gt;<i> &#160;r7:00000080 r6:00000002 r5:00075028 r4:00009980
</I>&gt;<i> Code: 00000000 00000000 00000000 00000000 (00000000)
</I>&gt;<i> ---[ end trace 9e4f8312b96f9129 ]---
</I>&gt;<i> Segmentation fault
</I>
Please enable CONFIG_KALLSYMS. This trace is useless without symbol information.

&gt;<i>
</I>&gt;<i> using b43legacy out of this release with ssb.ko from kernel 2.6.28.10 results in
</I>&gt;<i> the following:
</I>&gt;<i> PCI: enabling device 0000:00:02.0 (0140 -&gt; 0142)
</I>&gt;<i> ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x02, vendor 0x4243)
</I>&gt;<i> ssb: Core 1 found: IEEE 802.11 (cc 0x812, rev 0x04, vendor 0x4243)
</I>&gt;<i> ssb: Core 2 found: PCMCIA (cc 0x80D, rev 0x01, vendor 0x4243)
</I>&gt;<i> ssb: Core 3 found: V90 (cc 0x807, rev 0x01, vendor 0x4243)
</I>&gt;<i> ssb: Core 4 found: PCI (cc 0x804, rev 0x07, vendor 0x4243)
</I>&gt;<i> ssb: Core 5 found: IEEE 802.11 (cc 0x812, rev 0x04, vendor 0x4243)
</I>&gt;<i> ssb: Ignoring additional 802.11 core
</I>&gt;<i> ssb: WARNING: Invalid SPROM CRC (corrupt SPROM)
</I>&gt;<i> ssb: SPROM revision 251 detected.
</I>&gt;<i> ssb: Unsupported SPROM revision 251 detected. Will extract v1
</I>&gt;<i> ssb: Sonics Silicon Backplane found on PCI device 0000:00:02.0
</I>&gt;<i> PCI: enabling device 0000:00:04.0 (0140 -&gt; 0142)
</I>&gt;<i> ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x02, vendor 0x4243)
</I>&gt;<i> ssb: Core 1 found: IEEE 802.11 (cc 0x812, rev 0x04, vendor 0x4243)
</I>&gt;<i> ssb: Core 2 found: PCMCIA (cc 0x80D, rev 0x01, vendor 0x4243)
</I>&gt;<i> ssb: Core 3 found: V90 (cc 0x807, rev 0x01, vendor 0x4243)
</I>&gt;<i> ssb: Core 4 found: PCI (cc 0x804, rev 0x07, vendor 0x4243)
</I>&gt;<i> ssb: Core 5 found: IEEE 802.11 (cc 0x812, rev 0x04, vendor 0x4243)
</I>&gt;<i> ssb: Ignoring additional 802.11 core
</I>&gt;<i> ssb: WARNING: Invalid SPROM CRC (corrupt SPROM)
</I>&gt;<i> ssb: SPROM revision 251 detected.
</I>&gt;<i> ssb: Unsupported SPROM revision 251 detected. Will extract v1
</I>&gt;<i> ssb: Sonics Silicon Backplane found on PCI device 0000:00:04.0
</I>&gt;<i> cfg80211: Using static regulatory domain info
</I>&gt;<i> cfg80211: Regulatory domain: US
</I>&gt;<i> &#160; &#160; &#160; &#160; (start_freq - end_freq @ bandwidth), (max_antenna_gain, max_eirp)
</I>&gt;<i> &#160; &#160; &#160; &#160; (2402000 KHz - 2472000 KHz @ 40000 KHz), (600 mBi, 2700 mBm)
</I>&gt;<i> &#160; &#160; &#160; &#160; (5170000 KHz - 5190000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
</I>&gt;<i> &#160; &#160; &#160; &#160; (5190000 KHz - 5210000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
</I>&gt;<i> &#160; &#160; &#160; &#160; (5210000 KHz - 5230000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
</I>&gt;<i> &#160; &#160; &#160; &#160; (5230000 KHz - 5330000 KHz @ 40000 KHz), (600 mBi, 2300 mBm)
</I>&gt;<i> &#160; &#160; &#160; &#160; (5735000 KHz - 5835000 KHz @ 40000 KHz), (600 mBi, 3000 mBm)
</I>&gt;<i> cfg80211: Calling CRDA for country: US
</I>&gt;<i> b43legacy-phy0: Broadcom 4306 WLAN found
</I>&gt;<i> phy0: Failed to initialize wep: -2
</I>&gt;<i> b43legacy: probe of ssb0:0 failed with error -2
</I>&gt;<i> b43legacy-phy1: Broadcom 4306 WLAN found
</I>&gt;<i> phy1: Failed to initialize wep: -2
</I>&gt;<i> b43legacy: probe of ssb1:0 failed with error -2
</I>&gt;<i> Broadcom 43xx-legacy driver loaded [ Features: PLID, Firmware-ID: FW10 ]
</I>&gt;<i>
</I>&gt;<i> Only if I use ssb.ko from kernel and b43legacy from compat-wireless 2009-08-15 I
</I>&gt;<i> managed one time to get wlan0 and wlan1 device.
</I>&gt;<i> But then they don't have a valid MAC address.
</I>&gt;<i> If I set if manually I get wlan0 running. Even in master mode. But if I want to
</I>&gt;<i> get up wlan1 the same way, machine reboots.
</I>&gt;<i>
</I>&gt;<i> What's up with my broadcom cards?
</I>&gt;<i>
</I>&gt;<i> Thanks for your help,
</I>&gt;<i> Daniel
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Bcm43xx-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;<i>
</I>


-- 
Vista: [V]iruses, [I]ntruders, [S]pyware, [T]rojans and [A]dware. :-)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006027.html">bcm4306 rev2 kernel segfault and reboot
</A></li>
	<LI>Next message: <A HREF="006034.html">bcm4306 rev2 kernel segfault and reboot
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6029">[ date ]</a>
              <a href="thread.html#6029">[ thread ]</a>
              <a href="subject.html#6029">[ subject ]</a>
              <a href="author.html#6029">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
