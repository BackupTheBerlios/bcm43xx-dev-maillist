<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> A problem loading ssb module
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-September/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20A%20problem%20loading%20ssb%20module&In-Reply-To=%3C43e72e890909281255n1cca5b84q871365259077a1bc%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006122.html">
   <LINK REL="Next"  HREF="006126.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>A problem loading ssb module</H1>
    <B>Luis R. Rodriguez</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20A%20problem%20loading%20ssb%20module&In-Reply-To=%3C43e72e890909281255n1cca5b84q871365259077a1bc%40mail.gmail.com%3E"
       TITLE="A problem loading ssb module">lrodriguez at atheros.com
       </A><BR>
    <I>Mon Sep 28 21:55:09 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006122.html">A problem loading ssb module
</A></li>
        <LI>Next message: <A HREF="006126.html">b43 LP PHY status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6125">[ date ]</a>
              <a href="thread.html#6125">[ thread ]</a>
              <a href="subject.html#6125">[ subject ]</a>
              <a href="author.html#6125">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Sun, Sep 27, 2009 at 2:02 PM, Luis R. Rodriguez
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">mcgrof at bombadil.infradead.org</A>&gt; wrote:
&gt;<i> On Sun, Sep 27, 2009 at 12:50:19PM -0700, Luis R. Rodriguez wrote:
</I>&gt;&gt;<i> On Sun, Sep 27, 2009 at 8:15 AM, Clyde McPherson &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">ccmcphe at verizon.net</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt;&gt; On Thu, Sep 24, 2009 at 11:33 AM, Hauke Mehrtens &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">hauke at hauke-m.de</A>&gt; wrote:
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; Bryan Wu wrote:
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt; Mauro Di Domenico wrote:
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; Hi,
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; I'm testing new b43 modules for my 14e4:4315 broadcom card.
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; I've compiled and installed compat-wireless-2009-09-16 in a debian
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; machine with kernel version 2.6.30-6.
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; During the boot I experience this problem:
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; $ dmesg|egrep &quot;b43|ssb&quot;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;2.384463] b43-pci-bridge 0000:06:00.0: PCI INT A -&gt; GSI 17 (level,
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; low) -&gt; IRQ 17
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;2.384477] b43-pci-bridge 0000:06:00.0: setting latency timer to 64
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;2.544344] ssb: Sonics Silicon Backplane found on PCI device
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; 0000:06:00.0
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;6.968981] b43: disagrees about version of symbol
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; ssb_device_is_enabled
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;6.968986] b43: Unknown symbol ssb_device_is_enabled
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;6.969280] b43: Unknown symbol ssb_pmu_set_ldo_paref
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;6.969407] b43: disagrees about version of symbol
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; ssb_pcicore_dev_irqvecs_enable
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; [ &#160; &#160;6.969410] b43: Unknown symbol ssb_pcicore_dev_irqvecs_enable
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; .....
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; ....
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt; ...
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt; I faced the exactly same issue as Mauro did. +1 from me, but currently
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt; have
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt; no time to take a deeper look.
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt; Thanks
</I>&gt;&gt;<i> &gt;&gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; Hi,
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; I had the same problem with the ssb module and compat-wireless in ubuntu
</I>&gt;&gt;<i> &gt;&gt;&gt; 9.04. The problem is that the ssb module is integrated into the
</I>&gt;&gt;<i> &gt;&gt;&gt; initramfs image. The version out of the initramfs image is loaded on
</I>&gt;&gt;<i> &gt;&gt;&gt; startup and not the version of compat-wireless. Running &quot;sudo
</I>&gt;&gt;<i> &gt;&gt;&gt; update-initramfs -u&quot; after installing compat-wireless and restaing the
</I>&gt;&gt;<i> &gt;&gt;&gt; system fixes the problem for me. Either Debian/Ubuntu should remove ssb
</I>&gt;&gt;<i> &gt;&gt;&gt; form default initramfs image or compat-wireless should update the image
</I>&gt;&gt;<i> &gt;&gt;&gt; with the install command. At least the compat-wireless documentation
</I>&gt;&gt;<i> &gt;&gt;&gt; needs an update.
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; Hauke
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;&gt; (adding Luis and linux-wireless list)
</I>&gt;&gt;<i> &gt;&gt;&gt;
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; Tim, do you guys update the initramfs upon installation of lbm? If a
</I>&gt;&gt;<i> &gt;&gt; user does not use lbm and uses compat-wireless I suppose we need to do
</I>&gt;&gt;<i> &gt;&gt; something similar.
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;&gt; &#160;Luis
</I>&gt;&gt;<i> &gt;&gt; _______________________________________________
</I>&gt;&gt;<i> &gt;&gt; Bcm43xx-dev mailing list
</I>&gt;&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> &gt;&gt; <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;&gt;<i> &gt;&gt;
</I>&gt;&gt;<i> &gt;
</I>&gt;&gt;<i> &gt; All:
</I>&gt;&gt;<i> &gt; I have a large group that uses the ssb module along with the Broadcom 4318,
</I>&gt;&gt;<i> &gt; in a CF form factor. If the CF card is inserted before boot, and the ssb
</I>&gt;&gt;<i> &gt; module is not in the initrd process, the laptops lock up and do not become
</I>&gt;&gt;<i> &gt; operational. The solution to this problem is/was adding the ssb.ko to the
</I>&gt;&gt;<i> &gt; initrd process. So I agree with Luis on this, the ssb module will have to be
</I>&gt;&gt;<i> &gt; added/updated to the initrd process. As for PCI operations, I don't know,
</I>&gt;&gt;<i> &gt; but for PCMCIA operations ssb.ko has to be added and/or updated. Anytime I
</I>&gt;&gt;<i> &gt; am testing new releases of b43, I run &quot;update-initramfs -u&quot; to update the
</I>&gt;&gt;<i> &gt; ssb module. (Sometimes you can do a rmmod ssb and rmmod b43, and then
</I>&gt;&gt;<i> &gt; modprobe them back in. - This saves a reboot)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But why is ssb, b43, b44 needed upon early boot?
</I>&gt;<i>
</I>&gt;<i> OK the reason seems to be netboot. Yeah the only fix for distros who want
</I>&gt;<i> this on the initramfs is to update it after a compat-wireless package is
</I>&gt;<i> installed. I suppose we can add a hook to compat-wireless for each distro.
</I>&gt;<i> I'm only familiar with Ubuntu way of doing this so if people are interested
</I>&gt;<i> in other distros you'll need to point/test how to do this on there.
</I>&gt;<i>
</I>&gt;<i> Please try this patch against compat-wireless: (also attached)
</I>&gt;<i>
</I>&gt;<i> From 99af88246c2de71aa799de2b63f9d9ccac41634f Mon Sep 17 00:00:00 2001
</I>&gt;<i> From: Luis R. Rodriguez &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">lrodriguez at atheros.com</A>&gt;
</I>&gt;<i> Date: Sun, 27 Sep 2009 13:58:22 -0700
</I>&gt;<i> Subject: [PATCH] Add scripts/update-initramfs and use it
</I>&gt;<i>
</I>&gt;<i> Some distributions may ship b44 and ssb on the initramfs for
</I>&gt;<i> netboot. To help with this we need to update the initrafms
</I>&gt;<i> for those distributions.
</I>&gt;<i>
</I>&gt;<i> Signed-off-by: Luis R. Rodriguez &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">lrodriguez at atheros.com</A>&gt;
</I>
I didn't see much feedback but I'm going to merge this in so that it
gets out with the 2.6.32-rc1 stable compat-wireless release.

  Luis

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006122.html">A problem loading ssb module
</A></li>
	<LI>Next message: <A HREF="006126.html">b43 LP PHY status
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6125">[ date ]</a>
              <a href="thread.html#6125">[ thread ]</a>
              <a href="subject.html#6125">[ subject ]</a>
              <a href="author.html#6125">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
