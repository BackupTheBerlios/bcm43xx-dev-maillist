<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> BCM4308 rev 3 owner,	willing to help (want to make an access point)
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4308%20rev%203%20owner%2C%0A%09willing%20to%20help%20%28want%20to%20make%20an%20access%20point%29&In-Reply-To=%3Cac542ca00804301801w6d637a34t979faef9214c6ed5%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   
   <LINK REL="Next"  HREF="004008.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>BCM4308 rev 3 owner,	willing to help (want to make an access point)</H1>
    <B>Francis Galiegue</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4308%20rev%203%20owner%2C%0A%09willing%20to%20help%20%28want%20to%20make%20an%20access%20point%29&In-Reply-To=%3Cac542ca00804301801w6d637a34t979faef9214c6ed5%40mail.gmail.com%3E"
       TITLE="BCM4308 rev 3 owner,	willing to help (want to make an access point)">fgaliegue at gmail.com
       </A><BR>
    <I>Thu May  1 03:01:55 CEST 2008</I>
    <P><UL>
        
        <LI>Next message: <A HREF="004008.html">BCM4308 rev 3 owner, willing to help (want to make an access	point)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4007">[ date ]</a>
              <a href="thread.html#4007">[ thread ]</a>
              <a href="subject.html#4007">[ subject ]</a>
              <a href="author.html#4007">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>&gt;<i>
</I>&gt;<i> &gt;
</I>&gt;<i>  &gt; No, &quot;you only need *-allow-ap-vlan-modes.patch for current hostapd git&quot;, as
</I>&gt;<i>  &gt; SERIES says. I think that would be
</I>&gt;<i>  &gt; <A HREF="http://johannes.sipsolutions.net/patches/kernel/all/LATEST/026-allow-ap-vlan-modes.patch.">http://johannes.sipsolutions.net/patches/kernel/all/LATEST/026-allow-ap-vlan-modes.patch.</A>
</I>&gt;<i>  &gt;
</I>&gt;<i>
</I>&gt;<i>  OK, it's starting to get a little more clear now.
</I>&gt;<i>
</I>&gt;<i>  I've git-pulled the whole wireless-testing, applied this patch and am
</I>&gt;<i>  right now in the process of compiling the kernel.
</I>&gt;<i>
</I>&gt;<i>  After this, time for hostapd...
</I>&gt;<i>
</I>
With the following patch applied, plus libnl 1.1, and git hostapd...

unencrypted AP --&gt; success;
WAP --&gt; segfault

A quick strace shows that the segfault appears some time after
receiving a message from the netlink socket.

More strange though: in case the wlan interface is within a bridge
interface (knowing that the &quot;primary&quot; interface of the bridge is not
the wlan interface itself, but another Ethernet card on the same
machine), the segfault does NOT occur. Instead, I get this ad vitam
aeternam in hostapd's stdout output:

----
209603485.139742: Failed to set CTS protect in kernel driver
1209603485.139869: Failed to set Short Slot Time option in kernel driver
1209603485.139909: Could not set preamble for kernel driver
1209603485.478903: wlan0: STA 00:15:00:35:12:e0 IEEE 802.11: authenticated
1209603485.480120: Failed to set CTS protect in kernel driver
1209603485.480169: Failed to set Short Slot Time option in kernel driver
1209603485.480328: Could not set preamble for kernel driver
1209603485.482510: wlan0: STA 00:15:00:35:12:e0 IEEE 802.11:
associated (aid 1, accounting session 48191554-00000009)
Could not set station 00:15:00:35:12:e0 flags for kernel driver (errno=22).
Could not set station 00:15:00:35:12:e0 flags for kernel driver (errno=22).
1209603488.491854: wlan0: STA 00:15:00:35:12:e0 IEEE 802.11:
deauthenticated due to local deauth request
[then loop back to the first message after barely a second]
----

-- 
Francis Galiegue, <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">fgaliegue at gmail.com</A>
&quot;It seems obvious [...] that at least some 'business intelligence'
tools invest so much intelligence on the business side that they have
nothing left for generating SQL queries&quot; (St&#233;phane Faroult, in &quot;The
Art of SQL&quot;, ISBN 0-596-00894-5)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	
	<LI>Next message: <A HREF="004008.html">BCM4308 rev 3 owner, willing to help (want to make an access	point)
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4007">[ date ]</a>
              <a href="thread.html#4007">[ thread ]</a>
              <a href="subject.html#4007">[ subject ]</a>
              <a href="author.html#4007">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
