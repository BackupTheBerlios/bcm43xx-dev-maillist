<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Monitor-while-operating bug in b43: WEP-encrypted packets are	received in decrypted form on the monitor interface
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-May/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Monitor-while-operating%20bug%20in%20b43%3A%20WEP-encrypted%20packets%20are%0A%09received%20in%20decrypted%20form%20on%20the%20monitor%20interface&In-Reply-To=%3C69e28c910805220349u31c32dablef6c55b284643739%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004132.html">
   <LINK REL="Next"  HREF="004134.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Monitor-while-operating bug in b43: WEP-encrypted packets are	received in decrypted form on the monitor interface</H1>
    <B>Stefanik G&#225;bor</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Monitor-while-operating%20bug%20in%20b43%3A%20WEP-encrypted%20packets%20are%0A%09received%20in%20decrypted%20form%20on%20the%20monitor%20interface&In-Reply-To=%3C69e28c910805220349u31c32dablef6c55b284643739%40mail.gmail.com%3E"
       TITLE="Monitor-while-operating bug in b43: WEP-encrypted packets are	received in decrypted form on the monitor interface">netrolller.3d at gmail.com
       </A><BR>
    <I>Thu May 22 12:49:46 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004132.html">&quot;no scan results&quot; BCM94311MCG
</A></li>
        <LI>Next message: <A HREF="004134.html">[PATCH] b43: Fix controller restart crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4133">[ date ]</a>
              <a href="thread.html#4133">[ thread ]</a>
              <a href="subject.html#4133">[ subject ]</a>
              <a href="author.html#4133">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

1. I don't know if MACTIME gets set or not. How do I check that?
2. ACKs and beacons are received perfectly, yes. Not sure about
RTS/CTS, although I do remember seeing RTS packets in a pcap file I
made with the card.
3. The locally-sent packets arrive back correctly, both those that
have been generated by the system on wlan0, and those that are
injected through Radiotap.

Also, disabling HW crypto fixes the problem.

My proposal: We should automatically disable HW crypto when the card
is operating in multiple-interfaces mode, or if there is a monitor
interface present.

Sincerely,
G&#225;bor Stefanik

P.S. Please CC the b43 development mailing list next time.


On Thu, May 22, 2008 at 8:28 AM, Christian Hoene
&lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">christian.hoene at gmx.net</A>&gt; wrote:
&gt;<i> Hello Stefanik G&#225;bor,
</I>&gt;<i>
</I>&gt;<i> I have some question regarding the monitor-while-operating mode.
</I>&gt;<i> 1 Do you know whether the MACTIME stamp is set for normal packets?
</I>&gt;<i> 2 Do you received the ACK and RTS/CTS packets, too?
</I>&gt;<i> 3 Do you receive in the monitor interface also locally sent packets?
</I>&gt;<i>
</I>&gt;<i> Thank you very much for your help.
</I>&gt;<i>
</I>&gt;<i>  With best regards,
</I>&gt;<i>
</I>&gt;<i>  Christian Hoene
</I>&gt;<i>
</I>&gt;&gt;<i> -----Original Message-----
</I>&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev-bounces at lists.berlios.de</A> [mailto:bcm43xx-dev-
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bounces at lists.berlios.de</A>] On Behalf Of Stefanik G&#225;bor
</I>&gt;&gt;<i> Sent: Tuesday, May 20, 2008 6:25 PM
</I>&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> Subject: Monitor-while-operating bug in b43: WEP-encrypted packets are
</I>&gt;&gt;<i> received in decrypted form on the monitor interface
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> One day I was testing monitor-while-operating, with &quot;wlan0&quot; as the
</I>&gt;&gt;<i> managed interface and &quot;rtap0&quot; as the monitor one, and found an
</I>&gt;&gt;<i> interesting bug: when I am associated with an AP on wlan0, and try to
</I>&gt;&gt;<i> receive the same AP's packets through the monitor interface, the
</I>&gt;&gt;<i> packets arrive in decrypted form, but with the WEP bit still set. This
</I>&gt;&gt;<i> appears to be a HW-crypto-related bug, though I haven't tested with HW
</I>&gt;&gt;<i> crypto off. What can cause such a bug?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks,
</I>&gt;&gt;<i> G&#225;bor
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --
</I>&gt;&gt;<i> Vista: [V]iruses, [I]ntruders, [S]pyware, [T]rojans and [A]dware. :-)
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Bcm43xx-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;<i>
</I>&gt;<i>
</I>


-- 
Vista: [V]iruses, [I]ntruders, [S]pyware, [T]rojans and [A]dware. :-)

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004132.html">&quot;no scan results&quot; BCM94311MCG
</A></li>
	<LI>Next message: <A HREF="004134.html">[PATCH] b43: Fix controller restart crash
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4133">[ date ]</a>
              <a href="thread.html#4133">[ thread ]</a>
              <a href="subject.html#4133">[ subject ]</a>
              <a href="author.html#4133">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
