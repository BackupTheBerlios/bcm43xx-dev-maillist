<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> driver dis-associates on laptop lid close
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20driver%20dis-associates%20on%20laptop%20lid%20close&In-Reply-To=%3C46DCD17A.6060607%40foo-lounge.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002290.html">
   <LINK REL="Next"  HREF="002287.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>driver dis-associates on laptop lid close</H1>
    <B>Timo Reimann</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20driver%20dis-associates%20on%20laptop%20lid%20close&In-Reply-To=%3C46DCD17A.6060607%40foo-lounge.de%3E"
       TITLE="driver dis-associates on laptop lid close">mailinglist at foo-lounge.de
       </A><BR>
    <I>Tue Sep  4 05:31:06 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002290.html">Hardware problem sb_id_hi is 0xffffffff
</A></li>
        <LI>Next message: <A HREF="002287.html">driver dis-associates on laptop lid close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2286">[ date ]</a>
              <a href="thread.html#2286">[ thread ]</a>
              <a href="subject.html#2286">[ subject ]</a>
              <a href="author.html#2286">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi all,

I'm having the following issue with a Broadcom 4306 802.11b/g mini-PCI
card running under Ubuntu Feisty (7.04) kernel 2.6.20 and 2.6.22 with
the bcm43xx driver on an IBM Thinkpad T40.

Whenever I close my laptop's lid, the wifi interface seems to stop
working as I can tell by trying to ping the machine remotely: It works
right before I close the lid, stops when it's shut, and *mostly* works
again if I re-open. Same thing with any other network service, e.g. ssh.

The *mostly*-part is what is giving me headaches. Although iwconfig
shows that the association to my AP is never dropped and the interface
is still configured in terms of IP address, netmask and such, every now
and then I cannot connect to either LAN or WAN machines, and all I can
do in such a case is re-load the driver and restart the interface. Apart
from that, I'd prefer my laptop to stay connected even when the lid is
closed.

I have two reasons why I suspect the Broadcom driver to be responsible:
First, I have tried my best to make sure no other mechanism may be
blamed for the observed behavior, including disabling ACPI/APM/APIC on
bootup; disabling acpid; making sure no hiberating/suspending takes
place; and checking the BIOS power management settings.

Second, I used to use ndiswrapper for this machine but choose to switch
to the bcm43xx driver since the first would not reliably connect my box
during start-up. If it did connect, however, the link would never fail
during lid closure (while not changing anything else, i.e. same network
configuration tools were used during, before, and after the switch).

Therefore, I'd be glad if anyone has a hint what else I could try to fix
this problem. Especially, I'm curious if any of the bcm43xx module
parameters deal with some power management/suspend control part I could
tweak. (I wasn't able to figure what every `modinfo'-listed argument means.)

Thanks for any help. If I forgot some vital piece of information, please
don't hesitate to ask.


Cheers,

--Timo

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002290.html">Hardware problem sb_id_hi is 0xffffffff
</A></li>
	<LI>Next message: <A HREF="002287.html">driver dis-associates on laptop lid close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2286">[ date ]</a>
              <a href="thread.html#2286">[ thread ]</a>
              <a href="subject.html#2286">[ subject ]</a>
              <a href="author.html#2286">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
