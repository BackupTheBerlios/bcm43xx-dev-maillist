<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> driver dis-associates on laptop lid close
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20driver%20dis-associates%20on%20laptop%20lid%20close&In-Reply-To=%3C46DCDC3D.20800%40Wetwork.Net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002286.html">
   <LINK REL="Next"  HREF="002288.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>driver dis-associates on laptop lid close</H1>
    <B>Ehud Gavron</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20driver%20dis-associates%20on%20laptop%20lid%20close&In-Reply-To=%3C46DCDC3D.20800%40Wetwork.Net%3E"
       TITLE="driver dis-associates on laptop lid close">gavron at Wetwork.Net
       </A><BR>
    <I>Tue Sep  4 06:17:01 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002286.html">driver dis-associates on laptop lid close
</A></li>
        <LI>Next message: <A HREF="002288.html">driver dis-associates on laptop lid close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2287">[ date ]</a>
              <a href="thread.html#2287">[ thread ]</a>
              <a href="subject.html#2287">[ subject ]</a>
              <a href="author.html#2287">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>iwconfig shows the last AP associated, even if there is no association.
You can easily test this... associate, ping, then
iwconfig INTFCNAME essid &quot;this does not exist&quot;
iwconfig

You'll see the AP MAC address is still there.

What looks like is your power mode is set to suspend on lid close.  If 
you fix that you'll find your problem goes away.

In gnome on F7 I go to system-&gt;preferences-&gt;system-&gt;power management and 
change what lid-closed behavior is.

Ehud

Timo Reimann wrote:
&gt;<i> Hi all,
</I>&gt;<i>
</I>&gt;<i> I'm having the following issue with a Broadcom 4306 802.11b/g mini-PCI
</I>&gt;<i> card running under Ubuntu Feisty (7.04) kernel 2.6.20 and 2.6.22 with
</I>&gt;<i> the bcm43xx driver on an IBM Thinkpad T40.
</I>&gt;<i>
</I>&gt;<i> Whenever I close my laptop's lid, the wifi interface seems to stop
</I>&gt;<i> working as I can tell by trying to ping the machine remotely: It works
</I>&gt;<i> right before I close the lid, stops when it's shut, and *mostly* works
</I>&gt;<i> again if I re-open. Same thing with any other network service, e.g. ssh.
</I>&gt;<i>
</I>&gt;<i> The *mostly*-part is what is giving me headaches. Although iwconfig
</I>&gt;<i> shows that the association to my AP is never dropped and the interface
</I>&gt;<i> is still configured in terms of IP address, netmask and such, every now
</I>&gt;<i> and then I cannot connect to either LAN or WAN machines, and all I can
</I>&gt;<i> do in such a case is re-load the driver and restart the interface. Apart
</I>&gt;<i> from that, I'd prefer my laptop to stay connected even when the lid is
</I>&gt;<i> closed.
</I>&gt;<i>
</I>&gt;<i> I have two reasons why I suspect the Broadcom driver to be responsible:
</I>&gt;<i> First, I have tried my best to make sure no other mechanism may be
</I>&gt;<i> blamed for the observed behavior, including disabling ACPI/APM/APIC on
</I>&gt;<i> bootup; disabling acpid; making sure no hiberating/suspending takes
</I>&gt;<i> place; and checking the BIOS power management settings.
</I>&gt;<i>
</I>&gt;<i> Second, I used to use ndiswrapper for this machine but choose to switch
</I>&gt;<i> to the bcm43xx driver since the first would not reliably connect my box
</I>&gt;<i> during start-up. If it did connect, however, the link would never fail
</I>&gt;<i> during lid closure (while not changing anything else, i.e. same network
</I>&gt;<i> configuration tools were used during, before, and after the switch).
</I>&gt;<i>
</I>&gt;<i> Therefore, I'd be glad if anyone has a hint what else I could try to fix
</I>&gt;<i> this problem. Especially, I'm curious if any of the bcm43xx module
</I>&gt;<i> parameters deal with some power management/suspend control part I could
</I>&gt;<i> tweak. (I wasn't able to figure what every `modinfo'-listed argument means.)
</I>&gt;<i>
</I>&gt;<i> Thanks for any help. If I forgot some vital piece of information, please
</I>&gt;<i> don't hesitate to ask.
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Cheers,
</I>&gt;<i>
</I>&gt;<i> --Timo
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Bcm43xx-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;<i>   
</I>-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3283 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070903/352f310f/attachment.bin">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070903/352f310f/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002286.html">driver dis-associates on laptop lid close
</A></li>
	<LI>Next message: <A HREF="002288.html">driver dis-associates on laptop lid close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2287">[ date ]</a>
              <a href="thread.html#2287">[ thread ]</a>
              <a href="subject.html#2287">[ subject ]</a>
              <a href="author.html#2287">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
