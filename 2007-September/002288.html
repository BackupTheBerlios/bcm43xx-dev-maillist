<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> driver dis-associates on laptop lid close
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-September/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20driver%20dis-associates%20on%20laptop%20lid%20close&In-Reply-To=%3C46DD3C7B.6030201%40foo-lounge.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002287.html">
   <LINK REL="Next"  HREF="002296.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>driver dis-associates on laptop lid close</H1>
    <B>Timo Reimann</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20driver%20dis-associates%20on%20laptop%20lid%20close&In-Reply-To=%3C46DD3C7B.6030201%40foo-lounge.de%3E"
       TITLE="driver dis-associates on laptop lid close">mailinglist at foo-lounge.de
       </A><BR>
    <I>Tue Sep  4 13:07:39 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002287.html">driver dis-associates on laptop lid close
</A></li>
        <LI>Next message: <A HREF="002296.html">driver dis-associates on laptop lid close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2288">[ date ]</a>
              <a href="thread.html#2288">[ thread ]</a>
              <a href="subject.html#2288">[ subject ]</a>
              <a href="author.html#2288">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello Ehud,


I figured it out, and it was something very different: My laptop and the
AP were too far away from each other.

For testing purposes, I placed my box directly in front of my AP. Then,
it wouldn't cease networking even if I shut the lid. On the contrary,
when sitting on the couch, I must be at a critical distance.

Still wondering, though, why it would work with ndiswrapper flawlessly.
Could it be that the bcm43xx driver doesn't push the signal level as
much as ndiswrapper possibly did?


Ehud Gavron wrote:
&gt;<i> What looks like is your power mode is set to suspend on lid close.  If
</I>&gt;<i> you fix that you'll find your problem goes away.
</I>&gt;<i> 
</I>&gt;<i> In gnome on F7 I go to system-&gt;preferences-&gt;system-&gt;power management and
</I>&gt;<i> change what lid-closed behavior is.
</I>
For the sake of completeness: This laptop uses KDE. Kpowersave was
running but configured not to do anything on lid closure.

Thanks for helping!


Cheers,

--Timo



&gt;<i> Timo Reimann wrote:
</I>&gt;&gt;<i> Hi all,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I'm having the following issue with a Broadcom 4306 802.11b/g mini-PCI
</I>&gt;&gt;<i> card running under Ubuntu Feisty (7.04) kernel 2.6.20 and 2.6.22 with
</I>&gt;&gt;<i> the bcm43xx driver on an IBM Thinkpad T40.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Whenever I close my laptop's lid, the wifi interface seems to stop
</I>&gt;&gt;<i> working as I can tell by trying to ping the machine remotely: It works
</I>&gt;&gt;<i> right before I close the lid, stops when it's shut, and *mostly* works
</I>&gt;&gt;<i> again if I re-open. Same thing with any other network service, e.g. ssh.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> The *mostly*-part is what is giving me headaches. Although iwconfig
</I>&gt;&gt;<i> shows that the association to my AP is never dropped and the interface
</I>&gt;&gt;<i> is still configured in terms of IP address, netmask and such, every now
</I>&gt;&gt;<i> and then I cannot connect to either LAN or WAN machines, and all I can
</I>&gt;&gt;<i> do in such a case is re-load the driver and restart the interface. Apart
</I>&gt;&gt;<i> from that, I'd prefer my laptop to stay connected even when the lid is
</I>&gt;&gt;<i> closed.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I have two reasons why I suspect the Broadcom driver to be responsible:
</I>&gt;&gt;<i> First, I have tried my best to make sure no other mechanism may be
</I>&gt;&gt;<i> blamed for the observed behavior, including disabling ACPI/APM/APIC on
</I>&gt;&gt;<i> bootup; disabling acpid; making sure no hiberating/suspending takes
</I>&gt;&gt;<i> place; and checking the BIOS power management settings.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Second, I used to use ndiswrapper for this machine but choose to switch
</I>&gt;&gt;<i> to the bcm43xx driver since the first would not reliably connect my box
</I>&gt;&gt;<i> during start-up. If it did connect, however, the link would never fail
</I>&gt;&gt;<i> during lid closure (while not changing anything else, i.e. same network
</I>&gt;&gt;<i> configuration tools were used during, before, and after the switch).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Therefore, I'd be glad if anyone has a hint what else I could try to fix
</I>&gt;&gt;<i> this problem. Especially, I'm curious if any of the bcm43xx module
</I>&gt;&gt;<i> parameters deal with some power management/suspend control part I could
</I>&gt;&gt;<i> tweak. (I wasn't able to figure what every `modinfo'-listed argument
</I>&gt;&gt;<i> means.)
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for any help. If I forgot some vital piece of information, please
</I>&gt;&gt;<i> don't hesitate to ask.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Cheers,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> --Timo
</I>&gt;&gt;<i> _______________________________________________
</I>&gt;&gt;<i> Bcm43xx-dev mailing list
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;&gt;<i>   
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002287.html">driver dis-associates on laptop lid close
</A></li>
	<LI>Next message: <A HREF="002296.html">driver dis-associates on laptop lid close
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2288">[ date ]</a>
              <a href="thread.html#2288">[ thread ]</a>
              <a href="subject.html#2288">[ subject ]</a>
              <a href="author.html#2288">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
