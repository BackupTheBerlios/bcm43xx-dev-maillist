<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Some help with understanding iperf... please?
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-July/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Some%20help%20with%20understanding%20iperf...%20please%3F&In-Reply-To=%3C486A4E66.7080307%40wetwork.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004388.html">
   <LINK REL="Next"  HREF="004390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Some help with understanding iperf... please?</H1>
    <B>Ehud Gavron</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Some%20help%20with%20understanding%20iperf...%20please%3F&In-Reply-To=%3C486A4E66.7080307%40wetwork.net%3E"
       TITLE="Some help with understanding iperf... please?">gavron at wetwork.net
       </A><BR>
    <I>Tue Jul  1 17:33:58 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004388.html">b43 firmware on 2 different card
</A></li>
        <LI>Next message: <A HREF="004390.html">+	drivers-net-wireless-b43legacy-dmac-remove-the-switch-in-b43legacy_dma_init.patch	added to -mm tree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4389">[ date ]</a>
              <a href="thread.html#4389">[ thread ]</a>
              <a href="subject.html#4389">[ subject ]</a>
              <a href="author.html#4389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>This isn't a strictly b43 thing, but since so many of the developers 
regularly use iperf for testing I thought I'd get some of your expertise 
on something which has been baffling me for two weeks, and which appears 
to make no sense.

When testing a metropolitan-Ethernet link the following was repeatably 
observed.  (Repeatably means over several test days with different test 
laptops and each test repeated 5+ times in either direction and 
bidirectionaly)  This is supposed to be 100Mbps bridged Ethernet so 
numbers around 90Mbps are fine.

Unidirectionally the links check out fine:
A-&gt;B 90Mbps
B-&gt;A 90Mbps

Bidirectionally one of them is slow:
A&lt;-=&gt;B (A: iperf -s   B: iperf -c A -d)      A-&gt;B 86Mbps    B-A&gt;  55Mbps
B&lt;-=&gt;A (A: iperf -c B -d    B: iperf -s)     A-&gt;B 86Mbps    B-A&gt;  
55Mbps   (yes, that's right, with client/server flipped the B-&gt;A side is 
still the slow one)

Thinking this clearly indicated a lack of bandwidth on the return leg 
(B-&gt;A) we've been working with the carrier.  However, today, for the 
sake of further testing, I moved the testset to the local LAN separated 
only by gigabit switches and both A and B on 100Mbps FDX ports.   I got 
the same test results.

I then downloaded tcpperf, which claims to be a very simple test used 
for simulation modeling (perfect!) from 
<A HREF="http://wand.cs.waikato.ac.nz/~stj2/nsc/software.html">http://wand.cs.waikato.ac.nz/~stj2/nsc/software.html</A> and ran it.  
tcpperf showed 90Mbps A-&gt;B, B-&gt;A and A&lt;-&gt;B

This leaves me with two baffling questions:
1. What am I doing wrong with iperf?
2. Why is it the B-&gt;A path is always the one that suffers in the 
bidirectional test no matter who is acting as client and who is acting 
as server?

I spent hours yesterday and today googling everything iperf and 
bidirectional, and then just plain iperf (which is how I found tcpperf) 
and got no information. 

Any ideas?

Thanks in advance,

Ehud
PS iperf -r (instead of -d) performs the same as the unidirectional 
tests above.
-------------- next part --------------
A non-text attachment was scrubbed...
Name: smime.p7s
Type: application/x-pkcs7-signature
Size: 3283 bytes
Desc: S/MIME Cryptographic Signature
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20080701/f3e33ed0/attachment.bin">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20080701/f3e33ed0/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004388.html">b43 firmware on 2 different card
</A></li>
	<LI>Next message: <A HREF="004390.html">+	drivers-net-wireless-b43legacy-dmac-remove-the-switch-in-b43legacy_dma_init.patch	added to -mm tree
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4389">[ date ]</a>
              <a href="thread.html#4389">[ thread ]</a>
              <a href="subject.html#4389">[ subject ]</a>
              <a href="author.html#4389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
