<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> RFC: a new version of bcm43xx.txt
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-February/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20RFC%3A%20a%20new%20version%20of%20bcm43xx.txt&In-Reply-To=%3C45CAB06F.6090008%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000391.html">
   <LINK REL="Next"  HREF="000394.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>RFC: a new version of bcm43xx.txt</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20RFC%3A%20a%20new%20version%20of%20bcm43xx.txt&In-Reply-To=%3C45CAB06F.6090008%40lwfinger.net%3E"
       TITLE="RFC: a new version of bcm43xx.txt">larry.finger at lwfinger.net
       </A><BR>
    <I>Thu Feb  8 06:09:03 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000391.html">RFC: a new version of bcm43xx.txt
</A></li>
        <LI>Next message: <A HREF="000394.html">RFC: a new version of bcm43xx.txt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#393">[ date ]</a>
              <a href="thread.html#393">[ thread ]</a>
              <a href="subject.html#393">[ subject ]</a>
              <a href="author.html#393">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Pavel Roskin wrote:
&gt;<i> On Wed, 2007-02-07 at 19:49 -0600, Larry Finger wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> +This driver has been developend using a clean-room technique that is described
</I>&gt;<i> 
</I>&gt;<i> developed
</I>&gt;<i> 
</I>&gt;&gt;<i> +Since the release of the 2.6.17 kernel, the bcm43xx driver has been dstributed
</I>&gt;<i> 
</I>&gt;<i> distributed
</I>&gt;<i> 
</I>&gt;<i> Please make sure to spell check the final edition.
</I>&gt;<i> 
</I>&gt;&gt;<i> +with the kernel source, and is prebuilt in most, if not all, distributions.
</I>&gt;&gt;<i> +There is, however, additional software that is required. Because the firmware
</I>&gt;&gt;<i> +used by the processor in the Broadcom chip is copyrighted, it is not possible
</I>&gt;&gt;<i> +for any third party to distribute it.
</I>&gt;<i> 
</I>&gt;<i> Strictly speaking, Linux is copyrighted too.  It would be better to
</I>&gt;<i> rephrase it to mention the specific restrictions, whatever they are.
</I>
A good suggestion - perhaps some other reader might suggest language here.

&gt;&gt;<i>  Furthermore, it cannot be placed in the
</I>&gt;&gt;<i> +downloadable archives of any distributing organization; therefore, the user is
</I>&gt;&gt;<i> +responsible for obtaining the firmware and placing it in the appropriate location
</I>&gt;&gt;<i> +so that the driver can find it when initializing.
</I>&gt;<i> 
</I>&gt;<i> But how come it's on openwrt.org then?
</I>
Linksys used Linux on the older versions of the WRT54G. According to the GPL, they have to make the
system available. Of course, it is within their rights to provide the driver in a binary-only form
and openwrt.org is allowed to redistibute the entire system. BTW, Linksys now uses VxWorks, which
doesn't have the GPL &quot;problem&quot;.
&gt;<i> 
</I>&gt;&gt;<i> +To help with this process, the bcm43xx developers provide a separate program
</I>&gt;&gt;<i> +named bcm43xx-fwcutter to &quot;cut&quot; the firmware out of a Windows or OS X driver
</I>&gt;&gt;<i> +and write the extracted files to the proper location. This program is usually
</I>&gt;&gt;<i> +provided with the distribution; however, it may be downloaded from
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +<A HREF="http://developer.berlios.de/project/showfiles.php?group_id=4547.">http://developer.berlios.de/project/showfiles.php?group_id=4547.</A>
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +The firmware is available in two versions. V3 firmware is used with the in-kernel
</I>&gt;&gt;<i> +bcm43xx driver that uses a software MAC layer called SoftMAC, and will have a
</I>&gt;&gt;<i> +microcode revision of 0x127 or smaller. The V4 firmware is used by an out-of-kernel
</I>&gt;&gt;<i> +driver employing a variation of the devicescape MAC layer known as d80211. Once
</I>&gt;&gt;<i> +bcm43xx-d80211 reaches a satisfactory level of development, it will replace
</I>&gt;&gt;<i> +bcm43xx-softmac in the kernel as it is much more flexible and powerful.
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +A source for rev 0x127 (V3) firmware is
</I>&gt;<i> 
</I>&gt;<i> I'm not sure why you are repeating this &quot;0x127&quot; over and over again.  It
</I>&gt;<i> seems a minor detail that even fwcutter docs don't mention.  The
</I>&gt;<i> important part is v3 vs v4.
</I>&gt;<i> 
</I>&gt;&gt;<i> +<A HREF="http://downloads.openwrt.org/sources/wl_apsta-3.130.20.0.o.">http://downloads.openwrt.org/sources/wl_apsta-3.130.20.0.o.</A>
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +Once this file is downloaded, the command 'bcm43xx-fwcutter -i &lt;filename&gt;' will list
</I>&gt;&gt;<i> +the &quot;blobs&quot; of microcode in the file. The command 'bcm43xx-fwcutter -w &lt;dir&gt; &lt;filename&gt;'
</I>&gt;&gt;<i> +will extract the microcode and write it to directory &lt;dir&gt;.
</I>&gt;<i> 
</I>&gt;<i> Sorry for a naive question.  How hard would is be to run fwcutter once,
</I>&gt;<i> zip the firmware and put it to the same directory on the same site?
</I>
AFAIK, we are not allowed to do anything like that.

&gt;&gt;<i>  The correct directory
</I>&gt;&gt;<i> +will depend on your distribution; however, most use '/lib/firmware'. Once this
</I>&gt;&gt;<i> +step is completed, the bcm3xx driver should load when the system is booted. To see
</I>&gt;&gt;<i> +any messages relating to the driver, issue the command 'dmesg | grep bcm43xx' from
</I>&gt;&gt;<i> +a terminal window. If there are any problems, please send that output to
</I>&gt;&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">+Bcm43xx-dev at lists.berlios.de.</A>
</I>&gt;&gt;<i> +
</I>&gt;&gt;<i> +Although the driver has been in-kernel since 2.6.17, the earlier versions are quite
</I>&gt;&gt;<i> +limited in their capability. Patches for each of the stable kernel versions from
</I>&gt;&gt;<i> +2.6.18 onward are available to include all features of later versions. These will
</I>&gt;&gt;<i> +be needed if you use a BCM4318, or a PCI-E version (BCM4311 and BCM4312). In addition,
</I>&gt;<i> 
</I>&gt;<i> I think PCIe is a preferred abbreviation.  Or maybe just write PCI
</I>&gt;<i> Express.
</I>&gt;<i> 
</I>&gt;&gt;<i> +if you have an early BCM4306 and more than 1 GB RAM, your kernel will need to be
</I>&gt;&gt;<i> +patched. These patches, which are being updated regularly, are available at
</I>&gt;&gt;<i> +<A HREF="ftp://lwfinger.dynalias.org/patches.">ftp://lwfinger.dynalias.org/patches.</A> Look for &lt;kernel version&gt;_combined_patch. Of
</I>&gt;&gt;<i> +course you will need kernel source, either downloaded from kernel.org, or the source
</I>&gt;&gt;<i> +from your distribution.
</I>&gt;<i> 
</I>&gt;<i> Could you please rename those patches to add .diff ot .path to the
</I>&gt;<i> names?  Many editors would highlight the patches nicely if they are
</I>&gt;<i> maned like this.  Not to mention that files ending with a dot-number
</I>&gt;<i> could be mistaken for a manual page.
</I>
I changed the name to &quot;combined_patch_2_6_20&quot;, etc. Once d80211 becomes the in-kernel version, I
will keep a patch set for those people with 802.11b cards that do not work with V4 firmware.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000391.html">RFC: a new version of bcm43xx.txt
</A></li>
	<LI>Next message: <A HREF="000394.html">RFC: a new version of bcm43xx.txt
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#393">[ date ]</a>
              <a href="thread.html#393">[ thread ]</a>
              <a href="subject.html#393">[ subject ]</a>
              <a href="author.html#393">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
