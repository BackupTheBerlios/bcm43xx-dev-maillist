<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> bcm43xx_mac80211 not works on Compaq nx6110
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20bcm43xx_mac80211%20not%20works%20on%20Compaq%20nx6110&In-Reply-To=%3C45F3CDC2.9030809%40puga.vdu.lt%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000721.html">
   <LINK REL="Next"  HREF="000728.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>bcm43xx_mac80211 not works on Compaq nx6110</H1>
    <B>Tomas Martisius</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20bcm43xx_mac80211%20not%20works%20on%20Compaq%20nx6110&In-Reply-To=%3C45F3CDC2.9030809%40puga.vdu.lt%3E"
       TITLE="bcm43xx_mac80211 not works on Compaq nx6110">tomas at puga.vdu.lt
       </A><BR>
    <I>Sun Mar 11 10:37:06 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000721.html">bcm43xx_mac80211 not works on Compaq nx6110
</A></li>
        <LI>Next message: <A HREF="000728.html">bcm43xx_mac80211 not works on Compaq nx6110
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#724">[ date ]</a>
              <a href="thread.html#724">[ thread ]</a>
              <a href="subject.html#724">[ subject ]</a>
              <a href="author.html#724">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hello,

Still no success.

Now little about logs and my config. Tested not encrypted connection.
First log is from debian kernel 2.6.20 from deb 
<A HREF="http://kernel-archive.buildserver.net/debian-kernel">http://kernel-archive.buildserver.net/debian-kernel</A> trunk main
using softmac ( on etch) and formware 3xx - works.

Mar 11 09:58:03 localhost kernel: bcm43xx driver
Mar 11 09:58:03 localhost kernel: ACPI: PCI Interrupt 0000:02:04.0[A] -&gt; GSI 21 (level, low) -&gt; IRQ 22
Mar 11 09:58:03 localhost kernel: bcm43xx: Chip ID 0x4318, rev 0x2
Mar 11 09:58:03 localhost kernel: bcm43xx: Number of cores: 4
Mar 11 09:58:03 localhost kernel: bcm43xx: Core 0: ID 0x800, rev 0xd, vendor 0x4243
Mar 11 09:58:03 localhost kernel: bcm43xx: Core 1: ID 0x812, rev 0x9, vendor 0x4243
Mar 11 09:58:03 localhost kernel: bcm43xx: Core 2: ID 0x804, rev 0xc, vendor 0x4243
Mar 11 09:58:03 localhost kernel: bcm43xx: Core 3: ID 0x80d, rev 0x7, vendor 0x4243
Mar 11 09:58:03 localhost kernel: bcm43xx: PHY connected
Mar 11 09:58:03 localhost kernel: bcm43xx: Detected PHY: Version: 3, Type 2, Revision 7
Mar 11 09:58:03 localhost kernel: bcm43xx: Detected Radio: ID: 8205017f (Manuf: 17f Ver: 2050 Rev: 8)
Mar 11 09:58:03 localhost kernel: bcm43xx: Radio turned off
Mar 11 09:58:03 localhost kernel: bcm43xx: Radio turned off
Mar 11 09:58:03 localhost kernel: bcm43xx: PHY connected
Mar 11 09:58:03 localhost kernel: bcm43xx: Microcode rev 0x127, pl 0xe (2005-04-18  02:36:27)
Mar 11 09:58:03 localhost kernel: bcm43xx: Radio turned on
Mar 11 09:58:03 localhost kernel: bcm43xx: ASSERTION FAILED (radio_attenuation &lt; 10) at: drivers/net/wireless/bcm43xx/bcm43xx_phy.c:1496:bcm43xx_find_lopair()
Mar 11 09:58:03 localhost last message repeated 2 times
Mar 11 09:58:03 localhost kernel: bcm43xx: Chip initialized
Mar 11 09:58:03 localhost kernel: bcm43xx: 32-bit DMA initialized
Mar 11 09:58:03 localhost kernel: bcm43xx: Keys cleared
Mar 11 09:58:03 localhost kernel: bcm43xx: Selected 802.11 core (phytype 2)
Mar 11 09:58:03 localhost kernel: bcm43xx: ASSERTION FAILED (radio_attenuation &lt; 10) at: drivers/net/wireless/bcm43xx/bcm43xx_phy.c:1496:bcm43xx_find_lopair()
Mar 11 09:58:03 localhost kernel: SoftMAC: Open Authentication completed with 00:14:bf:48:68:10

The second one is from kernel compiled from <A HREF="http://bu3sch.de">http://bu3sch.de</A> git repository.
Are something more new on 2.6.21-rc3 or 
<A HREF="ftp://lwfinger.dynalias.org/patches/combined_2.6.20.patch">ftp://lwfinger.dynalias.org/patches/combined_2.6.20.patch</A> ?
Kernel config is almost identical as on debian kernel ( make oldconfig, 
enter a lot of times and changed only
bcm43xx-mac82011 options). Firmware 4xxx. Network config and AP the some.

Mar 11 10:48:33 localhost kernel: ssb: Sonics Silicon Backplane found on PCI device 0000:02:04.0
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Broadcom 4318 WLAN found
Mar 11 10:48:33 localhost kernel: ACPI: PCI Interrupt 0000:00:1e.2[A] -&gt; GSI 21 (level, low) -&gt; IRQ 22
Mar 11 10:48:33 localhost kernel: PCI: Setting latency timer of device 0000:00:1e.2 to 64
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Radio turned off
Mar 11 10:48:33 localhost kernel: wmaster0: Selected rate control algorithm 'simple'
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Adding Interface type 2
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Found PHY: Analog 3, Type 2, Revision 7
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Found Radio: Manuf 0x17F, Version 0x2050, Revision 8
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Loading firmware version 371.1061 (2006-10-04 21:02:04)
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Radio turned on
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Radio enabled by hardware
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: !WARNING! Idle-TSSI phy-&gt;cur_idle_tssi measuring failed. (cur=0, tgt=62). Disabling TX power adjustment.
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Chip initialized
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: 32-bit DMA initialized
Mar 11 10:48:33 localhost kernel: bcm43xx_mac80211: Wireless interface started
Mar 11 10:48:33 localhost kernel: HW CONFIG: channel=1 freq=2412 phymode=3
Mar 11 10:48:33 localhost kernel: wmaster0: Does not support passive scan, disabled
Mar 11 10:48:33 localhost kernel: wlan0: dropped data frame to not associated station 00:00:00:00:00:00
Mar 11 10:48:33 localhost last message repeated 2 times
Mar 11 10:50:35 localhost kernel: wlan0: starting scan
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=1 freq=2412 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=2 freq=2417 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=3 freq=2422 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=4 freq=2427 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=5 freq=2432 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=6 freq=2437 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=7 freq=2442 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=8 freq=2447 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:35 localhost kernel: HW CONFIG: channel=9 freq=2452 phymode=3
Mar 11 10:50:35 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:36 localhost kernel: HW CONFIG: channel=10 freq=2457 phymode=3
Mar 11 10:50:36 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:36 localhost kernel: HW CONFIG: channel=11 freq=2462 phymode=3
Mar 11 10:50:36 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x0000 A1=ff:ff:ff:ff:ff:ff A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:36 localhost kernel: wlan0: scan completed
Mar 11 10:50:36 localhost kernel: HW CONFIG: channel=1 freq=2412 phymode=3
Mar 11 10:50:36 localhost kernel: HW CONFIG: channel=11 freq=2462 phymode=3
Mar 11 10:50:36 localhost kernel: wlan0: Initial auth_alg=0
Mar 11 10:50:36 localhost kernel: wlan0: authenticate with AP 00:14:bf:48:68:10
Mar 11 10:50:36 localhost kernel: wmaster0: TX to low-level driver (len=30) FC=0x00b0 DUR=0x013a A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=00:14:bf:48:68:10
Mar 11 10:50:36 localhost kernel: wlan0: RX authentication from 00:14:bf:48:68:10 (alg=0 transaction=2 status=0)
Mar 11 10:50:36 localhost kernel: wlan0: authenticated
Mar 11 10:50:36 localhost kernel: wlan0: associate with AP 00:14:bf:48:68:10
Mar 11 10:50:36 localhost kernel: wmaster0: TX to low-level driver (len=53) FC=0x0000 DUR=0x013a A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=00:14:bf:48:68:10
Mar 11 10:50:36 localhost kernel: wlan0: RX AssocResp from 00:14:bf:48:68:10 (capab=0x401 status=0 aid=1)
Mar 11 10:50:36 localhost kernel: wlan0: associated
Mar 11 10:50:36 localhost kernel: wmaster0: Added STA 00:14:bf:48:68:10
Mar 11 10:50:36 localhost kernel: wmaster0: TX to low-level driver (len=360) FC=0x0108 DUR=0x002c A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:40 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x013a A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=00:14:bf:48:68:10
Mar 11 10:50:41 localhost kernel: wmaster0: TX to low-level driver (len=360) FC=0x0108 DUR=0x002c A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:44 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x013a A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=00:14:bf:48:68:10
Mar 11 10:50:53 localhost kernel: wmaster0: TX to low-level driver (len=360) FC=0x0108 DUR=0x002c A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=ff:ff:ff:ff:ff:ff
Mar 11 10:50:56 localhost kernel: wmaster0: TX to low-level driver (len=42) FC=0x0040 DUR=0x013a A1=00:14:bf:48:68:10 A2=00:14:a5:1e:7d:30 A3=00:14:bf:48:68:10


Full both boot's kernel logs atached.

iwconfig output on mac80211:
 

wmaster0  IEEE 802.11g  Frequency:2.462 GHz  
          RTS thr:off   Fragment thr=2346 B   
          
wlan0     IEEE 802.11g  ESSID:&quot;eduroam&quot;  
          Mode:Managed  Frequency:2.462 GHz  Access Point: 00:14:BF:48:68:10   
          RTS thr:off   Fragment thr=2346 B   
          Encryption key:off
          Link Quality=206/60  Signal level=-230 dBm  Noise level=-73 dBm
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0


It seems that AP is seen, but traffic not goes, at least in one side.
Some problems with TX power?
About belkin - i will try to test it hardly next week.

Best regards,

Tomas Martis(ius

Larry Finger wrote:
&gt;<i> Tomas Martisius wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> Then other quiestion:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On this nx6110 BCM4318 ( mini PCI ) works using bcm43xx softmac driver
</I>&gt;&gt;<i> and 3xxx firmware ( only as AP client and only  max 11 Mb, iwconfig 
</I>&gt;&gt;<i> wlan0 rate xxM does not work).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> But on other PC with Belkin F5D7001PCI ( also BCM4318 ) - no way.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> If you use either 2.6.21-rc3 or 2.6.20 patched with
</I>&gt;<i> <A HREF="ftp://lwfinger.dynalias.org/patches/combined_2.6.20.patch,">ftp://lwfinger.dynalias.org/patches/combined_2.6.20.patch,</A> both of your 4318's should work just
</I>&gt;<i> fine. If not, please send me the log data from each of them and the output from iwconfig. With my
</I>&gt;<i> 4318, I get a transmit speed of 16.2 Mbs with the rate set at 48 Mbs. Windows XP only gets 19.5 with
</I>&gt;<i> my 4311.
</I>&gt;<i>
</I>&gt;<i> Larry
</I>&gt;<i>   
</I>
-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070311/580b7eb0/attachment.html">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070311/580b7eb0/attachment.html</A>&gt;
-------------- next part --------------
A non-text attachment was scrubbed...
Name: kern.log
Type: text/x-log
Size: 86477 bytes
Desc: not available
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070311/580b7eb0/attachment.bin">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20070311/580b7eb0/attachment.bin</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000721.html">bcm43xx_mac80211 not works on Compaq nx6110
</A></li>
	<LI>Next message: <A HREF="000728.html">bcm43xx_mac80211 not works on Compaq nx6110
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#724">[ date ]</a>
              <a href="thread.html#724">[ thread ]</a>
              <a href="subject.html#724">[ subject ]</a>
              <a href="author.html#724">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
