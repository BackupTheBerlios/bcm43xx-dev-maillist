<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [RFT] [PATCH] bcm43xx: ACI fixes
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BRFT%5D%20%5BPATCH%5D%20bcm43xx%3A%20ACI%20fixes&In-Reply-To=%3C200703141517.52624.mb%40bu3sch.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000757.html">
   <LINK REL="Next"  HREF="000745.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[RFT] [PATCH] bcm43xx: ACI fixes</H1>
    <B>Michael Buesch</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BRFT%5D%20%5BPATCH%5D%20bcm43xx%3A%20ACI%20fixes&In-Reply-To=%3C200703141517.52624.mb%40bu3sch.de%3E"
       TITLE="[RFT] [PATCH] bcm43xx: ACI fixes">mb at bu3sch.de
       </A><BR>
    <I>Wed Mar 14 15:17:52 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000757.html">[RFT] [PATCH] bcm43xx: ACI fixes
</A></li>
        <LI>Next message: <A HREF="000745.html">[RFC] bcm43xx: Replace some magic numbers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#758">[ date ]</a>
              <a href="thread.html#758">[ thread ]</a>
              <a href="subject.html#758">[ subject ]</a>
              <a href="author.html#758">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Wednesday 14 March 2007 07:41, Stefano Brivio wrote:
&gt;<i> &gt; &gt; -	   aci_hw_rssi:1;
</I>&gt;<i> &gt; &gt; +	   aci_hw_rssi:1,
</I>&gt;<i> &gt; &gt; +	   aci_delay:5;
</I>&gt;<i> &gt; Should this be a bit field? Why not just make it a u8?
</I>&gt;<i> 
</I>&gt;<i> We only need 5 bits, as aci_delay will never be &gt; 20.
</I>
I actually try to move away from the foo:x notation, as it generates bad code.
There's no benefit in saving 3 bits here and adding 100byte of additional
code, which is generated by gcc to mask and shift the bits. :)

&gt;<i> &gt; &gt; +	u8 aci_start;
</I>&gt;<i> &gt; &gt;  };
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt;  /* Data structures for DMA transmission, per 80211 core. */
</I>&gt;<i> &gt; &gt; @@ -699,6 +708,18 @@ struct bcm43xx_noise_calculation {
</I>&gt;<i> &gt; &gt;  	s8 samples[8][4];
</I>&gt;<i> &gt; &gt;  };
</I>&gt;<i> &gt; &gt;  
</I>&gt;<i> &gt; &gt; +/* Statscounter data (currently ACI only). */
</I>&gt;<i> &gt; &gt; +struct bcm43xx_statscounter_saved {
</I>&gt;<i> &gt; &gt; +	u16 aci;
</I>&gt;<i> &gt; &gt; +};
</I>&gt;<i> &gt; &gt; +
</I>&gt;<i> &gt; &gt; +/* Values for ACI moving average calculation. */
</I>&gt;<i> &gt; &gt; +struct bcm43xx_aci_saved {
</I>&gt;<i> &gt; &gt; +	u16 value[8];
</I>&gt;<i> &gt; &gt; +	u8 next:3,
</I>&gt;<i> &gt; &gt; +	   set:3;
</I>&gt;<i> &gt; As I will explain later, I don't think 'set' is needed. I also recommend
</I>&gt;<i> &gt; having 'next' be a plain u8.
</I>&gt;<i> 
</I>&gt;<i> Both values will never be &gt; 7.
</I>
Please do u8 nevertheless to get better code.

-- 
Greetings Michael.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000757.html">[RFT] [PATCH] bcm43xx: ACI fixes
</A></li>
	<LI>Next message: <A HREF="000745.html">[RFC] bcm43xx: Replace some magic numbers
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#758">[ date ]</a>
              <a href="thread.html#758">[ thread ]</a>
              <a href="subject.html#758">[ subject ]</a>
              <a href="author.html#758">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
