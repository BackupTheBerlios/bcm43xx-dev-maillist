<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> WPA problem with bcm43xx-mac80211
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-March/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20WPA%20problem%20with%20bcm43xx-mac80211&In-Reply-To=%3C45EF4596.2090101%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000718.html">
   <LINK REL="Next"  HREF="000711.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>WPA problem with bcm43xx-mac80211</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20WPA%20problem%20with%20bcm43xx-mac80211&In-Reply-To=%3C45EF4596.2090101%40lwfinger.net%3E"
       TITLE="WPA problem with bcm43xx-mac80211">Larry.Finger at lwfinger.net
       </A><BR>
    <I>Thu Mar  8 00:07:02 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="000718.html">Problem with USB1.1 Host cores with the mb tree for	bcm43xx_mac80211
</A></li>
        <LI>Next message: <A HREF="000711.html">WPA problem with bcm43xx-mac80211
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#710">[ date ]</a>
              <a href="thread.html#710">[ thread ]</a>
              <a href="subject.html#710">[ subject ]</a>
              <a href="author.html#710">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>I'm making progress. Now that I no longer get a kernel oops due to the presence of a USB 1.1 Host
Core on my 4311, the bcm43xx-mac80211 driver actually loads and scans; however, I cannot
authenticate with my Linksys WRT54G V5 AP that uses WPA-PK TKIP. The dmesg output pertaining to the
bcm43xx is as follows:

ssb: Sonics Silicon Backplane found on PCI device 0000:01:00.0
ssb: Core 0 found: ChipCommon (cc 0x800, rev 0x11, vendor 0x4243)
ssb: Core 1 found: IEEE 802.11 (cc 0x812, rev 0x0A, vendor 0x4243)
ssb: Core 2 found: USB 1.1 Host (cc 0x817, rev 0x03, vendor 0x4243)
ssb: Core 3 found: PCI-E (cc 0x820, rev 0x01, vendor 0x4243)
ssb: Switching to ChipCommon core, index 0
ssb: Switching to PCI-E core, index 3
bcm43xx_mac80211: Broadcom 4311 WLAN found
ssb: Switching to IEEE 802.11 core, index 1
bcm43xx_mac80211: Radio turned off
bcm43xx_mac80211: Adding Interface type 2
bcm43xx_mac80211: Found PHY: Analog 4, Type 2, Revision 8
bcm43xx_mac80211: Found Radio: Manuf 0x17F, Version 0x2050, Revision 2
ssb: Switching to PCI-E core, index 3
ssb: Switching to IEEE 802.11 core, index 1
bcm43xx_mac80211: Loading firmware version 351.126 (2006-07-29 05:54:02)
ssb: Switching to ChipCommon core, index 0
ssb: Switching to IEEE 802.11 core, index 1
bcm43xx_mac80211: Radio turned on
bcm43xx_mac80211: Radio enabled by hardware
bcm43xx_mac80211: !WARNING! Idle-TSSI phy-&gt;cur_idle_tssi measuring failed. (cur=21, tgt=62).
Disabling TX power adjustment.
bcm43xx_mac80211: Chip initialized
bcm43xx_mac80211: 32-bit DMA initialized
bcm43xx_mac80211: Wireless interface started
HW CONFIG: channel=1 freq=2412 phymode=3
wmaster0: Does not support passive scan, disabled
eth1: starting scan
HW CONFIG: channel=1 freq=2412 phymode=3
HW CONFIG: channel=2 freq=2417 phymode=3
HW CONFIG: channel=3 freq=2422 phymode=3
HW CONFIG: channel=4 freq=2427 phymode=3
HW CONFIG: channel=5 freq=2432 phymode=3
HW CONFIG: channel=6 freq=2437 phymode=3
HW CONFIG: channel=7 freq=2442 phymode=3
HW CONFIG: channel=8 freq=2447 phymode=3
HW CONFIG: channel=9 freq=2452 phymode=3
eth0: no link during initialization.
HW CONFIG: channel=10 freq=2457 phymode=3
HW CONFIG: channel=11 freq=2462 phymode=3
eth1: scan completed
HW CONFIG: channel=1 freq=2412 phymode=3
NET: Registered protocol family 17
eth1: starting scan
--snip--
HW CONFIG: channel=4 freq=2427 phymode=3
eth1: Initial auth_alg=0
eth1: authenticate with AP 00:14:bf:85:49:fa
eth1: RX authentication from 00:14:bf:85:49:fa (alg=0 transaction=2 status=0)
eth1: authenticated
eth1: associate with AP 00:14:bf:85:49:fa
eth1: RX AssocResp from 00:14:bf:85:49:fa (capab=0x31 status=0 aid=1)
eth1: associated
wmaster0: Added STA 00:14:bf:85:49:fa
eth1: RX deauthentication from 00:14:bf:85:49:fa (reason=15)
eth1: deauthenticated
eth1: set_encrypt - unknown addr 00:00:00:00:00:00
eth1: authenticate with AP 00:14:bf:85:49:fa
eth1: RX authentication from 00:14:bf:85:49:fa (alg=0 transaction=2 status=0)
eth1: authenticated
eth1: associate with AP 00:14:bf:85:49:fa
eth1: RX ReassocResp from 00:14:bf:85:49:fa (capab=0x31 status=0 aid=1)
eth1: associated
eth1: starting scan
--snip--
eth1: scan completed
HW CONFIG: channel=4 freq=2427 phymode=3
eth1: disassociate(reason=3)
eth1: starting scan
HW CONFIG: channel=1 freq=2412 phymode=3
eth1: set_encrypt - unknown addr 00:00:00:00:00:00
--snip--
eth1: scan completed
HW CONFIG: channel=4 freq=2427 phymode=3
eth1: Initial auth_alg=0
eth1: authenticate with AP 00:14:bf:85:49:fa
HW CONFIG: channel=4 freq=2427 phymode=3
eth1: Initial auth_alg=0
eth1: authenticate with AP 00:14:bf:85:49:fa
eth1: Initial auth_alg=0
eth1: authenticate with AP 00:14:bf:85:49:fa
eth1: RX authentication from 00:14:bf:85:49:fa (alg=0 transaction=2 status=0)
eth1: authenticated
eth1: associate with AP 00:14:bf:85:49:fa
eth1: authentication frame received from 00:14:bf:85:49:fa, but not in authenticate state - ignored
eth1: authentication frame received from 00:14:bf:85:49:fa, but not in authenticate state - ignored
eth1: RX ReassocResp from 00:14:bf:85:49:fa (capab=0x31 status=0 aid=1)
eth1: associated
eth1: deauthenticate(reason=3)
eth1: starting scan
HW CONFIG: channel=1 freq=2412 phymode=3
bcm43xx_mac80211: Removing Interface type 2
bcm43xx_mac80211: Wireless interface stopped
bcm43xx_mac80211: DMA-32 0x0200 (RX) max used slots: 1/64
bcm43xx_mac80211: DMA-32 0x02A0 (TX) max used slots: 0/128
bcm43xx_mac80211: DMA-32 0x0280 (TX) max used slots: 0/128
bcm43xx_mac80211: DMA-32 0x0260 (TX) max used slots: 0/128
bcm43xx_mac80211: DMA-32 0x0240 (TX) max used slots: 0/128
bcm43xx_mac80211: DMA-32 0x0220 (TX) max used slots: 6/128
bcm43xx_mac80211: DMA-32 0x0200 (TX) max used slots: 0/128
bcm43xx_mac80211: Radio turned off
ssb: Switching to ChipCommon core, index 0
ssb: Switching to IEEE 802.11 core, index 1
bcm43xx_mac80211: Radio turned off


Is there anything special that I need to do that isn't needed for SoftMAC? I'm using NetworkManager
to control the authentication process.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000718.html">Problem with USB1.1 Host cores with the mb tree for	bcm43xx_mac80211
</A></li>
	<LI>Next message: <A HREF="000711.html">WPA problem with bcm43xx-mac80211
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#710">[ date ]</a>
              <a href="thread.html#710">[ thread ]</a>
              <a href="subject.html#710">[ subject ]</a>
              <a href="author.html#710">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
