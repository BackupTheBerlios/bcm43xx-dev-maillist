<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev	1 PHYs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20bcm43xx-mac80211%3A%20Fix%20machine%20checks%20on%20PPC%20with%20rev%0A%091%20PHYs&In-Reply-To=%3C461F9C58.6050106%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001058.html">
   <LINK REL="Next"  HREF="001063.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev	1 PHYs</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20bcm43xx-mac80211%3A%20Fix%20machine%20checks%20on%20PPC%20with%20rev%0A%091%20PHYs&In-Reply-To=%3C461F9C58.6050106%40lwfinger.net%3E"
       TITLE="[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev	1 PHYs">larry.finger at lwfinger.net
       </A><BR>
    <I>Fri Apr 13 17:06:00 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001058.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 1	PHYs
</A></li>
        <LI>Next message: <A HREF="001063.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 	1 PHYs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1062">[ date ]</a>
              <a href="thread.html#1062">[ thread ]</a>
              <a href="subject.html#1062">[ subject ]</a>
              <a href="author.html#1062">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Stefano Brivio wrote:
&gt;<i> On Wed, 11 Apr 2007 11:08:53 -0500
</I>&gt;<i> Larry Finger &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Larry.Finger at lwfinger.net</A>&gt; wrote:
</I>&gt;<i> 
</I>&gt;&gt;<i> On PPC architecture with phy-&gt;rev == 1, machine checks occur during
</I>&gt;&gt;<i> initialization of the &quot;Extended G PHY registers&quot;. This problem was
</I>&gt;&gt;<i> also seen on bcm43xx-softmac, and was fixed by conditionally skipping
</I>&gt;&gt;<i> over certain reads/writes of these registers.  The same solution has been
</I>&gt;&gt;<i> applied here with testing by David Woodhouse.  Note: These modifications
</I>&gt;&gt;<i> are not found in the specifications, but are needed for PPC.
</I>&gt;<i> 
</I>&gt;<i> I don't think this patch has to be reverted, but I still think that it's
</I>&gt;<i> better to notice the reverse engineers team about failing operations
</I>&gt;<i> and understand the real problem rather than hiding it. Which works in some
</I>&gt;<i> cases, but sometimes just hide other bugs.
</I>&gt;<i> 
</I>&gt;<i> I'm almost done with rewriting the whole A/G/N setup and init routines,
</I>&gt;<i> following the new v4 specs. This issue could even be related.
</I>
I agree that it would be better if we could follow the specs and not have the machine check problem. 
My impression is that early versions of the bcm43xx driver did not have this difficulty, but that it 
appeared after a relatively recent change in the G init specs. BTW, these were the changes that 
greatly improved performance, particularly on the phy-&gt;rev = 8 devices. Perhaps the Broadcom 
software abandoned/ignored the phy-&gt;rev = 1 units running on PPC hardware, which seems to be the 
only combination that shows the problem. I don't know about MIPS hardware, but the problem is not 
seen on x86 architecture.

I look forward to your rewrite of the setup and init routines. Perhaps they will even let my 4311 
work with mac80211, but I will be very surprised if the PPC machine check problem goes away.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001058.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 1	PHYs
</A></li>
	<LI>Next message: <A HREF="001063.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 	1 PHYs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1062">[ date ]</a>
              <a href="thread.html#1062">[ thread ]</a>
              <a href="subject.html#1062">[ subject ]</a>
              <a href="author.html#1062">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
