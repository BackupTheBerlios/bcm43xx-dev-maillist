<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev	1 PHYs
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-April/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20bcm43xx-mac80211%3A%20Fix%20machine%20checks%20on%20PPC%20with%20rev%0A%091%20PHYs&In-Reply-To=%3C461EDB39.6080806%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="001054.html">
   <LINK REL="Next"  HREF="001091.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev	1 PHYs</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%5D%20bcm43xx-mac80211%3A%20Fix%20machine%20checks%20on%20PPC%20with%20rev%0A%091%20PHYs&In-Reply-To=%3C461EDB39.6080806%40lwfinger.net%3E"
       TITLE="[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev	1 PHYs">larry.finger at lwfinger.net
       </A><BR>
    <I>Fri Apr 13 03:22:01 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="001054.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 1	PHYs
</A></li>
        <LI>Next message: <A HREF="001091.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 1	PHYs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1055">[ date ]</a>
              <a href="thread.html#1055">[ thread ]</a>
              <a href="subject.html#1055">[ subject ]</a>
              <a href="author.html#1055">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>John W. Linville wrote:
&gt;<i> On Wed, Apr 11, 2007 at 11:08:53AM -0500, Larry Finger wrote:
</I>&gt;&gt;<i> On PPC architecture with phy-&gt;rev == 1, machine checks occur during
</I>&gt;&gt;<i> initialization of the &quot;Extended G PHY registers&quot;. This problem was
</I>&gt;&gt;<i> also seen on bcm43xx-softmac, and was fixed by conditionally skipping
</I>&gt;&gt;<i> over certain reads/writes of these registers.  The same solution has been
</I>&gt;&gt;<i> applied here with testing by David Woodhouse.  Note: These modifications
</I>&gt;&gt;<i> are not found in the specifications, but are needed for PPC.
</I>&gt;<i> 
</I>&gt;<i> I added this patch to the Fedora rawhide kernels, but our Fedora QA
</I>&gt;<i> lead reports that he still has this crash:
</I>&gt;<i> 
</I>&gt;<i> 	<A HREF="http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=233011">http://bugzilla.redhat.com/bugzilla/show_bug.cgi?id=233011</A>
</I>&gt;<i> 
</I>&gt;<i> I had diagnosed this to be the same crash as this patch was supposed
</I>&gt;<i> to address.  Was I in error?
</I>&gt;<i> 
</I>&gt;<i> He also reports that the problem still occurs on my FC7 test kernels,
</I>&gt;<i> which are very close to the current rawhide kernels but with the most
</I>&gt;<i> recent round of wireless-dev updates added.
</I>
I suspect the machine check is from the same kind of problem; however, the soft lockup is different. 
It is always possible that it changes the behavior. There is also the different program flow in 
mac80211. I just put in the ones that failed in softmac.

Your tester needs to get a copy of David's hack that prints out the address of the offending 
register. That is the only way to tell what is happening. Once we know the address, then it will be 
a matter of getting printk's into the code to tell which one is failing.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="001054.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 1	PHYs
</A></li>
	<LI>Next message: <A HREF="001091.html">[PATCH] bcm43xx-mac80211: Fix machine checks on PPC with rev 1	PHYs
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#1055">[ date ]</a>
              <a href="thread.html#1055">[ thread ]</a>
              <a href="subject.html#1055">[ subject ]</a>
              <a href="author.html#1055">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
