<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> BCM4312 Fails when xdm is started
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-November/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4312%20Fails%20when%20xdm%20is%20started&In-Reply-To=%3C4926E0F2.5060200%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004878.html">
   <LINK REL="Next"  HREF="004888.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>BCM4312 Fails when xdm is started</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4312%20Fails%20when%20xdm%20is%20started&In-Reply-To=%3C4926E0F2.5060200%40lwfinger.net%3E"
       TITLE="BCM4312 Fails when xdm is started">Larry.Finger at lwfinger.net
       </A><BR>
    <I>Fri Nov 21 17:25:22 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004878.html">[BCM4312][kernel 2.6.27] - wireless fails after X starts
</A></li>
        <LI>Next message: <A HREF="004888.html">BCM4312 Fails when xdm is started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4887">[ date ]</a>
              <a href="thread.html#4887">[ thread ]</a>
              <a href="subject.html#4887">[ subject ]</a>
              <a href="author.html#4887">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>A problem was recently posted to the bcm43xx mailing list that I am unable to
solve. The machine in question is an HP Mini 2133 (HP product number FU346EA)
with a BCM4312 PCIe wireless card. This card is known to work with the b43
driver (I have one.) and it does work on this machine - at least initially.

A problem occurs when xdm/kde is started. Suddenly a read operation on device
hardware returns all ones as though the register does not exist, or if it were
suddenly mismapped. If the OP doesn't try to run xdm, the same problem will
eventually occur, it just takes longer.

This is a 32-bit system running 2.6.28-rc5, but I don't think this is a
regression from some earlier version as the problem was first reported with
kernel 2.6.27-gentoo-r2.

I have complete logs, but before spamming the list with them, I have a question
about the &quot;Zone PFN&quot; settings. On the problem machine, the following list occurs:

[    0.000000] Zone PFN ranges:
[    0.000000]   DMA      0x00000000 -&gt; 0x00001000
[    0.000000]   Normal   0x00001000 -&gt; 0x000373fe
[    0.000000]   HighMem  0x000373fe -&gt; 0x0006feb0

On my 64-bit HP machine, I see:

Zone PFN ranges:
  DMA      0x00000000 -&gt; 0x00001000
  DMA32    0x00001000 -&gt; 0x00100000
  Normal   0x00100000 -&gt; 0x00100000

Is it &quot;normal&quot; for there not to be a DMA32 range with a 32-bit version of Linux?
Certainly all the memory is available to 32-bit DMA. This card does 64-bit DMA,
but the driver falls back to a 32-bit mask for this system.

Is there some kind of memory mapping problem in the PCIe system? Should the
entire log be posted?

Thanks,

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004878.html">[BCM4312][kernel 2.6.27] - wireless fails after X starts
</A></li>
	<LI>Next message: <A HREF="004888.html">BCM4312 Fails when xdm is started
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4887">[ date ]</a>
              <a href="thread.html#4887">[ thread ]</a>
              <a href="subject.html#4887">[ subject ]</a>
              <a href="author.html#4887">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
