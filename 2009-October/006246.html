<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> b43 fatal DMA errors
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43%20fatal%20DMA%20errors&In-Reply-To=%3C4AE4BF2A.5030907%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006243.html">
   <LINK REL="Next"  HREF="006245.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>b43 fatal DMA errors</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43%20fatal%20DMA%20errors&In-Reply-To=%3C4AE4BF2A.5030907%40lwfinger.net%3E"
       TITLE="b43 fatal DMA errors">Larry.Finger at lwfinger.net
       </A><BR>
    <I>Sun Oct 25 22:12:10 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006243.html">b43 fatal DMA errors
</A></li>
        <LI>Next message: <A HREF="006245.html">b43 fatal DMA errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6246">[ date ]</a>
              <a href="thread.html#6246">[ thread ]</a>
              <a href="subject.html#6246">[ subject ]</a>
              <a href="author.html#6246">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/25/2009 03:46 PM, G&#225;bor Stefanik wrote:
&gt;<i> 2009/10/25 Linus Torvalds &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">torvalds at linux-foundation.org</A>&gt;:
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> On Sun, 25 Oct 2009, G&#225;bor Stefanik wrote:
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Could you please test the tag &quot;master-2009-08-26&quot; from
</I>&gt;&gt;&gt;<i> wireless-testing? That one was the first version that worked, and in
</I>&gt;&gt;&gt;<i> that specific build, my card (exactly the same as yours) worked
</I>&gt;&gt;&gt;<i> perfectly, leading me to suspect a regression (probably not in the b43
</I>&gt;&gt;&gt;<i> driver, but in something else interfering with b43).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Will try. Are you using that same firmware version?
</I>&gt;<i> 
</I>&gt;<i> Yes, I have v478 also. However, I tried to build the latest
</I>&gt;<i> wireless-testing tree, but I can't reproduce the error here.
</I>&gt;<i> 
</I>&gt;<i> One thing I have noticed is that everyone so far with this error
</I>&gt;<i> appears to have a HP or Dell laptop - I have tested with a
</I>&gt;<i> custom-built desktop with an Asus motherboard. I will test my other
</I>&gt;<i> 4312 in my Acer laptop later (I don't own a Dell or a HP).
</I>&gt;<i> 
</I>&gt;<i> Could you describe the exact HW configuration of your system
</I>&gt;<i> (including the BIOS type - my Acer has InsydeH2O, while my desktop is
</I>&gt;<i> AMI-based)?
</I>&gt;<i> 
</I>&gt;<i> Does the wl_hybrid driver work for you? (If it does work, please try
</I>&gt;<i> building the latest compat-wireless for the kernel on which wl_hybrid
</I>&gt;<i> worked, and post the results. Try the compat-wireless driver both on a
</I>&gt;<i> cold boot and after wl_hybrid has been unloaded.)
</I>&gt;<i> 
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also try apic=off &amp; acpi=off (IIRC another DMA error victim, but with
</I>&gt;&gt;&gt;<i> error code 0x00000800 had ACPI clobbering his DMA).
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Ok, will try that separately.
</I>&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> Also, is there any reference to a failed channel switch in the log?
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Nope.
</I>&gt;<i> 
</I>&gt;<i> Then it's a different bug than the 0x00000800 one, which also caused
</I>&gt;<i> channel switching to fail.
</I>
I do not see the DMA problem on an HP dv2815, no matter whether I run
kernels from wireless-testing, mainline 2.6.32-rcX, or 2.6.31.5 from
openSUSE 11.2 RC1 with compat-wireless later than 1-OCT-2009.

For completeness, the specification page at
<A HREF="http://bcm-v4.sipsolutions.net/802.11/Registers">http://bcm-v4.sipsolutions.net/802.11/Registers</A> shows the error
0x00000800 to be a PCI data error and 0x00000400 to be a DMA
descriptor error. For netbooks with Atom CPUs, the PCI data error
seems to be due to ACPI errors. It is not clear what causes the DMA
descriptor error. Too bad one of the devs doesn't see this error.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006243.html">b43 fatal DMA errors
</A></li>
	<LI>Next message: <A HREF="006245.html">b43 fatal DMA errors
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6246">[ date ]</a>
              <a href="thread.html#6246">[ thread ]</a>
              <a href="subject.html#6246">[ subject ]</a>
              <a href="author.html#6246">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
