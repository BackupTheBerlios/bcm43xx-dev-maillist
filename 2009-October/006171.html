<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [mmotm 2009-10-09-01-07] b43/wireless possible circular locking
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-October/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5Bmmotm%202009-10-09-01-07%5D%20b43/wireless%20possible%20circular%20locking&In-Reply-To=%3C4AD1EA65.3070805%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="006170.html">
   <LINK REL="Next"  HREF="006174.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[mmotm 2009-10-09-01-07] b43/wireless possible circular locking</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5Bmmotm%202009-10-09-01-07%5D%20b43/wireless%20possible%20circular%20locking&In-Reply-To=%3C4AD1EA65.3070805%40lwfinger.net%3E"
       TITLE="[mmotm 2009-10-09-01-07] b43/wireless possible circular locking">Larry.Finger at lwfinger.net
       </A><BR>
    <I>Sun Oct 11 16:23:33 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="006170.html">[mmotm 2009-10-09-01-07] b43/wireless possible circular locking
</A></li>
        <LI>Next message: <A HREF="006174.html">[PATCH] b43: Fix Bugzilla #14181 without introducing a new problem 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6171">[ date ]</a>
              <a href="thread.html#6171">[ thread ]</a>
              <a href="subject.html#6171">[ subject ]</a>
              <a href="author.html#6171">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 10/11/2009 04:51 AM, Johannes Berg wrote:
&gt;<i> On Sun, 2009-10-11 at 17:41 +0800, Dave Young wrote:
</I>&gt;&gt;<i> Hi,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I got lockdep warnings about possible circular lock with
</I>&gt;&gt;<i> b43 interface startup. It looks like a real problem.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> [   71.974542] wlan0: deauthenticating from 00:19:e0:db:24:de by local choice (reason=3)
</I>&gt;&gt;<i> [   72.004352] b43-phy0 debug: Removing Interface type 2
</I>&gt;&gt;<i> [   72.005431] 
</I>&gt;&gt;<i> [   72.005435] =======================================================
</I>&gt;&gt;<i> [   72.006168] [ INFO: possible circular locking dependency detected ]
</I>&gt;&gt;<i> [   72.006759] 2.6.32-rc3-mm1 #4
</I>&gt;&gt;<i> [   72.007047] -------------------------------------------------------
</I>&gt;&gt;<i> [   72.007617] ifconfig/2175 is trying to acquire lock:
</I>&gt;&gt;<i> [   72.007617]  (&amp;(&amp;rfkill-&gt;poll_work)-&gt;work){+.+...}, at: [&lt;c0239375&gt;] __cancel_work_timer+0x8c/0x18e
</I>&gt;&gt;<i> [   72.007617] 
</I>&gt;&gt;<i> [   72.007617] but task is already holding lock:
</I>&gt;&gt;<i> [   72.007617]  (&amp;wl-&gt;mutex){+.+.+.}, at: [&lt;f8fa5359&gt;] b43_op_stop+0x28/0x6a [b43]
</I>&gt;<i> 
</I>&gt;<i> I believe this is already taken care of by Larry.
</I>
Yes, I introduced this bug and fixed it. The latest wireless-testing
should have the fix. In addition, it is on its way to Linus through
DameM. Unfortunately, that fix has another bug that will not show up
in the logs. With it, it is impossible to turn the radio back on after
it is killed via the rfkill switch. A &quot;final&quot; (And I hope that is
true!) fix is out for testing; however, the OP for the bug that
started this whole chain only has limited access to the machine in
question.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="006170.html">[mmotm 2009-10-09-01-07] b43/wireless possible circular locking
</A></li>
	<LI>Next message: <A HREF="006174.html">[PATCH] b43: Fix Bugzilla #14181 without introducing a new problem 
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#6171">[ date ]</a>
              <a href="thread.html#6171">[ thread ]</a>
              <a href="subject.html#6171">[ subject ]</a>
              <a href="author.html#6171">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
