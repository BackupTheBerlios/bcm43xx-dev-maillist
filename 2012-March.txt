From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.0.1331727341.28966.bcm43xx-dev@lists.berlios.de>

-l  or  --ignore-whitespace
          Match  patterns  loosely,  in case tabs or spaces have been munged
in your files.  Any sequence of one or more blanks in the patch file matches
any sequence in
          the original file, and sequences of blanks at the ends of lines
are ignored.  Normal characters must still match exactly.  Each line of the
context must  still
          match a line in the original file.

Good luck
Mike

On 1/16/07, Asil Jinn <asil.jinn at gmail.com> wrote:
>
> This site it down for now.. atleast I cant connect to it
> ftp://lwfinger.dynalias.org/patches
>
> So i thought of copying and pasting the pci-e v2 patch below and try to
> patch it but I get 3 failed hunks (against 2.6.20-rc5).. I ran patch -p1 <
> pcie.patch.
>
> Yildirim
>
> 2007/1/16, Mike Zupan <hijinks at gmail.com >:
> >
> > v2 of the patch was not applied to rc5. the pci-e patch seems to be at
> > least the 4311 was listing in the bcm43xx_main.c
> >
> > Mike
> >
> > On 1/16/07, Asil Jinn <asil.jinn at gmail.com> wrote:
> > >
> > > I thought this patch was already applied to 2.6.20-rc5, but I guess I
> > > was wrong. I will also apply it and try it out on my system.
> > >
> > > Archlinux with kernel 2.6.20-rc5
> > > Dell 1490 wlan card (bcm4312)
> > > Dual core 2ghz
> > >
> > > Other questions:
> > > 1. Does the 2.6.20-rc5 kernel have the new PCI-E patch applied to it,
> > > or is it the old one?
> > > 2. Would trying the mm patches be better or stick with the mainline?
> > >
> > > Thanks
> > > Yildirim
> > >
> > > 2007/1/16, Mike Zupan <hijinks at gmail.com>:
> > > >
> > > >  This patch works great against 2.6.20-rc5. I am able to iwlist eth1
> > > > scan!
> > > >
> > > > I will try to associate and such when I get home
> > > >
> > > > Mike
> > > >
> > > > On 1/15/07, Larry Finger <larry.finger at lwfinger.net> wrote:
> > > > >
> > > > > Dave Maley wrote:
> > > > > >
> > > > > > Larry/Michale/John - This patch, applied to both 2.6.20-rc4 and
> > > > > the .17
> > > > > > linville FC6 test kernel, seems to get bcm43xx working reliably
> > > > > for me.
> > > > > > I'm currently running FC6 (x86) and the card has a 4311 chip
> > > > > > (mini-PCIE).
> > > > > >
> > > > > > The connection is painfully slow and I understand this is a
> > > > > separate
> > > > > > known issue.  But w/ this PCI-E interrupts patch I've had 100%
> > > > > success
> > > > > > associating w/ my AP,  and haven't dropped connection in well
> > > > > over 24
> > > > > > hours.
> > > > >
> > > > > Thanks for your report. The patch is clearly a good one. Now all
> > > > > that remains is for it to be sent
> > > > > upstream before 2.6.20 is released.
> > > > >
> > > > > Larry
> > > > >
> > > > > _______________________________________________
> > > > > Bcm43xx-dev mailing list
> > > > > Bcm43xx-dev at lists.berlios.de
> > > > > https://lists.berlios.de/mailman/listinfo/bcm43xx-dev
> > > > >
> > > >
> > > >
> > > > _______________________________________________
> > > > Bcm43xx-dev mailing list
> > > > Bcm43xx-dev at lists.berlios.de
> > > > https://lists.berlios.de/mailman/listinfo/bcm43xx-dev
> > > >
> > > >
> > > >
> > >
> >
>

------=_Part_127973_6408797.1168978616973
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

There is probably a reason its failing.. When you copy and paste it into a file you are using whitespaces and not tabs..<br><br>So if the patch is in the root of my kernel source this worked against 2.6.20-rc5 at least so I&#39;m guessing it should against 
<a href="http://2.6.19.1">2.6.19.1</a><br><br>patch -p1 -l &lt; file.patch<br><br>From the patch man page<br><br>-l&nbsp; or&nbsp; --ignore-whitespace<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Match&nbsp; patterns&nbsp; loosely,&nbsp; in case tabs or spaces have been munged in your files.&nbsp; Any sequence of one or more blanks in the patch file matches any sequence in
<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; the original file, and sequences of blanks at the ends of lines are ignored.&nbsp; Normal characters must still match exactly.&nbsp; Each line of the context must&nbsp; still<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; match a line in the original file.
<br><br>Good luck<br>Mike<br><br><div><span class="gmail_quote">On 1/16/07, <b class="gmail_sendername">Asil Jinn</b> &lt;<a href="mailto:asil.jinn at gmail.com">asil.jinn at gmail.com</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
This site it down for now.. atleast I cant connect to it<span class="q"><br>
<a href="ftp://lwfinger.dynalias.org/patches" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">ftp://lwfinger.dynalias.org/patches</a><br>
<br></span>
So i thought of copying and pasting the pci-e v2 patch below and try to
patch it but I get 3 failed hunks (against 2.6.20-rc5).. I ran patch -p1 &lt; pcie.patch.<div><span class="e" id="q_1102c7e8ad8bcd86_3"><br><br>Yildirim<br><br><div><span class="gmail_quote">2007/1/16, Mike Zupan &lt;<a href="mailto:hijinks at gmail.com" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">
hijinks at gmail.com
</a>&gt;:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">v2 of the patch was not applied to rc5. the pci-e patch seems to be at least the 4311 was listing in the bcm43xx_main.c
<br><span><br>Mike</span><div><span><br><br><div><span class="gmail_quote">On 1/16/07, <b class="gmail_sendername">Asil Jinn</b>
 &lt;<a href="mailto:asil.jinn at gmail.com" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">asil.jinn at gmail.com</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">

I thought this patch was already applied to 
2.6.20-rc5, but I guess I was wrong. I will also apply it and try it out on my system.<br><br>Archlinux with kernel 2.6.20-rc5 <br>Dell 1490 wlan card (bcm4312)<br>Dual core 2ghz
<br><br>Other questions:<br>1. Does the 2.6.20-rc5 kernel have the new PCI-E patch applied to it, or is it the old one?<br>2. Would trying the mm patches be better or stick with the mainline?<br><br>Thanks<br>Yildirim<br>



<br><div><span class="gmail_quote">2007/1/16, Mike Zupan &lt;<a href="mailto:hijinks at gmail.com" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">hijinks at gmail.com</a>&gt;:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">


<div><span>
This patch works great against 2.6.20-rc5. I am able to iwlist eth1 scan!<br><br>I will try to associate and such when I get home<br><span><br>Mike</span><div><span><br><br><div>
<span class="gmail_quote">On 1/15/07, <b class="gmail_sendername">Larry Finger
</b> &lt;<a href="mailto:larry.finger at lwfinger.net" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">larry.finger at lwfinger.net</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">




Dave Maley wrote:<br>&gt;<br>&gt; Larry/Michale/John - This patch, applied to both 2.6.20-rc4 and the .17<br>&gt; linville FC6 test kernel, seems to get bcm43xx working reliably for me.<br>&gt; I&#39;m currently running FC6 (x86) and the card has a 4311 chip
<br>&gt; (mini-PCIE).<br>&gt;<br>&gt; The connection is painfully slow and I understand this is a separate<br>&gt; known issue.&nbsp;&nbsp;But w/ this PCI-E interrupts patch I&#39;ve had 100% success<br>&gt; associating w/ my AP,&nbsp;&nbsp;and haven&#39;t dropped connection in well over 24
<br>&gt; hours.<br><br>Thanks for your report. The patch is clearly a good one. Now all that remains is for it to be sent<br>upstream before 2.6.20 is released.<br><br>Larry<br><br>_______________________________________________
<br>Bcm43xx-dev mailing list<br><a href="mailto:Bcm43xx-dev at lists.berlios.de" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">Bcm43xx-dev at lists.berlios.de</a><br><a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">



https://lists.berlios.de/mailman/listinfo/bcm43xx-dev
</a><br></blockquote></div><br>

</span></div><br></span></div>_______________________________________________<span><br>Bcm43xx-dev mailing list<br><a href="mailto:Bcm43xx-dev at lists.berlios.de" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">


Bcm43xx-dev at lists.berlios.de
</a><br><a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev" target="_blank" onclick="return top.js.OpenExtLink(window,event,this)">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</a><br><br><br></span></blockquote>



</div><br>

</blockquote></div><br>

</span></div></blockquote></div><br>

</span></div></blockquote></div><br>

------=_Part_127973_6408797.1168978616973--


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.1.1331727342.28966.bcm43xx-dev@lists.berlios.de>

supposed to be inserting the AP's actual SSID there, once it knows
what it is.

>
> When you connect to the AP's at Purdue with ndiswrapper, please send me the output of 'iwlist s'. I
> would like to see what the Windows driver and its MAC layer return.
>

I'm testing again just with my local access point, and when my SSID is
hidden, ndiswrapper is only able to connect with wpa_supplicant in
"ap_scan=2" mode.  If I use "ap_scan=1", then my access point never
shows up in any scans at all.

If I use "ap_scan=2", then it immediately associates with my hidden
SSID, and "iwlist eth1 scan" shows my AP, and it has the correct SSID
filled in.

Also of note, with bcm43xx, if I'm using my local AP, and set
ap_scan=2, then wait a few seconds, and switch back to ap_scan=1, I'm
able to associate.  In this case, my access point does appear, with a
correct SSID, in the scan output.  My interpretation of this is that
somehow, the call made by wpa_supplicant for ap_scan=2 causes the
correct SSID to get inserted in the scan cache, so that when I switch
back to ap_scan=1, it can match the SSID and connect to it.


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.2.1331727346.28966.bcm43xx-dev@lists.berlios.de>

to replace their current version.

Larry


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.3.1331727355.28966.bcm43xx-dev@lists.berlios.de>


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.4.1331727355.28966.bcm43xx-dev@lists.berlios.de>


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.5.1331727355.28966.bcm43xx-dev@lists.berlios.de>

...........

-------------------------------------tail -f /var/log/messages
-----------------

Jul  5 20:59:27 localhost kernel: bcm43xx driver
Jul  5 20:59:27 localhost kernel: ACPI: PCI Interrupt 0000:02:00.0[A] -> GSI
16 (level, low) -> IRQ 17
Jul  5 20:59:27 localhost kernel: bcm43xx: Chip ID 0x4311, rev 0x1
Jul  5 20:59:27 localhost kernel: bcm43xx: Number of cores: 4
Jul  5 20:59:27 localhost kernel: bcm43xx: Core 0: ID 0x800, rev 0x11,
vendor 0x4243
Jul  5 20:59:27 localhost kernel: bcm43xx: Core 1: ID 0x812, rev 0xa, vendor
0x4243
Jul  5 20:59:27 localhost kernel: bcm43xx: Core 2: ID 0x817, rev 0x3, vendor
0x4243
Jul  5 20:59:27 localhost kernel: bcm43xx: Core 3: ID 0x820, rev 0x1, vendor
0x4243
Jul  5 20:59:27 localhost kernel: bcm43xx: PHY connected
Jul  5 20:59:27 localhost kernel: bcm43xx: Detected PHY: Version: 4, Type 2,
Revision 8
Jul  5 20:59:27 localhost kernel: bcm43xx: Detected Radio: ID: 2205017f
(Manuf: 17f Ver: 2050 Rev: 2)
Jul  5 20:59:27 localhost kernel: bcm43xx: Radio turned off
Jul  5 20:59:27 localhost kernel: bcm43xx: Radio turned off
Jul  5 20:59:27 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 20:59:27 localhost kernel: bcm43xx: PHY connected
Jul  5 20:59:27 localhost kernel: bcm43xx: Microcode rev 0x127, pl 0xe
(2005-04-18  02:36:27)
Jul  5 20:59:27 localhost kernel: bcm43xx: Radio turned on
Jul  5 20:59:28 localhost kernel: bcm43xx: Chip initialized
Jul  5 20:59:28 localhost kernel: bcm43xx: 32-bit DMA initialized
Jul  5 20:59:28 localhost kernel: bcm43xx: Keys cleared
Jul  5 20:59:28 localhost kernel: bcm43xx: Selected 802.11 core (phytype 2)
Jul  5 20:59:28 localhost kernel: ADDRCONF(NETDEV_UP): eth0: link is not
ready
Jul  5 20:59:32 localhost avahi-daemon[3287]: New relevant interface
eth0.IPv4 for mDNS.
Jul  5 20:59:32 localhost avahi-daemon[3287]: Joining mDNS multicast group
on interface eth0.IPv4 with address 192.168.2.102.
Jul  5 20:59:32 localhost avahi-daemon[3287]: Registering new address record
for 192.168.2.102 on eth0.
Jul  5 20:59:45 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 20:59:45 localhost kernel: ADDRCONF(NETDEV_CHANGE): eth0: link
becomes ready
Jul  5 20:59:47 localhost avahi-daemon[3287]: New relevant interface
eth0.IPv6 for mDNS.
Jul  5 20:59:47 localhost avahi-daemon[3287]: Joining mDNS multicast group
on interface eth0.IPv6 with address fe80::21a:73ff:fe5c:4189.
Jul  5 20:59:47 localhost avahi-daemon[3287]: Registering new address record
for fe80::21a:73ff:fe5c:4189 on eth0.
Jul  5 20:59:50 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:23 localhost last message repeated 8 times
Jul  5 21:00:27 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:27 localhost last message repeated 3 times
Jul  5 21:00:27 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:31 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:31 localhost last message repeated 4 times
Jul  5 21:00:31 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:35 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:35 localhost last message repeated 4 times
Jul  5 21:00:35 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:39 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:39 localhost last message repeated 4 times
Jul  5 21:00:39 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:43 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:43 localhost last message repeated 4 times
Jul  5 21:00:44 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:47 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:47 localhost last message repeated 4 times
Jul  5 21:00:48 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:51 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:51 localhost last message repeated 4 times
Jul  5 21:00:52 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:00:56 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0
Jul  5 21:00:56 localhost last message repeated 4 times
Jul  5 21:00:56 localhost kernel: SoftMAC: Open Authentication completed
with 00:17:9a:61:f9:03
Jul  5 21:01:00 localhost kernel: bcm43xx: set security called, .level = 0,
.enabled = 0, .encrypt = 0






-Jenny





On 7/5/07, Tony Vroon <tony at vroon.org> wrote:
>
> -----BEGIN PGP SIGNED MESSAGE-----
> Hash: SHA256
>
> jenny tc wrote:
> I ran wpa supplicant as  " /usr/sbin/wpa_supplicant  -c
> > wireless.con -i eth0 -D wext -B" . It's not reporting any error.
>
> Could you try adding -dd to the command line in order to get some
> debugging output? Perhaps pipe all that output into a file using &>
> wpa_supplicant.output.txt and then attach that to your follow-up mail.
>
> That will show us whether you association is timing out, or whether the
> key setup is failing because you don't have the necessary key handling
> in SoftMAC. (Or perhaps something else is going wrong, but those two
> seem most common)
>
> Regards,
> Tony V.
> -----BEGIN PGP SIGNATURE-----
> Version: GnuPG v2.0.4 (GNU/Linux)
> Comment: Using GnuPG with Mozilla - http://enigmail.mozdev.org
>
> iD8DBQFGjQmlp5vW4rUFj5oRCJ8vAKCJ0kCdYiAAzuEcAo+2ISNOg9HgJgCePYI8
> GXP0siBuTi4eIB6HwrBdXpg=
> =6Cb0
> -----END PGP SIGNATURE-----
>

------=_Part_110506_4083612.1183649775168
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

Hai ,<br><br>as requested i&#39;m attaching the dmesg output<br><br>the sequence of commands that producde this output are<br>#/sbin/modprobe bcm43xx<br>#/sbin/ifconfig eth0 <a href="http://192.168.2.102/22">192.168.2.102/22
</a><br>#/sbin/iwconfig eth0 essid HCAC<br>#/sbin/iwlist scanning<br>#/usr/sbin/wpa_supplicant&nbsp;&nbsp;-c wireless.conf&nbsp; -i eth0&nbsp; -D wext&nbsp; -B<br>#ping <a href="http://192.168.1.5">192.168.1.5</a><br>From <a href="http://192.168.2.102">
192.168.2.102</a> icmp_seq=1 Destination Host Unreachable<br>From <a href="http://192.168.2.102">192.168.2.102</a> icmp_seq=2 Destination Host Unreachable<br>From <a href="http://192.168.2.102">192.168.2.102</a> icmp_seq=3 Destination Host Unreachable
<br>...........<br><br>-------------------------------------<span style="font-style: italic;">tail -f /var/log/messages</span>-----------------<br><br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx driver<br>Jul&nbsp; 5 20:59:27 localhost kernel: ACPI: PCI Interrupt 0000:02:
00.0[A] -&gt; GSI 16 (level, low) -&gt; IRQ 17<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Chip ID 0x4311, rev 0x1<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Number of cores: 4<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Core 0: ID 0x800, rev 0x11, vendor 0x4243
<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Core 1: ID 0x812, rev 0xa, vendor 0x4243<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Core 2: ID 0x817, rev 0x3, vendor 0x4243<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Core 3: ID 0x820, rev 0x1, vendor 0x4243
<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: PHY connected<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Detected PHY: Version: 4, Type 2, Revision 8<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Detected Radio: ID: 2205017f (Manuf: 17f Ver: 2050 Rev: 2)
<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Radio turned off<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Radio turned off<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0
<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: PHY connected<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Microcode rev 0x127, pl 0xe (2005-04-18&nbsp; 02:36:27)<br>Jul&nbsp; 5 20:59:27 localhost kernel: bcm43xx: Radio turned on<br>
Jul&nbsp; 5 20:59:28 localhost kernel: bcm43xx: Chip initialized<br>Jul&nbsp; 5 20:59:28 localhost kernel: bcm43xx: 32-bit DMA initialized<br>Jul&nbsp; 5 20:59:28 localhost kernel: bcm43xx: Keys cleared<br>Jul&nbsp; 5 20:59:28 localhost kernel: bcm43xx: Selected 
802.11 core (phytype 2)<br>Jul&nbsp; 5 20:59:28 localhost kernel: ADDRCONF(NETDEV_UP): eth0: link is not ready<br>Jul&nbsp; 5 20:59:32 localhost avahi-daemon[3287]: New relevant interface eth0.IPv4 for mDNS.<br>Jul&nbsp; 5 20:59:32 localhost avahi-daemon[3287]: Joining mDNS multicast group on interface 
eth0.IPv4 with address <a href="http://192.168.2.102">192.168.2.102</a>.<br>Jul&nbsp; 5 20:59:32 localhost avahi-daemon[3287]: Registering new address record for <a href="http://192.168.2.102">192.168.2.102</a> on eth0.<br>Jul&nbsp; 5 20:59:45 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03
<br>Jul&nbsp; 5 20:59:45 localhost kernel: ADDRCONF(NETDEV_CHANGE): eth0: link becomes ready<br>Jul&nbsp; 5 20:59:47 localhost avahi-daemon[3287]: New relevant interface eth0.IPv6 for mDNS.<br>Jul&nbsp; 5 20:59:47 localhost avahi-daemon[3287]: Joining mDNS multicast group on interface 
eth0.IPv6 with address fe80::21a:73ff:fe5c:4189.<br>Jul&nbsp; 5 20:59:47 localhost avahi-daemon[3287]: Registering new address record for fe80::21a:73ff:fe5c:4189 on eth0.<br>Jul&nbsp; 5 20:59:50 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03
<br>Jul&nbsp; 5 21:00:23 localhost last message repeated 8 times<br>Jul&nbsp; 5 21:00:27 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:27 localhost last message repeated 3 times
<br>Jul&nbsp; 5 21:00:27 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:00:31 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:31 localhost last message repeated 4 times
<br>Jul&nbsp; 5 21:00:31 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:00:35 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:35 localhost last message repeated 4 times
<br>Jul&nbsp; 5 21:00:35 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:00:39 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:39 localhost last message repeated 4 times
<br>Jul&nbsp; 5 21:00:39 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:00:43 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:43 localhost last message repeated 4 times
<br>Jul&nbsp; 5 21:00:44 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:00:47 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:47 localhost last message repeated 4 times
<br>Jul&nbsp; 5 21:00:48 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:00:51 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:51 localhost last message repeated 4 times
<br>Jul&nbsp; 5 21:00:52 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:00:56 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br>Jul&nbsp; 5 21:00:56 localhost last message repeated 4 times
<br>Jul&nbsp; 5 21:00:56 localhost kernel: SoftMAC: Open Authentication completed with 00:17:9a:61:f9:03<br>Jul&nbsp; 5 21:01:00 localhost kernel: bcm43xx: set security called, .level = 0, .enabled = 0, .encrypt = 0<br><br><br><br>
<br><br><br>-Jenny<br><br><br><br><br><br><div><span class="gmail_quote">On 7/5/07, <b class="gmail_sendername">Tony Vroon</b> &lt;<a href="mailto:tony at vroon.org">tony at vroon.org</a>&gt; wrote:</span><blockquote class="gmail_quote" style="border-left: 1px solid rgb(204, 204, 204); margin: 0pt 0pt 0pt 0.8ex; padding-left: 1ex;">
-----BEGIN PGP SIGNED MESSAGE-----<br>Hash: SHA256<br><br>jenny tc wrote:<br>I ran wpa supplicant as&nbsp;&nbsp;&quot; /usr/sbin/wpa_supplicant&nbsp;&nbsp;-c<br>&gt; wireless.con -i eth0 -D wext -B&quot; . It&#39;s not reporting any error.<br>
<br>Could you try adding -dd to the command line in order to get some<br>debugging output? Perhaps pipe all that output into a file using &amp;&gt;<br>wpa_supplicant.output.txt and then attach that to your follow-up mail.
<br><br>That will show us whether you association is timing out, or whether the<br>key setup is failing because you don&#39;t have the necessary key handling<br>in SoftMAC. (Or perhaps something else is going wrong, but those two
<br>seem most common)<br><br>Regards,<br>Tony V.<br>-----BEGIN PGP SIGNATURE-----<br>Version: GnuPG v2.0.4 (GNU/Linux)<br>Comment: Using GnuPG with Mozilla - <a href="http://enigmail.mozdev.org">http://enigmail.mozdev.org
</a><br><br>iD8DBQFGjQmlp5vW4rUFj5oRCJ8vAKCJ0kCdYiAAzuEcAo+2ISNOg9HgJgCePYI8<br>GXP0siBuTi4eIB6HwrBdXpg=<br>=6Cb0<br>-----END PGP SIGNATURE-----<br></blockquote></div><br>

------=_Part_110506_4083612.1183649775168--

------=_Part_110505_15119402.1183649775168
Content-Type: application/octet-stream; name=junk_log
Content-Transfer-Encoding: base64
X-Attachment-Id: f_f3ree7zd
Content-Disposition: attachment; filename="junk_log"

Ckp1bCAgNSAyMDo1OToyNyBsb2NhbGhvc3Qga2VybmVsOiBiY200M3h4IGRyaXZlcgpKdWwgIDUg
MjA6NTk6MjcgbG9jYWxob3N0IGtlcm5lbDogQUNQSTogUENJIEludGVycnVwdCAwMDAwOjAyOjAw
LjBbQV0gLT4gR1NJIDE2IChsZXZlbCwgbG93KSAtPiBJUlEgMTcKSnVsICA1IDIwOjU5OjI3IGxv
Y2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IENoaXAgSUQgMHg0MzExLCByZXYgMHgxCkp1bCAgNSAy
MDo1OToyNyBsb2NhbGhvc3Qga2VybmVsOiBiY200M3h4OiBOdW1iZXIgb2YgY29yZXM6IDQKSnVs
ICA1IDIwOjU5OjI3IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IENvcmUgMDogSUQgMHg4MDAs
IHJldiAweDExLCB2ZW5kb3IgMHg0MjQzCkp1bCAgNSAyMDo1OToyNyBsb2NhbGhvc3Qga2VybmVs
OiBiY200M3h4OiBDb3JlIDE6IElEIDB4ODEyLCByZXYgMHhhLCB2ZW5kb3IgMHg0MjQzCkp1bCAg
NSAyMDo1OToyNyBsb2NhbGhvc3Qga2VybmVsOiBiY200M3h4OiBDb3JlIDI6IElEIDB4ODE3LCBy
ZXYgMHgzLCB2ZW5kb3IgMHg0MjQzCkp1bCAgNSAyMDo1OToyNyBsb2NhbGhvc3Qga2VybmVsOiBi
Y200M3h4OiBDb3JlIDM6IElEIDB4ODIwLCByZXYgMHgxLCB2ZW5kb3IgMHg0MjQzCkp1bCAgNSAy
MDo1OToyNyBsb2NhbGhvc3Qga2VybmVsOiBiY200M3h4OiBQSFkgY29ubmVjdGVkCkp1bCAgNSAy
MDo1OToyNyBsb2NhbGhvc3Qga2VybmVsOiBiY200M3h4OiBEZXRlY3RlZCBQSFk6IFZlcnNpb246
IDQsIFR5cGUgMiwgUmV2aXNpb24gOApKdWwgIDUgMjA6NTk6MjcgbG9jYWxob3N0IGtlcm5lbDog
YmNtNDN4eDogRGV0ZWN0ZWQgUmFkaW86IElEOiAyMjA1MDE3ZiAoTWFudWY6IDE3ZiBWZXI6IDIw
NTAgUmV2OiAyKQpKdWwgIDUgMjA6NTk6MjcgbG9jYWxob3N0IGtlcm5lbDogYmNtNDN4eDogUmFk
aW8gdHVybmVkIG9mZgpKdWwgIDUgMjA6NTk6MjcgbG9jYWxob3N0IGtlcm5lbDogYmNtNDN4eDog
UmFkaW8gdHVybmVkIG9mZgpKdWwgIDUgMjA6NTk6MjcgbG9jYWxob3N0IGtlcm5lbDogYmNtNDN4
eDogc2V0IHNlY3VyaXR5IGNhbGxlZCwgLmxldmVsID0gMCwgLmVuYWJsZWQgPSAwLCAuZW5jcnlw
dCA9IDAKSnVsICA1IDIwOjU5OjI3IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IFBIWSBjb25u
ZWN0ZWQKSnVsICA1IDIwOjU5OjI3IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IE1pY3JvY29k
ZSByZXYgMHgxMjcsIHBsIDB4ZSAoMjAwNS0wNC0xOCAgMDI6MzY6MjcpCkp1bCAgNSAyMDo1OToy
NyBsb2NhbGhvc3Qga2VybmVsOiBiY200M3h4OiBSYWRpbyB0dXJuZWQgb24KSnVsICA1IDIwOjU5
OjI4IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IENoaXAgaW5pdGlhbGl6ZWQKSnVsICA1IDIw
OjU5OjI4IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IDMyLWJpdCBETUEgaW5pdGlhbGl6ZWQK
SnVsICA1IDIwOjU5OjI4IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IEtleXMgY2xlYXJlZApK
dWwgIDUgMjA6NTk6MjggbG9jYWxob3N0IGtlcm5lbDogYmNtNDN4eDogU2VsZWN0ZWQgODAyLjEx
IGNvcmUgKHBoeXR5cGUgMikKSnVsICA1IDIwOjU5OjI4IGxvY2FsaG9zdCBrZXJuZWw6IEFERFJD
T05GKE5FVERFVl9VUCk6IGV0aDA6IGxpbmsgaXMgbm90IHJlYWR5Ckp1bCAgNSAyMDo1OTozMiBs
b2NhbGhvc3QgYXZhaGktZGFlbW9uWzMyODddOiBOZXcgcmVsZXZhbnQgaW50ZXJmYWNlIGV0aDAu
SVB2NCBmb3IgbUROUy4KSnVsICA1IDIwOjU5OjMyIGxvY2FsaG9zdCBhdmFoaS1kYWVtb25bMzI4
N106IEpvaW5pbmcgbUROUyBtdWx0aWNhc3QgZ3JvdXAgb24gaW50ZXJmYWNlIGV0aDAuSVB2NCB3
aXRoIGFkZHJlc3MgMTkyLjE2OC4yLjEwMi4KSnVsICA1IDIwOjU5OjMyIGxvY2FsaG9zdCBhdmFo
aS1kYWVtb25bMzI4N106IFJlZ2lzdGVyaW5nIG5ldyBhZGRyZXNzIHJlY29yZCBmb3IgMTkyLjE2
OC4yLjEwMiBvbiBldGgwLgpKdWwgIDUgMjA6NTk6NDUgbG9jYWxob3N0IGtlcm5lbDogU29mdE1B
QzogT3BlbiBBdXRoZW50aWNhdGlvbiBjb21wbGV0ZWQgd2l0aCAwMDoxNzo5YTo2MTpmOTowMwpK
dWwgIDUgMjA6NTk6NDUgbG9jYWxob3N0IGtlcm5lbDogQUREUkNPTkYoTkVUREVWX0NIQU5HRSk6
IGV0aDA6IGxpbmsgYmVjb21lcyByZWFkeQpKdWwgIDUgMjA6NTk6NDcgbG9jYWxob3N0IGF2YWhp
LWRhZW1vblszMjg3XTogTmV3IHJlbGV2YW50IGludGVyZmFjZSBldGgwLklQdjYgZm9yIG1ETlMu
Ckp1bCAgNSAyMDo1OTo0NyBsb2NhbGhvc3QgYXZhaGktZGFlbW9uWzMyODddOiBKb2luaW5nIG1E
TlMgbXVsdGljYXN0IGdyb3VwIG9uIGludGVyZmFjZSBldGgwLklQdjYgd2l0aCBhZGRyZXNzIGZl
ODA6OjIxYTo3M2ZmOmZlNWM6NDE4OS4KSnVsICA1IDIwOjU5OjQ3IGxvY2FsaG9zdCBhdmFoaS1k
YWVtb25bMzI4N106IFJlZ2lzdGVyaW5nIG5ldyBhZGRyZXNzIHJlY29yZCBmb3IgZmU4MDo6MjFh
OjczZmY6ZmU1Yzo0MTg5IG9uIGV0aDAuCkp1bCAgNSAyMDo1OTo1MCBsb2NhbGhvc3Qga2VybmVs
OiBTb2Z0TUFDOiBPcGVuIEF1dGhlbnRpY2F0aW9uIGNvbXBsZXRlZCB3aXRoIDAwOjE3OjlhOjYx
OmY5OjAzCkp1bCAgNSAyMTowMDoyMyBsb2NhbGhvc3QgbGFzdCBtZXNzYWdlIHJlcGVhdGVkIDgg
dGltZXMKSnVsICA1IDIxOjAwOjI3IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IHNldCBzZWN1
cml0eSBjYWxsZWQsIC5sZXZlbCA9IDAsIC5lbmFibGVkID0gMCwgLmVuY3J5cHQgPSAwCkp1bCAg
NSAyMTowMDoyNyBsb2NhbGhvc3QgbGFzdCBtZXNzYWdlIHJlcGVhdGVkIDMgdGltZXMKSnVsICA1
IDIxOjAwOjI3IGxvY2FsaG9zdCBrZXJuZWw6IFNvZnRNQUM6IE9wZW4gQXV0aGVudGljYXRpb24g
Y29tcGxldGVkIHdpdGggMDA6MTc6OWE6NjE6Zjk6MDMKSnVsICA1IDIxOjAwOjMxIGxvY2FsaG9z
dCBrZXJuZWw6IGJjbTQzeHg6IHNldCBzZWN1cml0eSBjYWxsZWQsIC5sZXZlbCA9IDAsIC5lbmFi
bGVkID0gMCwgLmVuY3J5cHQgPSAwCkp1bCAgNSAyMTowMDozMSBsb2NhbGhvc3QgbGFzdCBtZXNz
YWdlIHJlcGVhdGVkIDQgdGltZXMKSnVsICA1IDIxOjAwOjMxIGxvY2FsaG9zdCBrZXJuZWw6IFNv
ZnRNQUM6IE9wZW4gQXV0aGVudGljYXRpb24gY29tcGxldGVkIHdpdGggMDA6MTc6OWE6NjE6Zjk6
MDMKSnVsICA1IDIxOjAwOjM1IGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IHNldCBzZWN1cml0
eSBjYWxsZWQsIC5sZXZlbCA9IDAsIC5lbmFibGVkID0gMCwgLmVuY3J5cHQgPSAwCkp1bCAgNSAy
MTowMDozNSBsb2NhbGhvc3QgbGFzdCBtZXNzYWdlIHJlcGVhdGVkIDQgdGltZXMKSnVsICA1IDIx
OjAwOjM1IGxvY2FsaG9zdCBrZXJuZWw6IFNvZnRNQUM6IE9wZW4gQXV0aGVudGljYXRpb24gY29t
cGxldGVkIHdpdGggMDA6MTc6OWE6NjE6Zjk6MDMKSnVsICA1IDIxOjAwOjM5IGxvY2FsaG9zdCBr
ZXJuZWw6IGJjbTQzeHg6IHNldCBzZWN1cml0eSBjYWxsZWQsIC5sZXZlbCA9IDAsIC5lbmFibGVk
ID0gMCwgLmVuY3J5cHQgPSAwCkp1bCAgNSAyMTowMDozOSBsb2NhbGhvc3QgbGFzdCBtZXNzYWdl
IHJlcGVhdGVkIDQgdGltZXMKSnVsICA1IDIxOjAwOjM5IGxvY2FsaG9zdCBrZXJuZWw6IFNvZnRN
QUM6IE9wZW4gQXV0aGVudGljYXRpb24gY29tcGxldGVkIHdpdGggMDA6MTc6OWE6NjE6Zjk6MDMK
SnVsICA1IDIxOjAwOjQzIGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IHNldCBzZWN1cml0eSBj
YWxsZWQsIC5sZXZlbCA9IDAsIC5lbmFibGVkID0gMCwgLmVuY3J5cHQgPSAwCkp1bCAgNSAyMTow
MDo0MyBsb2NhbGhvc3QgbGFzdCBtZXNzYWdlIHJlcGVhdGVkIDQgdGltZXMKSnVsICA1IDIxOjAw
OjQ0IGxvY2FsaG9zdCBrZXJuZWw6IFNvZnRNQUM6IE9wZW4gQXV0aGVudGljYXRpb24gY29tcGxl
dGVkIHdpdGggMDA6MTc6OWE6NjE6Zjk6MDMKSnVsICA1IDIxOjAwOjQ3IGxvY2FsaG9zdCBrZXJu
ZWw6IGJjbTQzeHg6IHNldCBzZWN1cml0eSBjYWxsZWQsIC5sZXZlbCA9IDAsIC5lbmFibGVkID0g
MCwgLmVuY3J5cHQgPSAwCkp1bCAgNSAyMTowMDo0NyBsb2NhbGhvc3QgbGFzdCBtZXNzYWdlIHJl
cGVhdGVkIDQgdGltZXMKSnVsICA1IDIxOjAwOjQ4IGxvY2FsaG9zdCBrZXJuZWw6IFNvZnRNQUM6
IE9wZW4gQXV0aGVudGljYXRpb24gY29tcGxldGVkIHdpdGggMDA6MTc6OWE6NjE6Zjk6MDMKSnVs
ICA1IDIxOjAwOjUxIGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IHNldCBzZWN1cml0eSBjYWxs
ZWQsIC5sZXZlbCA9IDAsIC5lbmFibGVkID0gMCwgLmVuY3J5cHQgPSAwCkp1bCAgNSAyMTowMDo1
MSBsb2NhbGhvc3QgbGFzdCBtZXNzYWdlIHJlcGVhdGVkIDQgdGltZXMKSnVsICA1IDIxOjAwOjUy
IGxvY2FsaG9zdCBrZXJuZWw6IFNvZnRNQUM6IE9wZW4gQXV0aGVudGljYXRpb24gY29tcGxldGVk
IHdpdGggMDA6MTc6OWE6NjE6Zjk6MDMKSnVsICA1IDIxOjAwOjU2IGxvY2FsaG9zdCBrZXJuZWw6
IGJjbTQzeHg6IHNldCBzZWN1cml0eSBjYWxsZWQsIC5sZXZlbCA9IDAsIC5lbmFibGVkID0gMCwg
LmVuY3J5cHQgPSAwCkp1bCAgNSAyMTowMDo1NiBsb2NhbGhvc3QgbGFzdCBtZXNzYWdlIHJlcGVh
dGVkIDQgdGltZXMKSnVsICA1IDIxOjAwOjU2IGxvY2FsaG9zdCBrZXJuZWw6IFNvZnRNQUM6IE9w
ZW4gQXV0aGVudGljYXRpb24gY29tcGxldGVkIHdpdGggMDA6MTc6OWE6NjE6Zjk6MDMKSnVsICA1
IDIxOjAxOjAwIGxvY2FsaG9zdCBrZXJuZWw6IGJjbTQzeHg6IHNldCBzZWN1cml0eSBjYWxsZWQs
IC5sZXZlbCA9IDAsIC5lbmFibGVkID0gMCwgLmVuY3J5cHQgPSAwCg==
------=_Part_110505_15119402.1183649775168--


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.6.1331727360.28966.bcm43xx-dev@lists.berlios.de>

be made easier in the future. Without broadcom releasing drivers or source,
will we always have to use fwcutter?

Again, thank you all your help, and i will reply if i have any problems with
the installation steps you mentioned earlier.

-Rob


On 8/7/07, Larry Finger <larry.finger at lwfinger.net> wrote:
>
> Rob Lewis wrote:
> > Pavel,
> >
> > Thank you for your response.
> >
> > As far as flashing ROM, apologies there, i meant something else!
> >
> > As far as the steps i take to get the native driver to work,
> >
> > 1) Use fwcutter to find out firmware revision, if v4 patch kernel enable
> > 4301, if v3 enable bcm4311 driver.
> > 2) Use normally?
> >
> > I will be looking for 'tutorials online' as to how to do this, though if
> > you can point me to something you can recommend, that would be great.
> >
> > Again, thank you for the help,
> >   -Rob
>
> Unless you really want to go through the hassle of patching kernels, I
> would suggest using the
> bcm43xx driver in the mainstream kernel. To get V3 firmware, you should do
> the following:
>
> 1. Download the shell script from
> ftp://lwfinger.dynalias.org/patches/bcm43xx_get_firmware_V3.
>
> 2. Use the command 'which bcm43xx-fwcutter' to verify that you have this
> utility. If not, you need
> to use "emerge", "apt-get", or whatever means your distro employs.
>
> 3. Issue the command "sudo sh bcm43xx_get_firmware_V3". This script will
> download the file
> containing the firmware, unpack it and store it in /lib/firmware.
>
> 4. Configure your kernel for the ieee80211, ieee80211_softmac, and bcm43xx
> modules.
>
> Larry
>
>

------=_Part_87935_29446480.1186500848477
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: 7bit
Content-Disposition: inline

<div>Larry,</div>
<div>&nbsp;</div>
<div>Very helpful, i will give this a try after work and let you know how it goes, though, im pretty sure you know it will work!</div>
<div>&nbsp;</div>
<div>Hopefully this native driver will support Monitor mode, as the ndiswrapper does not.</div>
<div>From a development standpoint, im curious as to how this installation could be made easier in the future. Without broadcom releasing drivers or source, will we always have to use fwcutter?</div>
<div>&nbsp;</div>
<div>Again, thank you all your help, and i will reply if i have any problems with the installation steps you mentioned earlier.<br>&nbsp;</div>
<div>-Rob<br>&nbsp;</div><br>
<div><span class="gmail_quote">On 8/7/07, <b class="gmail_sendername">Larry Finger</b> &lt;<a href="mailto:larry.finger at lwfinger.net">larry.finger at lwfinger.net</a>&gt; wrote:</span>
<blockquote class="gmail_quote" style="PADDING-LEFT: 1ex; MARGIN: 0px 0px 0px 0.8ex; BORDER-LEFT: #ccc 1px solid">Rob Lewis wrote:<br>&gt; Pavel,<br>&gt;<br>&gt; Thank you for your response.<br>&gt;<br>&gt; As far as flashing ROM, apologies there, i meant something else!
<br>&gt;<br>&gt; As far as the steps i take to get the native driver to work,<br>&gt;<br>&gt; 1) Use fwcutter to find out firmware revision, if v4 patch kernel enable<br>&gt; 4301, if v3 enable bcm4311 driver.<br>&gt; 2) Use normally?
<br>&gt;<br>&gt; I will be looking for &#39;tutorials online&#39; as to how to do this, though if<br>&gt; you can point me to something you can recommend, that would be great.<br>&gt;<br>&gt; Again, thank you for the help,
<br>&gt;&nbsp;&nbsp; -Rob<br><br>Unless you really want to go through the hassle of patching kernels, I would suggest using the<br>bcm43xx driver in the mainstream kernel. To get V3 firmware, you should do the following:<br><br>1. Download the shell script from 
<a href="ftp://lwfinger.dynalias.org/patches/bcm43xx_get_firmware_V3">ftp://lwfinger.dynalias.org/patches/bcm43xx_get_firmware_V3</a>.<br><br>2. Use the command &#39;which bcm43xx-fwcutter&#39; to verify that you have this utility. If not, you need
<br>to use &quot;emerge&quot;, &quot;apt-get&quot;, or whatever means your distro employs.<br><br>3. Issue the command &quot;sudo sh bcm43xx_get_firmware_V3&quot;. This script will download the file<br>containing the firmware, unpack it and store it in /lib/firmware.
<br><br>4. Configure your kernel for the ieee80211, ieee80211_softmac, and bcm43xx modules.<br><br>Larry<br><br></blockquote></div><br>

------=_Part_87935_29446480.1186500848477--


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.7.1331727363.28966.bcm43xx-dev@lists.berlios.de>

then probe requests are required to be directed to the BSSID of
the AP to be answered by the microcode, but this not interesting
because we don't support probe request offload anyway.

This patch removes the IEEE80211_CONF_SSID_HIDDEN use from
b43legacy.

Signed-off-by: Johannes Berg <johannes at sipsolutions.net>
Signed-off-by: Larry Finger <larry.finger at lwfinger.net>
---

 drivers/net/wireless/b43legacy/main.c |   12 ------------
 1 file changed, 12 deletions(-)

Index: wireless-dev/drivers/net/wireless/b43legacy/main.c
===================================================================
--- wireless-dev.orig/drivers/net/wireless/b43legacy/main.c
+++ wireless-dev/drivers/net/wireless/b43legacy/main.c
@@ -2650,18 +2650,6 @@ static int b43legacy_dev_config(struct i
 		}
 	}
 
-	/* Hide/Show the SSID (AP mode only). */
-	if (conf->flags & IEEE80211_CONF_SSID_HIDDEN)
-		b43legacy_write32(dev, B43legacy_MMIO_STATUS_BITFIELD,
-				  b43legacy_read32(dev,
-				  B43legacy_MMIO_STATUS_BITFIELD)
-				  | B43legacy_SBF_NO_SSID_BCAST);
-	else
-		b43legacy_write32(dev, B43legacy_MMIO_STATUS_BITFIELD,
-				  b43legacy_read32(dev,
-				  B43legacy_MMIO_STATUS_BITFIELD)
-				  & ~B43legacy_SBF_NO_SSID_BCAST);
-
 	/* Antennas for RX and management frame TX. */
 	b43legacy_mgmtframe_txantenna(dev, antenna_tx);
 


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.8.1331727365.28966.bcm43xx-dev@lists.berlios.de>

then probe requests are required to be directed to the BSSID of
the AP to be answered by the microcode, but this not interesting
because we don't support probe request offload anyway.

This patch removes the IEEE80211_CONF_SSID_HIDDEN use from
b43legacy.

Signed-off-by: Johannes Berg <johannes at sipsolutions.net>
Signed-off-by: Larry Finger <larry.finger at lwfinger.net>
---

John,

I don't know if this patch made it to your inbox. If not,
please apply this one.

Larry


 drivers/net/wireless/b43legacy/main.c |   12 ------------
 1 file changed, 12 deletions(-)

Index: wireless-dev/drivers/net/wireless/b43legacy/main.c
===================================================================
--- wireless-dev.orig/drivers/net/wireless/b43legacy/main.c
+++ wireless-dev/drivers/net/wireless/b43legacy/main.c
@@ -2650,18 +2650,6 @@ static int b43legacy_dev_config(struct i
 		}
 	}
 
-	/* Hide/Show the SSID (AP mode only). */
-	if (conf->flags & IEEE80211_CONF_SSID_HIDDEN)
-		b43legacy_write32(dev, B43legacy_MMIO_STATUS_BITFIELD,
-				  b43legacy_read32(dev,
-				  B43legacy_MMIO_STATUS_BITFIELD)
-				  | B43legacy_SBF_NO_SSID_BCAST);
-	else
-		b43legacy_write32(dev, B43legacy_MMIO_STATUS_BITFIELD,
-				  b43legacy_read32(dev,
-				  B43legacy_MMIO_STATUS_BITFIELD)
-				  & ~B43legacy_SBF_NO_SSID_BCAST);
-
 	/* Antennas for RX and management frame TX. */
 	b43legacy_mgmtframe_txantenna(dev, antenna_tx);
 


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.9.1331727365.28966.bcm43xx-dev@lists.berlios.de>

"Administrator Settings". You will need to enter the root password. In the window that comes up,
select "System" and "/etc/sysconfig Editor". In the window that opens, click on the + next to
System, and the one next to Kernel. Then select "INITRD MODULES". In the window on the right-hand
side, add libata and scsi_mod to the list. Press the "Finish" button and close all other windows.
Change directory to your kernel source and issue a "sudo /sbin/mkinitrd", which should remake the
necessary part. It should boot after that.

Larry


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.10.1331727368.28966.bcm43xx-dev@lists.berlios.de>

thanks for helping,
regards 
ruggiero

-- 
Io utilizzo la versione gratuita di SPAMfighter per utenti privati. Sino ad=
 ora
 ha rimosso 815 mail spam. 
 Gli utenti paganti non hanno questo messaggio nelle loro email .
 Prova gratuitamente SPAMfighter qui:http://www.spamfighter.com/lit

------=_NextPart_000_000F_01C82180.8AA6D920
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC =22-//W3C//DTD HTML 4.0 Transitional//EN=22>
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D=22text/html; charset=3Diso-8859-1=22>
<META content=3D=22MSHTML 6.00.2900.3199=22 name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV>&gt; What is the output from a 'dmesg | grep bcm' command=3F In addition=
, 
please send the output of 'iwlist<BR>&gt; scan'.<BR>&gt; <BR>&gt; Larry</DI=
V>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>here it's the output of what u 
requested</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><A 
href=3D=22mailto:ruggiero at ruggiero-laptop:~$=22>ruggiero at ruggiero-laptop:~$</A> s=
udo 
iwlist scan<BR>lo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Interface doesn=
't 
support scanning.</DIV>
<DIV>&nbsp;</DIV>
<DIV>eth0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Interface doesn't support 
scanning.</DIV>
<DIV>&nbsp;</DIV>
<DIV>eth1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Scan completed 
:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cell 01 - Addre=
ss: 
00:0C:41:19:2D:C1<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ESSID:=22&lt;hidden&gt;=22<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Protocol:IEEE 
802.11b<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Mode:Master<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Frequency:2.462 GHz (Channel 
11)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Encryption 
key:on<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 
Mb/s<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Quality=3D98/100&nbsp; Signal level=3D-42 dBm&nbsp; Noise level=3D-256 
dBm<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Extra: Last beacon: 717ms ago</DIV>
<DIV>&nbsp;</DIV>
<DIV><A 
href=3D=22mailto:ruggiero at ruggiero-laptop:~$=22>ruggiero at ruggiero-laptop:~$</A> 
dmesg|grep bcm<BR>[&nbsp;&nbsp; 28.759141] bcm43xx driver</DIV>
<DIV>&nbsp;</DIV>
<DIV>this is the network card:</DIV>
<DIV>05:00.0 Network controller: Broadcom Corporation BCM94311MCG wlan mini=
-PCI 
(rev 01)</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>and this is what happen when i ping my router (in the case that it con=
nects 
to me when i'm really near,but not always happen) and i get far away from t=
he 
router of some meters:</DIV>
<DIV>&nbsp;</DIV>
<DIV>PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data<BR>64 bytes from 
192.168.1.1: icmp=5Fseq=3D1 ttl=3D150 time=3D2.49 ms<BR>64 bytes from 192.168.1.1: 
icmp=5Fseq=3D2 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D3 tt=
l=3D150 
time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D4 ttl=3D150 time=3D2.35 ms<=
BR>64 
bytes from 192.168.1.1: icmp=5Fseq=3D5 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 
192.168.1.1: icmp=5Fseq=3D6 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168.1.1: 
icmp=5Fseq=3D7 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D8 tt=
l=3D150 
time=3D2.36 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D9 ttl=3D150 time=3D2.35 ms<=
BR>64 
bytes from 192.168.1.1: icmp=5Fseq=3D10 ttl=3D150 time=3D5.69 ms<BR>64 bytes from 
192.168.1.1: icmp=5Fseq=3D11 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168.1.1:=
 
icmp=5Fseq=3D12 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D13 
ttl=3D150 time=3D2.37 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D14 ttl=3D150 time=
=3D2.38 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D15 ttl=3D150 time=3D2.39 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D16 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D17 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D18 
ttl=3D150 time=3D25.2 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D19 ttl=3D150 time=
=3D4.94 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D20 ttl=3D150 time=3D4.07 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D21 ttl=3D150 time=3D2.47 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D22 ttl=3D150 time=3D2.35 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D23 
ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D24 ttl=3D150 time=
=3D2.35 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D25 ttl=3D150 time=3D2.35 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D26 ttl=3D150 time=3D2.37 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D27 ttl=3D150 time=3D2.40 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D28 
ttl=3D150 time=3D15.3 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D29 ttl=3D150 time=
=3D2.71 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D30 ttl=3D150 time=3D2.38 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D31 ttl=3D150 time=3D654 ms<BR>64 bytes from 192.168.=
1.1: 
icmp=5Fseq=3D32 ttl=3D150 time=3D9.89 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D33 
ttl=3D150 time=3D70.7 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D34 ttl=3D150 time=
=3D565 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D35 ttl=3D150 time=3D6.12 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D36 ttl=3D150 time=3D75.9 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D37 ttl=3D150 time=3D340 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D38 
ttl=3D150 time=3D937 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D40 ttl=3D150 time=3D=
115 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D44 ttl=3D150 time=3D193 ms<BR>64 byte=
s 
from 192.168.1.1: icmp=5Fseq=3D45 ttl=3D150 time=3D266 ms<BR>64 bytes from 192.168.=
1.1: 
icmp=5Fseq=3D50 ttl=3D150 time=3D1165 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D54 
ttl=3D150 time=3D40.8 ms<BR>From 192.168.1.80 icmp=5Fseq=3D101 Destination Host 
Unreachable</DIV>
<DIV>&nbsp;</DIV>
<DIV>thanks for helping,</DIV>
<DIV>regards </DIV>
<DIV>ruggiero</FONT></DIV><!-- SPAMfighter Signature --><br><hr>La mia Cart=
ella di Posta in Arrivo =E8 protetta con SPAMfighter<br>815 messaggi contenen=
ti spam sono stati bloccati con successo.<br>Scarica gratuitamente <a href=3D=
=22http://www.spamfighter.com/lit=22>SPAMfighter</a>!</BODY></HTML>


------=_NextPart_000_000F_01C82180.8AA6D920--



From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.11.1331727368.28966.bcm43xx-dev@lists.berlios.de>

thanks for helping,
regards
ruggiero
----- Original Message ----- 
From: "Larry Finger" <larry.finger at lwfinger.net>
To: "Ruggiero" <rugg.argos at tiscali.it>
Cc: <bcm43xx-dev at lists.berlios.de>
Sent: Wednesday, November 07, 2007 7:04 PM
Subject: Re: BCM94311MCG


> Ruggiero wrote:
>> i don't know if it's this the place to write about this problem...but if
>> u say me where i should post the problem i'll do...here it comes...
>> i have installed ubuntu 7.10 and i recompiled the kernel with to
>> 2.6.23.1 because on the earlier kernel my wireless card didn't work with
>> bcm43xx drivers but only with ndiswrapper..(i could see the access point
>> but couldn't connect to it)
>> now after recompiled i installed bcm43xx-fwcutter and by this i
>> extracted the firmware using wl_apsta-3.130.20.0.o .. now as for the
>> earlier kernel i can see the access point by typing "sudo iwlist scan"
>> but i can't connect to it..sometime i can but only if i'm near to the
>> access point(two meters) but anyway speed is really slow :(
>>
>> the card BCM94311MCG rev01 this is what comes out by typing lspci
>> hope u can help me and if u need more dates i'll be glad to give...
>
> What is the output from a 'dmesg | grep bcm' command? In addition, please 
> send the output of 'iwlist
> scan'.
>
> Larry 


-- 
Io utilizzo la versione gratuita di SPAMfighter per utenti privati. Sino ad ora
 ha rimosso 815 mail spam. 
 Gli utenti paganti non hanno questo messaggio nelle loro email .
 Prova gratuitamente SPAMfighter qui:http://www.spamfighter.com/lit




From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.12.1331727368.28966.bcm43xx-dev@lists.berlios.de>

thanks for helping,
regards 
ruggiero

-- 
Io utilizzo la versione gratuita di SPAMfighter per utenti privati. Sino ad=
 ora
 ha rimosso 815 mail spam. 
 Gli utenti paganti non hanno questo messaggio nelle loro email .
 Prova gratuitamente SPAMfighter qui:http://www.spamfighter.com/lit

------=_NextPart_000_0026_01C82181.87626710
Content-Type: text/html; charset="iso-8859-1"
Content-Transfer-Encoding: quoted-printable

<!DOCTYPE HTML PUBLIC =22-//W3C//DTD HTML 4.0 Transitional//EN=22>
<HTML><HEAD>
<META http-equiv=3DContent-Type content=3D=22text/html; charset=3Diso-8859-1=22>
<META content=3D=22MSHTML 6.00.2900.3199=22 name=3DGENERATOR>
<STYLE></STYLE>
</HEAD>
<BODY bgColor=3D#ffffff>
<DIV>
<DIV>&gt; What is the output from a 'dmesg | grep bcm' command=3F In addition=
, 
please send the output of 'iwlist<BR>&gt; scan'.<BR>&gt; <BR>&gt; Larry</DI=
V>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2>here it's the output of what u 
requested</FONT></DIV>
<DIV><FONT face=3DArial size=3D2></FONT>&nbsp;</DIV>
<DIV><FONT face=3DArial size=3D2><A 
href=3D=22mailto:ruggiero at ruggiero-laptop:~$=22>ruggiero at ruggiero-laptop:~$</A> s=
udo 
iwlist scan<BR>lo&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Interface doesn=
't 
support scanning.</DIV>
<DIV>&nbsp;</DIV>
<DIV>eth0&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Interface doesn't support 
scanning.</DIV>
<DIV>&nbsp;</DIV>
<DIV>eth1&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Scan completed 
:<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Cell 01 - Addre=
ss: 
00:0C:41:19:2D:C1<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
ESSID:=22&lt;hidden&gt;=22<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Protocol:IEEE 
802.11b<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbs=
p;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Mode:Master<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;=
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Frequency:2.462 GHz (Channel 
11)<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Encryption 
key:on<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp=
;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Bit Rates:1 Mb/s; 2 Mb/s; 5.5 Mb/s; 11 
Mb/s<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&=
nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Quality=3D98/100&nbsp; Signal level=3D-42 dBm&nbsp; Noise level=3D-256 
dBm<BR>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&n=
bsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; 
Extra: Last beacon: 717ms ago</DIV>
<DIV>&nbsp;</DIV>
<DIV><A 
href=3D=22mailto:ruggiero at ruggiero-laptop:~$=22>ruggiero at ruggiero-laptop:~$</A> 
dmesg|grep bcm<BR>[&nbsp;&nbsp; 28.759141] bcm43xx driver</DIV>
<DIV>&nbsp;</DIV>
<DIV>this is the network card:</DIV>
<DIV>05:00.0 Network controller: Broadcom Corporation BCM94311MCG wlan mini=
-PCI 
(rev 01)</DIV>
<DIV>&nbsp;</DIV>
<DIV>&nbsp;</DIV>
<DIV>and this is what happen when i ping my router (in the case that it con=
nects 
to me when i'm really near,but not always happen) and i get far away from t=
he 
router of some meters:</DIV>
<DIV>&nbsp;</DIV>
<DIV>PING 192.168.1.1 (192.168.1.1) 56(84) bytes of data<BR>64 bytes from 
192.168.1.1: icmp=5Fseq=3D1 ttl=3D150 time=3D2.49 ms<BR>64 bytes from 192.168.1.1: 
icmp=5Fseq=3D2 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D3 tt=
l=3D150 
time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D4 ttl=3D150 time=3D2.35 ms<=
BR>64 
bytes from 192.168.1.1: icmp=5Fseq=3D5 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 
192.168.1.1: icmp=5Fseq=3D6 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168.1.1: 
icmp=5Fseq=3D7 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D8 tt=
l=3D150 
time=3D2.36 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D9 ttl=3D150 time=3D2.35 ms<=
BR>64 
bytes from 192.168.1.1: icmp=5Fseq=3D10 ttl=3D150 time=3D5.69 ms<BR>64 bytes from 
192.168.1.1: icmp=5Fseq=3D11 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168.1.1:=
 
icmp=5Fseq=3D12 ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D13 
ttl=3D150 time=3D2.37 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D14 ttl=3D150 time=
=3D2.38 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D15 ttl=3D150 time=3D2.39 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D16 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D17 ttl=3D150 time=3D2.36 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D18 
ttl=3D150 time=3D25.2 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D19 ttl=3D150 time=
=3D4.94 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D20 ttl=3D150 time=3D4.07 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D21 ttl=3D150 time=3D2.47 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D22 ttl=3D150 time=3D2.35 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D23 
ttl=3D150 time=3D2.38 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D24 ttl=3D150 time=
=3D2.35 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D25 ttl=3D150 time=3D2.35 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D26 ttl=3D150 time=3D2.37 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D27 ttl=3D150 time=3D2.40 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D28 
ttl=3D150 time=3D15.3 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D29 ttl=3D150 time=
=3D2.71 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D30 ttl=3D150 time=3D2.38 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D31 ttl=3D150 time=3D654 ms<BR>64 bytes from 192.168.=
1.1: 
icmp=5Fseq=3D32 ttl=3D150 time=3D9.89 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D33 
ttl=3D150 time=3D70.7 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D34 ttl=3D150 time=
=3D565 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D35 ttl=3D150 time=3D6.12 ms<BR>64 byt=
es 
from 192.168.1.1: icmp=5Fseq=3D36 ttl=3D150 time=3D75.9 ms<BR>64 bytes from 192.168=
.1.1: 
icmp=5Fseq=3D37 ttl=3D150 time=3D340 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D38 
ttl=3D150 time=3D937 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D40 ttl=3D150 time=3D=
115 
ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D44 ttl=3D150 time=3D193 ms<BR>64 byte=
s 
from 192.168.1.1: icmp=5Fseq=3D45 ttl=3D150 time=3D266 ms<BR>64 bytes from 192.168.=
1.1: 
icmp=5Fseq=3D50 ttl=3D150 time=3D1165 ms<BR>64 bytes from 192.168.1.1: icmp=5Fseq=3D54 
ttl=3D150 time=3D40.8 ms<BR>From 192.168.1.80 icmp=5Fseq=3D101 Destination Host 
Unreachable</DIV>
<DIV>&nbsp;</DIV>
<DIV>thanks for helping,</DIV>
<DIV>regards </DIV>
<DIV>ruggiero</FONT></DIV></DIV><!-- SPAMfighter Signature --><br><hr>La mi=
a Cartella di Posta in Arrivo =E8 protetta con SPAMfighter<br>815 messaggi co=
ntenenti spam sono stati bloccati con successo.<br>Scarica gratuitamente <a=
 href=3D=22http://www.spamfighter.com/lit=22>SPAMfighter</a>!</BODY></HTML>


------=_NextPart_000_0026_01C82181.87626710--



From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.13.1331727376.28966.bcm43xx-dev@lists.berlios.de>


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.14.1331727376.28966.bcm43xx-dev@lists.berlios.de>


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.15.1331727376.28966.bcm43xx-dev@lists.berlios.de>

dmesg:
[ 4587.256882] WARNING: at drivers/net/wireless/b43/dma.c:1098 parse_cookie()
[ 4587.256886] Pid: 4953, comm: firefox-bin Tainted: P        2.6.24 #2
[ 4587.256889]  [<e0438ad0>] b43_dma_handle_txstatus+0xda/0x327 [b43]
[ 4587.256910]  [<e0429880>] b43_interrupt_tasklet+0x63a/0x6b7 [b43]
[ 4587.256933]  [<c01196d4>] tasklet_action+0x32/0x52
[ 4587.256937]  [<c011963c>] __do_softirq+0x35/0x75
[ 4587.256943]  [<c011969e>] do_softirq+0x22/0x26
[ 4587.256947]  [<c01198cb>] irq_exit+0x29/0x58
[ 4587.256951]  [<c0105379>] do_IRQ+0x77/0x88
[ 4587.256957]  [<c0103df3>] common_interrupt+0x23/0x28
[ 4587.256970]  =======================
[ 4587.456399] wlan0: authenticate with AP 00:09:5b:fa:e4:66
[ 4587.456628] WARNING: at drivers/net/wireless/b43/dma.c:1095 parse_cookie()
[ 4587.456634] Pid: 4953, comm: firefox-bin Tainted: P        2.6.24 #2
[ 4587.456651]  [<e0438a98>] b43_dma_handle_txstatus+0xa2/0x327 [b43]
[ 4587.456681]  [<e0429880>] b43_interrupt_tasklet+0x63a/0x6b7 [b43]
[ 4587.456693]  [<c0105379>] do_IRQ+0x77/0x88
[ 4587.456705]  [<c0103df3>] common_interrupt+0x23/0x28
[ 4587.456717]  [<c01196d4>] tasklet_action+0x32/0x52
[ 4587.456724]  [<c011963c>] __do_softirq+0x35/0x75
[ 4587.456730]  [<c011969e>] do_softirq+0x22/0x26
[ 4587.456734]  [<c01198cb>] irq_exit+0x29/0x58
[ 4587.456738]  [<c0105379>] do_IRQ+0x77/0x88
[ 4587.456744]  [<c0103df3>] common_interrupt+0x23/0x28
[ 4587.456757]  =======================
 (and so on...)

Is that enough? If you need more information I can send.

I hate to get my wifi card working through ndiswrapper. I'll be happy
if I help to fix this.

Br,

David

On Feb 1, 2008 11:52 PM,  <gavron at wetwork.net> wrote:
>
>  Messages sent: 3
>  Messages which include a dmesg: 0
>  Messages which include the output from anything:0
>
>  Here's where we differ.  See Larry would tell you what you need to send.
> He's like a saint that way.
>  I would say "Don't send anything else.  We can't help you with no input,
> and you don't provide input."
>  On the other hand, I'm going to go out on a limb and suggest that PERHAPS
> if you have ANY brainpower left, you include a full dmesg as well as an
> lsmod | grep b43 as well as an iwlist wlan0 scan ... or not.
>
>
>  Cheers
>
>  Ehud
>
>
>
>  David Cohen wrote:
>  Hi,
>
> See bellow:
>
> On Feb 1, 2008 9:23 PM, David Cohen <dacohen at gmail.com> wrote:
>
>
>  Hi,
>
> I figured out the b43 module can find my network (with iwlist scan) if
> I don't press the radio switch button. After turn it off and turn it
> on again, it doesn't work anymore.
> But even after find the network and configure the device with
> iwconfig, it doesn't work and I get this warning about DMA on dmesg:
>
> [ 141.275477] WARNING: at drivers/net/wireless/b43/dma.c:1098 parse_cookie()
> [ 141.275480] Pid: 0, comm: swapper Not tainted 2.6.24 #2
> [ 141.275483] [<e026dad0>] b43_dma_handle_txstatus+0xda/0x327 [b43]
> [ 141.275505] [<e025e880>] b43_interrupt_tasklet+0x63a/0x6b7 [b43]
> [ 141.275521] [<c011c428>] get_next_timer_interrupt+0x11e/0x18a
> [ 141.275531] [<c01196d4>] tasklet_action+0x32/0x52
> [ 141.275536] [<c011963c>] __do_softirq+0x35/0x75
> [ 141.275541] [<c011969e>] do_softirq+0x22/0x26
> [ 141.275545] [<c01198cb>] irq_exit+0x29/0x58
> [ 141.275549] [<c0105379>] do_IRQ+0x77/0x88
> [ 141.275553] [<c01126eb>] __update_rq_clock+0x1a/0xf3
> [ 141.275559] [<c0103df3>] common_interrupt+0x23/0x28
> [ 141.275566] [<c013007b>] sys_delete_module+0xd1/0x18e
> [ 141.275571] [<c011007b>] handle_vm86_fault+0x38d/0x6c2
> [ 141.275576] [<e0023ca7>] acpi_idle_enter_simple+0x124/0x180 [processor]
> [ 141.275589] [<e0023da8>] acpi_idle_enter_bm+0xa5/0x241 [processor]
> [ 141.275599] [<c0256632>] cpuidle_idle_call+0x53/0x79
> [ 141.275605] [<c0102504>] cpu_idle+0x4c/0x66
> [ 141.275608] [<c03c09b1>] start_kernel+0x23c/0x241
> [ 141.275613] [<c03c0303>] unknown_bootoption+0x0/0x196
> [ 141.275619] =======================
>
> So, I tried to not use DMA modprobing with pio=1 param, but I got this
> error:
> $> SIOCSIFFLAGS: Cannot allocate memory
>
>  This error message was after if up, and not after modprobe.
>
> Br,
>
> David
>
>
>
>  DMA seems to be necessary.
> Any idea about the problem?
>
> Br,
>
> David
>
>
>
>
>  iwlist wlan0 scan ?
>
>  output from same?
>
>
>  You know the really nice thing about this list is I know no matter how much
> of a bastard I think I might be perceived as, if I answer before Michael I
> know it could have been worse ;-) (I'm human, you know...)
>
>  Cheers,
>
>  Ehud
>
>
>
>  David Cohen wrote:
>  I forgot to mention I'm using the firmware extracted from
> broadcom-wl-4.150.10.5.tar.bz2 and I got no error regarding to
> firmware on dmesg.
>
> David
>
> On Feb 1, 2008 1:47 PM, David Cohen <dacohen at gmail.com> wrote:
>
>
>  Hi,
>
> I have a HP nx6110 laptop with bcm4318 wireless card using
> wireless-2.6 tree (git-pulled: jan-31 2008).
> Unfortunately, the b43 module is not working well:
>  - After if-up the wlan device, the radio is off (got from dmesg) but
> the radio led is on.
>  - If I press the radio button, the radio turns on/off (got from dmesg
> also) but the ledsstays always on.
>  - Even tuning the radio on, I can't find my home wireless network
> with 'iwlist scan' (but I can find from other laptop).
>
> Does anyone know if it is a known bug? Or does anyone can help me with that?
>
> Thanks in advance,
>
> David
>
>
>
>
>
>
>
>


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.16.1331727382.28966.bcm43xx-dev@lists.berlios.de>

The network I'm on doesn't use encryption, but I've noticed that while
using wpa_supplicant 0.6.3 dhclient reports the interface as being
down after wpa_supplicant has already associated and fails to obtain=20
an IP address. Without wpa_supplicant, the card associates and dhclient
works well. From the output of iwconfig it appears that my rate is capped
at 1M. This is lower than the 5.5Mb/s and sometimes 2Mb/s rates I was
receiving under Windows at the same distance from the AP, but the=20
connection seems much more stable. iwlist shows the signal level
bouncing between -55dbm and -63dbm, with link qualities between
61 to 68 and a constant noise level of -66dbm. I will try to do some
additional testing with a WEP encrypted network later this week.

Regards,

David Ellingsworth
_________________________________________________________________
Pack up or back up=96use SkyDrive to transfer files or keep extra copies. L=
earn how.
hthttp://www.windowslive.com/skydrive/overview.html?ocid=3DTXT_TAGLM_WL_Ref=
resh_skydrive_packup_042008=


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.17.1331727383.28966.bcm43xx-dev@lists.berlios.de>

work around it by setting an exception for subsys venID:0x100F and subsys
prodID:0x1043 to always treat BFL_BTCMOD as 1 if BFL_BTCOEXIST is set to 1.
(Possibly this is acceptable for all subsys IDs, not just the Asus-specific
one I wrote here, as I have yet to see a non-Asus BCM43xx that has
BFL_BTCOEXIST set, but not BFL_BTCMOD.) However, if it's a bug in our
Bluetooth coexistence code, then we shouldn't just apply the workaround, but
find and fix the actual bug that causes the bug if the workaround isn't
applied.

-- 
Vista: [V]iruses, [I]ntruders, [S]pyware, [T]rojans and [A]dware. :-)

------=_Part_5894_4468159.1208533889347
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable
Content-Disposition: inline

Bisection complete!<br>After testing numerous settings for BoardFlags, I fo=
und that the only ones to have a benefical effect on the card is 0x4049/0x4=
249 and 0x0048/0x0248, which differs from the original 0x0049 only in the B=
FL_BTCMOD bit, which is 0 by default, but 1 in this configuration. Not only=
 that, setting BoardFlags to 0x4049 and leaving everything else as is in th=
e original Asus SPROM fixes BOTH the &quot;No TX&quot; and the &quot;ping t=
ime cycle&quot; bugs! Even monitoring/packetspamming while operating works =
perfectly. The setting 0x4249 produces the same (perfectly-working) result,=
 only with Afterburner marked as supported. (Not sure if it actually gets e=
nabled, though.) Setting BFL_FEM to 1 (0x4849 or 0x4A49) introduces the &qu=
ot;ping cycle&quot; bug, most likely because the card doesn&#39;t actually =
support the Front-End Module. BFL_HGPA=3D1 (0x6049/0x6249) causes ping pack=
et loss /duplicate count to increase somewhat, likely because the card does=
n&#39;t have a high-gain PA. 0x0048 and 0x0248 also work fine, although thi=
s setting disables Bluetooth coexistence (BFL_BTCOEXIST). So, it looks like=
 BoardFlags was intended to be 0x4249, but Asus incorrectly sets it to 0x00=
49, which completely breaks transmission in b43.<br>
<br>For reference, here is BFL_BTCMOD&#39;s description from bcm-specs:<br>=
&quot;0x4000: BFL_BTCMOD: BFL_BTCOEXIST is given in alternate GPIOs&quot;.<=
br>BFL_BTCOEXIST is defined as:<br>&quot;0x0001: BFL_BTCOEXIST: Board imple=
ments Bluetooth coexistance[sic]&quot;. I don&#39;t know if &quot;coexistan=
ce&quot; is a misspelling or if it&#39;s the correct spelling in British, b=
ut if it&#39;s unintended, then it should be fixed. (Just nit-picking, sorr=
y.)<br>
<br>From this, the problem appears to be a Bluetooth coexistence bug. We ca=
n work around it by setting an exception for subsys venID:0x100F and subsys=
 prodID:0x1043 to always treat BFL_BTCMOD as 1 if BFL_BTCOEXIST is set to 1=
. (Possibly this is acceptable for all subsys IDs, not just the Asus-specif=
ic one I wrote here, as I have yet to see a non-Asus BCM43xx that has BFL_B=
TCOEXIST set, but not BFL_BTCMOD.) However, if it&#39;s a bug in our Blueto=
oth coexistence code, then we shouldn&#39;t just apply the workaround, but =
find and fix the actual bug that causes the bug if the workaround isn&#39;t=
 applied.<br clear=3D"all">
<br>-- <br>Vista: [V]iruses, [I]ntruders, [S]pyware, [T]rojans and [A]dware=
. :-)

------=_Part_5894_4468159.1208533889347--


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.18.1331727385.28966.bcm43xx-dev@lists.berlios.de>

:

----
## b43 AP
027-NPUB-b43-tsf-offset.patch
028-NPUB-b43-dbg-pmq.patch
---

Both patches do NOT exist in
http://johannes.sipsolutions.net/patches/kernel/all/LATEST

Does that mean that these patches are merged somewhere?

--=20
Francis Galiegue, fgaliegue at gmail.com
"It seems obvious [...] that at least some 'business intelligence'
tools invest so much intelligence on the business side that they have
nothing left for generating SQL queries" (St=E9phane Faroult, in "The
Art of SQL", ISBN 0-596-00894-5)


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.19.1331727389.28966.bcm43xx-dev@lists.berlios.de>


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.20.1331727389.28966.bcm43xx-dev@lists.berlios.de>

b43legacy router(eth0:192.168.2.1, wlan0:192.168.1.100)
    0% packet loss, average rtt 3.621ms

The only logical conclusion I can draw from the above information is
that there is something wrong with how packets are created locally and
delivered to the device. I'm willing to provide any help necessary
needed to correct the issue.

Regards,

David Ellingsworth


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.21.1331727390.28966.bcm43xx-dev@lists.berlios.de>

06:02.0 Network controller: Broadcom Corporation BCM4318 [AirForce One 54g] 802.11g Wireless LAN Controller (rev 02)
	Subsystem: AMBIT Microsystem Corp. Device 0312
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 64
	Interrupt: pin A routed to IRQ 22
	Region 0: Memory at d0002000 (32-bit, non-prefetchable) [size=8K]
	Kernel driver in use: b43-pci-bridge
	Kernel modules: ssb

Performance seems fine; it's not perfect, but it's generally not.  I
don't know if it's the driver, environmental conditions, etc.  Iperf,
through a cheap home AP, to another system also connected wirelessly to
the AP, both with little x and y axis displacement but two floors of z
axis displacement, gives about 2.3 Mbps throughput (averaged over three
iperf runs, but I know from experience that throughput seems to vary
over time).

I have built kernels and applied patches before, but I'm new to git;
this is what I did:

git-clone git://git.kernel.org/pub/scm/linux/kernel/git/linville/wireless-testing.git
cd wireless-testing
git-checkout -b michaels-patch
patch -p1 < the-patch-filename
make menuconfig
make
make modules_install
make install

Is this right?  [I generally build with debian's kernel-package
scripts, but they didn't work on this tree, complaining about a
mismatch involving UTS.  I don't have the error in front of me, but it
was something like a discrepancy between xxx-wl-dirty and
xxx-wl-dirty-dirty-dirty.]

Thanks for all your work on this,

Celejar
--
mailmin.sourceforge.net - remote access via secure (OpenPGP) email
ssuds.sourceforge.net - A Simple Sudoku Solver and Generator



From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.22.1331727392.28966.bcm43xx-dev@lists.berlios.de>

CONFIG_WIRELESS_OLD_REGULATORY was not set, and CRDA was not available
- the worst combination from both worlds. That is the only way the
passive scanning is set in the flags.

Larry


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.23.1331727393.28966.bcm43xx-dev@lists.berlios.de>

So, I've used your guide
(http://linuxwireless.org/en/users/Drivers/b43) to install my airport
card on Slackware 12.1

I've 2.6.24.x Kernel so I've followed specific instructions of that
guide (Section: You are using the b43 driver from linux-2.6.24)


I did all steps without any problem.
After this procedure, I typed "iwconfig" to see if system detected my
card, but iwconfig output was "lo no wireless extension and eth0 no
wireless extension" so "desired" eth1 didn't appear.

Did I forget something to do? I didn't mount any modules on system
because it is not specified on guide

On dmesg output "eth1" isn't detected however I've seen any row of the
output unsuccessfull.

Could anyone help me?

Thanks a lot for your help


Ciao


Filadelfo


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.24.1331727395.28966.bcm43xx-dev@lists.berlios.de>

trying SLUB?

Larry



From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.25.1331727397.28966.bcm43xx-dev@lists.berlios.de>

rate_idx == -1.  The length of all the dropped packets is 80 bytes and they
look like the following:

8fae 0308 0000 0b01 0085 0000 1500 482c
50b3 0b01 0085 0000 5fa0 1500 482c 50b3
aaaa 0003 850b cdcc 1b00 1d00 b945 c0cd
b905 630a 5e10 0101 0601 0b06 000b 07d6
bab9 addb 35fd 33e8 cd8f 8eaa 6f77 b9e8

However, there is still no packet received with macstat B43_RX_MAC_FCSERR.
I also tried the 351 firmware for which I saw several FCS error frames in
PIO mode.  But the sniffing tools like Wireshark cannot get any packets.
including the correct ones, when using that firmware.

Am I missing something?

Thanks,
-Bo

--000e0cd402aca1f21c04632481f9
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<br><br>I am interested in capturing FCS error frames using b43 driver.&=
nbsp; My hardware information is as follows.<br><br>b43-phy9: Broadcom 4318=
 WLAN found<br>b43-phy9 debug: Found PHY: Analog 3, Type 2, Revision 7<br>b=
43-phy9 debuf: Found Radio: Manuf 0x17f, Version 0x2050, Revision 8<br>
<br>I am using firmware version 410.2160 with linux kernel version 2.6.27.1=
0.&nbsp; I told the firmware to keep the bad frames by setting ctl |=3D B43=
_MACCTL_KEEP_BAD just before b43_write32(dev, b43_MMIO_MACCTL, ctl) in b43_=
adjust_mode(...) in main.c.<br>

From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.26.1331727397.28966.bcm43xx-dev@lists.berlios.de>

te_idx =3D=3D -1.&nbsp; The length of all the dropped packets is 80 bytes a=
nd they look like the following:<br><br>8fae 0308 0000 0b01 0085 0000 1500 =
482c<br>
50b3 0b01 0085 0000 5fa0 1500 482c 50b3<br>aaaa 0003 850b cdcc 1b00 1d00 b9=
45 c0cd<br>b905 630a 5e10 0101 0601 0b06 000b 07d6<br>bab9 addb 35fd 33e8 c=
d8f 8eaa 6f77 b9e8<br><br>However, there is still no packet received with m=
acstat B43_RX_MAC_FCSERR.&nbsp; I also tried the 351 firmware for which I s=
aw several FCS error frames in PIO mode.&nbsp; But the sniffing tools like =
Wireshark cannot get any packets. including the correct ones, when using th=
at firmware. <br>
<br>Am I missing something?<br><br>Thanks,<br>-Bo<br><br>

--000e0cd402aca1f21c04632481f9--


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.27.1331727397.28966.bcm43xx-dev@lists.berlios.de>

rate_idx == -1.  The length of all the dropped packets is 80 bytes and they
look like the following:

8fae 0308 0000 0b01 0085 0000 1500 482c
50b3 0b01 0085 0000 5fa0 1500 482c 50b3
aaaa 0003 850b cdcc 1b00 1d00 b945 c0cd
b905 630a 5e10 0101 0601 0b06 000b 07d6
bab9 addb 35fd 33e8 cd8f 8eaa 6f77 b9e8

However, there is still no packet received with macstat B43_RX_MAC_FCSERR.
I also tried the 351 firmware for which I saw several FCS error frames in
PIO mode.  But the sniffing tools like Wireshark cannot get any packets.
including the correct ones, when using that firmware.

Am I missing something?

Thanks,
-Bo

--000e0cd4d2521baea0046324d474
Content-Type: text/html; charset=ISO-8859-1
Content-Transfer-Encoding: quoted-printable

Hi,<br><br>(It seems that my last email was incomplete.)<br><br>I am intere=
sted in capturing FCS error frames using b43 driver.&nbsp; My hardware info=
rmation is as follows.<br><br>b43-phy9: Broadcom 4318 WLAN found<br>b43-phy=
9 debug: Found PHY: Analog 3, Type 2, Revision 7<br>
b43-phy9 debuf: Found Radio: Manuf 0x17f, Version 0x2050, Revision 8<br><br=
>I am using firmware version 410.2160 with linux kernel version 2.6.27.10.&=
nbsp; I told the firmware to keep the bad frames by setting ctl |=3D B43_MA=
CCTL_KEEP_BAD just before b43_write32(dev, b43_MMIO_MACCTL, ctl) in b43_adj=
ust_mode(...) in main.c.<br>

From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.28.1331727397.28966.bcm43xx-dev@lists.berlios.de>

te_idx =3D=3D -1.&nbsp; The length of all the dropped packets is 80 bytes a=
nd they look like the following:<br><br>8fae 0308 0000 0b01 0085 0000 1500 =
482c<br>
50b3 0b01 0085 0000 5fa0 1500 482c 50b3<br>aaaa 0003 850b cdcc 1b00 1d00 b9=
45 c0cd<br>b905 630a 5e10 0101 0601 0b06 000b 07d6<br>bab9 addb 35fd 33e8 c=
d8f 8eaa 6f77 b9e8<br><br>However, there is still no packet received with m=
acstat B43_RX_MAC_FCSERR.&nbsp; I also tried the 351 firmware for which I s=
aw several FCS error frames in PIO mode.&nbsp; But the sniffing tools like =
Wireshark cannot get any packets. including the correct ones, when using th=
at firmware.<br>
<br>Am I missing something?<br><br>Thanks,<br>-Bo<br>

--000e0cd4d2521baea0046324d474--


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.29.1331727398.28966.bcm43xx-dev@lists.berlios.de>

Is your device getting hotter than it used to? That might explain the loss of
signal strength with time. You could test this by strategic placement of a fan.

Larry




From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.30.1331727400.28966.bcm43xx-dev@lists.berlios.de>

b43_generate_txhdr(...) makes no sense to me because when
hw->max_rates = 2, there will be no alternative rates in minstrel.  To
make MRR work, is it possible to set hw->max_rates to be 4, even if we
only use two bit rates in b43?

Thanks,
-Bo


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.31.1331727401.28966.bcm43xx-dev@lists.berlios.de>

06:02.0 Network controller: Broadcom Corporation BCM4318 [AirForce One 54g] 802.11g Wireless LAN Controller (rev 02)
	Subsystem: AMBIT Microsystem Corp. TravelMate 2410
	Flags: bus master, fast devsel, latency 64, IRQ 22
	Memory at d0002000 (32-bit, non-prefetchable) [size=8K]
	Kernel driver in use: b43-pci-bridge

uname -a:

Linux lizzie 2.6.31-rc2-wl-lizzie-27873-ga483c23-dirty #4 Thu Jul 9 19:13:30 EDT 2009 i686 GNU/Linux

Celejar
--
mailmin.sourceforge.net - remote access via secure (OpenPGP) email
ssuds.sourceforge.net - A Simple Sudoku Solver and Generator



From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.32.1331727402.28966.bcm43xx-dev@lists.berlios.de>

by left-shifting by 32 (16 for HOSTFMI).

Is the problem that we write all 3 hostflags registers here?

(BTW are there any other known host flags? If there are, maybe we
should #define them.)

--=20
Vista: [V]iruses, [I]ntruders, [S]pyware, [T]rojans and [A]dware. :-)


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.33.1331727402.28966.bcm43xx-dev@lists.berlios.de>

"If core->clk is not zero AND band->mhfs[idx] is not equal to tmp:
   1. Write band->mhfs[idx] to Shared Memory Address addr[idx]"

This looks to me like it does indeed write to SHM, though the actual
mhf() tries to avoid writing to SHM if possible, while b43_hf_write
doesn't perform this optimization. (We don't have a band->mhfs, nor a
bandstate[] array.)

--=20
Vista: [V]iruses, [I]ntruders, [S]pyware, [T]rojans and [A]dware. :-)


From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.34.1331727409.28966.bcm43xx-dev@lists.berlios.de>

06:02.0 Network controller: Broadcom Corporation BCM4318 [AirForce One 54g] 802.11g Wireless LAN Controller (rev 02)
	Subsystem: AMBIT Microsystem Corp. TravelMate 2410
	Control: I/O- Mem+ BusMaster+ SpecCycle- MemWINV- VGASnoop- ParErr- Stepping- SERR- FastB2B- DisINTx-
	Status: Cap- 66MHz- UDF- FastB2B- ParErr- DEVSEL=fast >TAbort- <TAbort- <MAbort- >SERR- <PERR- INTx-
	Latency: 64
	Interrupt: pin A routed to IRQ 22
	Region 0: Memory at d0002000 (32-bit, non-prefetchable) [size=8K]
	Kernel driver in use: b43-pci-bridge

Running Debian Sid, kernels are my fairly aggressively stripped down
configurations.  The AP is set to WPA2-PSK / AES.

Celejar	
-- 
mailmin.sourceforge.net - remote access via secure (OpenPGP) email
ssuds.sourceforge.net - A Simple Sudoku Solver and Generator



From bogus@does.not.exist.com  Wed Mar 14 13:15:41 2012
From: bogus@does.not.exist.com ()
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.35.1331727410.28966.bcm43xx-dev@lists.berlios.de>

"You're passing a pointer to kfree() that did not come from kmalloc().
If a page is not PageSlab(), it needs to be a compound page if it came
from the page allocator pass-through."

I guess that helps a little.

Larry



From zajec5 at gmail.com=  Wed Mar 14 13:15:41 2012
From: zajec5 at gmail.com= (=3D?UTF-8?q?Rafa=3DC5=3D82=3D20Mi=3DC5=3D82ecki?=3D)
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.36.1331727412.28966.bcm43xx-dev@lists.berlios.de>

>
Date: Tue, 22 Dec 2009 02:27:21 +0100
Subject: [PATCH] b43: N-PHY: clean table init, check PHY rev
MIME-Version: 1.0
Content-Type: text/plain; charset=3DUTF-8
Content-Transfer-Encoding: 8bit

Move table init to tables_nphy.c, detect newer PHY which use different init

Signed-off-by: Rafa=C5=82 Mi=C5=82ecki <zajec5 at gmail.com>
---
drivers/net/wireless/b43/phy_n.c       |   43 ++++------------------------
drivers/net/wireless/b43/tables_nphy.c |   48
++++++++++++++++++++++++++++++++
drivers/net/wireless/b43/tables_nphy.h |    4 ++-
3 files changed, 58 insertions(+), 37 deletions(-)

diff --git a/drivers/net/wireless/b43/phy_n.c
b/drivers/net/wireless/b43/phy_n.c
index 992318a..23cef71 100644
--- a/drivers/net/wireless/b43/phy_n.c
+++ b/drivers/net/wireless/b43/phy_n.c
@@ -197,44 +197,15 @@ void b43_nphy_radio_turn_off(struct b43_wldev *dev)
    ~B43_NPHY_RFCTL_CMD_EN);
}

-#define ntab_upload(dev, offset, data) do { \
- unsigned int i; \
- for (i =3D 0; i < (offset##_SIZE); i++) \
- b43_ntab_write(dev, (offset) + i, (data)[i]); \
- } while (0)
-
-/* Upload the N-PHY tables. */
+/* Upload the N-PHY tables.
+ * http://bcm-v4.sipsolutions.net/802.11/PHY/N/InitTables
+ */
static void b43_nphy_tables_init(struct b43_wldev *dev)
{
- /* Static tables */
- ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43_ntab_framestruct);
- ntab_upload(dev, B43_NTAB_FRAMELT, b43_ntab_framelookup);
- ntab_upload(dev, B43_NTAB_TMAP, b43_ntab_tmap);
- ntab_upload(dev, B43_NTAB_TDTRN, b43_ntab_tdtrn);
- ntab_upload(dev, B43_NTAB_INTLEVEL, b43_ntab_intlevel);
- ntab_upload(dev, B43_NTAB_PILOT, b43_ntab_pilot);
- ntab_upload(dev, B43_NTAB_PILOTLT, b43_ntab_pilotlt);
- ntab_upload(dev, B43_NTAB_TDI20A0, b43_ntab_tdi20a0);
- ntab_upload(dev, B43_NTAB_TDI20A1, b43_ntab_tdi20a1);
- ntab_upload(dev, B43_NTAB_TDI40A0, b43_ntab_tdi40a0);
- ntab_upload(dev, B43_NTAB_TDI40A1, b43_ntab_tdi40a1);
- ntab_upload(dev, B43_NTAB_BDI, b43_ntab_bdi);
- ntab_upload(dev, B43_NTAB_CHANEST, b43_ntab_channelest);
- ntab_upload(dev, B43_NTAB_MCS, b43_ntab_mcs);
-
- /* Volatile tables */
- ntab_upload(dev, B43_NTAB_NOISEVAR10, b43_ntab_noisevar10);
- ntab_upload(dev, B43_NTAB_NOISEVAR11, b43_ntab_noisevar11);
- ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt0);
- ntab_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);
- ntab_upload(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);
- ntab_upload(dev, B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);
- ntab_upload(dev, B43_NTAB_C0_GAINCTL, b43_ntab_gainctl0);
- ntab_upload(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);
- ntab_upload(dev, B43_NTAB_C0_IQLT, b43_ntab_iqlt0);
- ntab_upload(dev, B43_NTAB_C1_IQLT, b43_ntab_iqlt1);
- ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_ntab_loftlt0);
- ntab_upload(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);
+ if (dev->phy.rev < 3)
+ b43_nphy_rev0_1_2_table_init(dev);
+ else
+ b43_nphy_rev3plus_table_init(dev);
}

static void b43_nphy_workarounds(struct b43_wldev *dev)
diff --git a/drivers/net/wireless/b43/tables_nphy.c
b/drivers/net/wireless/b43/tables_nphy.c
index 4e23363..d709555 100644
--- a/drivers/net/wireless/b43/tables_nphy.c
+++ b/drivers/net/wireless/b43/tables_nphy.c
@@ -2474,3 +2474,51 @@ void b43_ntab_write(struct b43_wldev *dev, u32
offset, u32 value)
/* Some compiletime assertions... */
assert_ntab_array_sizes();
}
+
+#define ntab_upload(dev, offset, data) do { \
+ unsigned int i; \
+ for (i =3D 0; i < (offset##_SIZE); i++) \
+ b43_ntab_write(dev, (offset) + i, (data)[i]); \
+ } while (0)
+
+void b43_nphy_rev0_1_2_table_init(struct b43_wldev *dev)
+{
+ /* Static tables */
+ ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43_ntab_framestruct);
+ ntab_upload(dev, B43_NTAB_FRAMELT, b43_ntab_framelookup);
+ ntab_upload(dev, B43_NTAB_TMAP, b43_ntab_tmap);
+ ntab_upload(dev, B43_NTAB_TDTRN, b43_ntab_tdtrn);
+ ntab_upload(dev, B43_NTAB_INTLEVEL, b43_ntab_intlevel);
+ ntab_upload(dev, B43_NTAB_PILOT, b43_ntab_pilot);
+ ntab_upload(dev, B43_NTAB_PILOTLT, b43_ntab_pilotlt);
+ ntab_upload(dev, B43_NTAB_TDI20A0, b43_ntab_tdi20a0);
+ ntab_upload(dev, B43_NTAB_TDI20A1, b43_ntab_tdi20a1);
+ ntab_upload(dev, B43_NTAB_TDI40A0, b43_ntab_tdi40a0);
+ ntab_upload(dev, B43_NTAB_TDI40A1, b43_ntab_tdi40a1);
+ ntab_upload(dev, B43_NTAB_BDI, b43_ntab_bdi);
+ ntab_upload(dev, B43_NTAB_CHANEST, b43_ntab_channelest);
+ ntab_upload(dev, B43_NTAB_MCS, b43_ntab_mcs);
+
+ /* Volatile tables */
+ ntab_upload(dev, B43_NTAB_NOISEVAR10, b43_ntab_noisevar10);
+ ntab_upload(dev, B43_NTAB_NOISEVAR11, b43_ntab_noisevar11);
+ ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt0);
+ ntab_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);
+ ntab_upload(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);
+ ntab_upload(dev, B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);
+ ntab_upload(dev, B43_NTAB_C0_GAINCTL, b43_ntab_gainctl0);
+ ntab_upload(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);
+ ntab_upload(dev, B43_NTAB_C0_IQLT, b43_ntab_iqlt0);
+ ntab_upload(dev, B43_NTAB_C1_IQLT, b43_ntab_iqlt1);
+ ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_ntab_loftlt0);
+ ntab_upload(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);
+}
+
+void b43_nphy_rev3plus_table_init(struct b43_wldev *dev)
+{
+ /* Static tables */
+ //TODO
+
+ /* Volatile tables */
+ //TODO
+}
diff --git a/drivers/net/wireless/b43/tables_nphy.h
b/drivers/net/wireless/b43/tables_nphy.h
index 4d498b0..f5c0c2d 100644
--- a/drivers/net/wireless/b43/tables_nphy.h
+++ b/drivers/net/wireless/b43/tables_nphy.h
@@ -128,6 +128,9 @@ b43_nphy_get_chantabent(struct b43_wldev *dev, u8
channel);

void b43_ntab_write(struct b43_wldev *dev, u32 offset, u32 value);

+void b43_nphy_rev0_1_2_table_init(struct b43_wldev *dev);
+void b43_nphy_rev3plus_table_init(struct b43_wldev *dev);
+
extern const u8 b43_ntab_adjustpower0[];
extern const u8 b43_ntab_adjustpower1[];
extern const u16 b43_ntab_bdi[];
@@ -155,5 +158,4 @@ extern const u32 b43_ntab_tdi40a1[];
extern const u32 b43_ntab_tdtrn[];
extern const u32 b43_ntab_tmap[];

-
#endif /* B43_TABLES_NPHY_H_ */
--=20
1.6.4.2

--000e0cdfc4f87a5b69047b474b05
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

It&#39;s just compilation-tested as I don&#39;t own N-PHY device yet (shoul=
d receive one for Christmas). Not sure if we even support SSB used for N-PH=
Y cards.<br><br><br>From 6800722c2fda0e302d7c759a5f2a993503b6581a Mon Sep 1=
7 00:00:00 2001<br>
From: =3D?UTF-8?q?Rafa=3DC5=3D82=3D20Mi=3DC5=3D82ecki?=3D &lt;<a href=3D"ma=
ilto:zajec5 at gmail.com">zajec5 at gmail.com</a>&gt;<br>Date: Tue, 22 Dec 2009 0=
2:27:21 +0100<br>Subject: [PATCH] b43: N-PHY: clean table init, check PHY r=
ev<br>MIME-Version: 1.0<br>
Content-Type: text/plain; charset=3DUTF-8<br>Content-Transfer-Encoding: 8bi=
t<br><br>Move table init to tables_nphy.c, detect newer PHY which use diffe=
rent init<br><br>Signed-off-by: Rafa=C5=82 Mi=C5=82ecki &lt;<a href=3D"mail=
to:zajec5 at gmail.com">zajec5 at gmail.com</a>&gt;<br>
---<br> drivers/net/wireless/b43/phy_n.c =C2=A0 =C2=A0 =C2=A0 | =C2=A0 43 +=
+++------------------------<br> drivers/net/wireless/b43/tables_nphy.c | =
=C2=A0 48 ++++++++++++++++++++++++++++++++<br> drivers/net/wireless/b43/tab=
les_nphy.h | =C2=A0 =C2=A04 ++-<br>
 3 files changed, 58 insertions(+), 37 deletions(-)<br><br>diff --git a/dri=
vers/net/wireless/b43/phy_n.c b/drivers/net/wireless/b43/phy_n.c<br>index 9=
92318a..23cef71 100644<br>--- a/drivers/net/wireless/b43/phy_n.c<br>+++ b/d=
rivers/net/wireless/b43/phy_n.c<br>
@@ -197,44 +197,15 @@ void b43_nphy_radio_turn_off(struct b43_wldev *dev)<b=
r> 		 =C2=A0 =C2=A0 ~B43_NPHY_RFCTL_CMD_EN);<br> }<br> <br>-#define ntab_up=
load(dev, offset, data) do { \<br>-		unsigned int i;						\<br>-		for (i =
=3D 0; i &lt; (offset##_SIZE); i++)			\<br>
-			b43_ntab_write(dev, (offset) + i, (data)[i]);	\<br>-	} while (0)<br>-<b=
r>-/* Upload the N-PHY tables. */<br>+/* Upload the N-PHY tables.<br>+ * <a=
 href=3D"http://bcm-v4.sipsolutions.net/802.11/PHY/N/InitTables">http://bcm=
-v4.sipsolutions.net/802.11/PHY/N/InitTables</a><br>
+ */<br> static void b43_nphy_tables_init(struct b43_wldev *dev)<br> {<br>-=
	/* Static tables */<br>-	ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43_ntab_f=
ramestruct);<br>-	ntab_upload(dev, B43_NTAB_FRAMELT, b43_ntab_framelookup);=
<br>
-	ntab_upload(dev, B43_NTAB_TMAP, b43_ntab_tmap);<br>-	ntab_upload(dev, B43=
_NTAB_TDTRN, b43_ntab_tdtrn);<br>-	ntab_upload(dev, B43_NTAB_INTLEVEL, b43_=
ntab_intlevel);<br>-	ntab_upload(dev, B43_NTAB_PILOT, b43_ntab_pilot);<br>
-	ntab_upload(dev, B43_NTAB_PILOTLT, b43_ntab_pilotlt);<br>-	ntab_upload(de=
v, B43_NTAB_TDI20A0, b43_ntab_tdi20a0);<br>-	ntab_upload(dev, B43_NTAB_TDI2=
0A1, b43_ntab_tdi20a1);<br>-	ntab_upload(dev, B43_NTAB_TDI40A0, b43_ntab_td=
i40a0);<br>
-	ntab_upload(dev, B43_NTAB_TDI40A1, b43_ntab_tdi40a1);<br>-	ntab_upload(de=
v, B43_NTAB_BDI, b43_ntab_bdi);<br>-	ntab_upload(dev, B43_NTAB_CHANEST, b43=
_ntab_channelest);<br>-	ntab_upload(dev, B43_NTAB_MCS, b43_ntab_mcs);<br>
-<br>-	/* Volatile tables */<br>-	ntab_upload(dev, B43_NTAB_NOISEVAR10, b43=
_ntab_noisevar10);<br>-	ntab_upload(dev, B43_NTAB_NOISEVAR11, b43_ntab_nois=
evar11);<br>-	ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt=
0);<br>
-	ntab_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);<br>-	nta=
b_upload(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);<br>-	ntab_upload(=
dev, B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);<br>-	ntab_upload(dev, B43_=
NTAB_C0_GAINCTL, b43_ntab_gainctl0);<br>
-	ntab_upload(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);<br>-	ntab_uploa=
d(dev, B43_NTAB_C0_IQLT, b43_ntab_iqlt0);<br>-	ntab_upload(dev, B43_NTAB_C1=
_IQLT, b43_ntab_iqlt1);<br>-	ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_nta=
b_loftlt0);<br>
-	ntab_upload(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);<br>+	if (dev-&g=
t;phy.rev &lt; 3)<br>+		b43_nphy_rev0_1_2_table_init(dev);<br>+	else<br>+		=
b43_nphy_rev3plus_table_init(dev);<br> }<br> <br> static void b43_nphy_work=
arounds(struct b43_wldev *dev)<br>
diff --git a/drivers/net/wireless/b43/tables_nphy.c b/drivers/net/wireless/=
b43/tables_nphy.c<br>index 4e23363..d709555 100644<br>--- a/drivers/net/wir=
eless/b43/tables_nphy.c<br>+++ b/drivers/net/wireless/b43/tables_nphy.c<br>
@@ -2474,3 +2474,51 @@ void b43_ntab_write(struct b43_wldev *dev, u32 offse=
t, u32 value)<br> 	/* Some compiletime assertions... */<br> 	assert_ntab_ar=
ray_sizes();<br> }<br>+<br>+#define ntab_upload(dev, offset, data) do { \<b=
r>
+		unsigned int i;						\<br>+		for (i =3D 0; i &lt; (offset##_SIZE); i++)	=
		\<br>+			b43_ntab_write(dev, (offset) + i, (data)[i]);	\<br>+	} while (0)=
<br>+<br>+void b43_nphy_rev0_1_2_table_init(struct b43_wldev *dev)<br>+{<br=
>
+	/* Static tables */<br>+	ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43_ntab_=
framestruct);<br>+	ntab_upload(dev, B43_NTAB_FRAMELT, b43_ntab_framelookup)=
;<br>+	ntab_upload(dev, B43_NTAB_TMAP, b43_ntab_tmap);<br>+	ntab_upload(dev=
, B43_NTAB_TDTRN, b43_ntab_tdtrn);<br>
+	ntab_upload(dev, B43_NTAB_INTLEVEL, b43_ntab_intlevel);<br>+	ntab_upload(=
dev, B43_NTAB_PILOT, b43_ntab_pilot);<br>+	ntab_upload(dev, B43_NTAB_PILOTL=
T, b43_ntab_pilotlt);<br>+	ntab_upload(dev, B43_NTAB_TDI20A0, b43_ntab_tdi2=
0a0);<br>
+	ntab_upload(dev, B43_NTAB_TDI20A1, b43_ntab_tdi20a1);<br>+	ntab_upload(de=
v, B43_NTAB_TDI40A0, b43_ntab_tdi40a0);<br>+	ntab_upload(dev, B43_NTAB_TDI4=
0A1, b43_ntab_tdi40a1);<br>+	ntab_upload(dev, B43_NTAB_BDI, b43_ntab_bdi);<=
br>
+	ntab_upload(dev, B43_NTAB_CHANEST, b43_ntab_channelest);<br>+	ntab_upload=
(dev, B43_NTAB_MCS, b43_ntab_mcs);<br>+<br>+	/* Volatile tables */<br>+	nta=
b_upload(dev, B43_NTAB_NOISEVAR10, b43_ntab_noisevar10);<br>+	ntab_upload(d=
ev, B43_NTAB_NOISEVAR11, b43_ntab_noisevar11);<br>
+	ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt0);<br>+	nta=
b_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);<br>+	ntab_upl=
oad(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);<br>+	ntab_upload(dev, =
B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);<br>
+	ntab_upload(dev, B43_NTAB_C0_GAINCTL, b43_ntab_gainctl0);<br>+	ntab_uploa=
d(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);<br>+	ntab_upload(dev, B43_N=
TAB_C0_IQLT, b43_ntab_iqlt0);<br>+	ntab_upload(dev, B43_NTAB_C1_IQLT, b43_n=
tab_iqlt1);<br>
+	ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_ntab_loftlt0);<br>+	ntab_uploa=
d(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);<br>+}<br>+<br>+void b43_nph=
y_rev3plus_table_init(struct b43_wldev *dev)<br>+{<br>+	/* Static tables */=
<br>
+	//TODO<br>+<br>+	/* Volatile tables */<br>+	//TODO<br>+}<br>diff --git a/=
drivers/net/wireless/b43/tables_nphy.h b/drivers/net/wireless/b43/tables_np=
hy.h<br>index 4d498b0..f5c0c2d 100644<br>--- a/drivers/net/wireless/b43/tab=
les_nphy.h<br>
+++ b/drivers/net/wireless/b43/tables_nphy.h<br>@@ -128,6 +128,9 @@ b43_nph=
y_get_chantabent(struct b43_wldev *dev, u8 channel);<br> <br> void b43_ntab=
_write(struct b43_wldev *dev, u32 offset, u32 value);<br> <br>+void b43_nph=
y_rev0_1_2_table_init(struct b43_wldev *dev);<br>
+void b43_nphy_rev3plus_table_init(struct b43_wldev *dev);<br>+<br> extern =
const u8 b43_ntab_adjustpower0[];<br> extern const u8 b43_ntab_adjustpower1=
[];<br> extern const u16 b43_ntab_bdi[];<br>@@ -155,5 +158,4 @@ extern cons=
t u32 b43_ntab_tdi40a1[];<br>
 extern const u32 b43_ntab_tdtrn[];<br> extern const u32 b43_ntab_tmap[];<b=
r> <br>-<br> #endif /* B43_TABLES_NPHY_H_ */<br>-- <br>1.6.4.2<br><br>

--000e0cdfc4f87a5b69047b474b05--
--000e0cdfc4f87a5b78047b474b07
Content-Type: application/octet-stream; 
	name="0001-b43-N-PHY-clean-table-init-check-PHY-rev.patch"
Content-Disposition: attachment; 
	filename="0001-b43-N-PHY-clean-table-init-check-PHY-rev.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_g3i04kza0

RnJvbSA2ODAwNzIyYzJmZGEwZTMwMmQ3Yzc1OWE1ZjJhOTkzNTAzYjY1ODFhIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiA9P1VURi04P3E/UmFmYT1DNT04Mj0yME1pPUM1PTgyZWNraT89
IDx6YWplYzVAZ21haWwuY29tPgpEYXRlOiBUdWUsIDIyIERlYyAyMDA5IDAyOjI3OjIxICswMTAw
ClN1YmplY3Q6IFtQQVRDSF0gYjQzOiBOLVBIWTogY2xlYW4gdGFibGUgaW5pdCwgY2hlY2sgUEhZ
IHJldgpNSU1FLVZlcnNpb246IDEuMApDb250ZW50LVR5cGU6IHRleHQvcGxhaW47IGNoYXJzZXQ9
VVRGLTgKQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogOGJpdAoKTW92ZSB0YWJsZSBpbml0IHRv
IHRhYmxlc19ucGh5LmMsIGRldGVjdCBuZXdlciBQSFkgd2hpY2ggdXNlIGRpZmZlcmVudCBpbml0
CgpTaWduZWQtb2ZmLWJ5OiBSYWZhxYIgTWnFgmVja2kgPHphamVjNUBnbWFpbC5jb20+Ci0tLQog
ZHJpdmVycy9uZXQvd2lyZWxlc3MvYjQzL3BoeV9uLmMgICAgICAgfCAgIDQzICsrKystLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My90YWJsZXNfbnBoeS5j
IHwgICA0OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9uZXQvd2ly
ZWxlc3MvYjQzL3RhYmxlc19ucGh5LmggfCAgICA0ICsrLQogMyBmaWxlcyBjaGFuZ2VkLCA1OCBp
bnNlcnRpb25zKCspLCAzNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC93
aXJlbGVzcy9iNDMvcGh5X24uYyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My9waHlfbi5jCmlu
ZGV4IDk5MjMxOGEuLjIzY2VmNzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0
My9waHlfbi5jCisrKyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My9waHlfbi5jCkBAIC0xOTcs
NDQgKzE5NywxNSBAQCB2b2lkIGI0M19ucGh5X3JhZGlvX3R1cm5fb2ZmKHN0cnVjdCBiNDNfd2xk
ZXYgKmRldikKIAkJICAgICB+QjQzX05QSFlfUkZDVExfQ01EX0VOKTsKIH0KIAotI2RlZmluZSBu
dGFiX3VwbG9hZChkZXYsIG9mZnNldCwgZGF0YSkgZG8geyBcCi0JCXVuc2lnbmVkIGludCBpOwkJ
CQkJCVwKLQkJZm9yIChpID0gMDsgaSA8IChvZmZzZXQjI19TSVpFKTsgaSsrKQkJCVwKLQkJCWI0
M19udGFiX3dyaXRlKGRldiwgKG9mZnNldCkgKyBpLCAoZGF0YSlbaV0pOwlcCi0JfSB3aGlsZSAo
MCkKLQotLyogVXBsb2FkIHRoZSBOLVBIWSB0YWJsZXMuICovCisvKiBVcGxvYWQgdGhlIE4tUEhZ
IHRhYmxlcy4KKyAqIGh0dHA6Ly9iY20tdjQuc2lwc29sdXRpb25zLm5ldC84MDIuMTEvUEhZL04v
SW5pdFRhYmxlcworICovCiBzdGF0aWMgdm9pZCBiNDNfbnBoeV90YWJsZXNfaW5pdChzdHJ1Y3Qg
YjQzX3dsZGV2ICpkZXYpCiB7Ci0JLyogU3RhdGljIHRhYmxlcyAqLwotCW50YWJfdXBsb2FkKGRl
diwgQjQzX05UQUJfRlJBTUVTVFJVQ1QsIGI0M19udGFiX2ZyYW1lc3RydWN0KTsKLQludGFiX3Vw
bG9hZChkZXYsIEI0M19OVEFCX0ZSQU1FTFQsIGI0M19udGFiX2ZyYW1lbG9va3VwKTsKLQludGFi
X3VwbG9hZChkZXYsIEI0M19OVEFCX1RNQVAsIGI0M19udGFiX3RtYXApOwotCW50YWJfdXBsb2Fk
KGRldiwgQjQzX05UQUJfVERUUk4sIGI0M19udGFiX3RkdHJuKTsKLQludGFiX3VwbG9hZChkZXYs
IEI0M19OVEFCX0lOVExFVkVMLCBiNDNfbnRhYl9pbnRsZXZlbCk7Ci0JbnRhYl91cGxvYWQoZGV2
LCBCNDNfTlRBQl9QSUxPVCwgYjQzX250YWJfcGlsb3QpOwotCW50YWJfdXBsb2FkKGRldiwgQjQz
X05UQUJfUElMT1RMVCwgYjQzX250YWJfcGlsb3RsdCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNf
TlRBQl9UREkyMEEwLCBiNDNfbnRhYl90ZGkyMGEwKTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX1RESTIwQTEsIGI0M19udGFiX3RkaTIwYTEpOwotCW50YWJfdXBsb2FkKGRldiwgQjQzX05U
QUJfVERJNDBBMCwgYjQzX250YWJfdGRpNDBhMCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRB
Ql9UREk0MEExLCBiNDNfbnRhYl90ZGk0MGExKTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19OVEFC
X0JESSwgYjQzX250YWJfYmRpKTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0NIQU5FU1Qs
IGI0M19udGFiX2NoYW5uZWxlc3QpOwotCW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfTUNTLCBi
NDNfbnRhYl9tY3MpOwotCi0JLyogVm9sYXRpbGUgdGFibGVzICovCi0JbnRhYl91cGxvYWQoZGV2
LCBCNDNfTlRBQl9OT0lTRVZBUjEwLCBiNDNfbnRhYl9ub2lzZXZhcjEwKTsKLQludGFiX3VwbG9h
ZChkZXYsIEI0M19OVEFCX05PSVNFVkFSMTEsIGI0M19udGFiX25vaXNldmFyMTEpOwotCW50YWJf
dXBsb2FkKGRldiwgQjQzX05UQUJfQzBfRVNUUExULCBiNDNfbnRhYl9lc3RpbWF0ZXBvd2VybHQw
KTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0MxX0VTVFBMVCwgYjQzX250YWJfZXN0aW1h
dGVwb3dlcmx0MSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9BREpQTFQsIGI0M19u
dGFiX2FkanVzdHBvd2VyMCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMV9BREpQTFQs
IGI0M19udGFiX2FkanVzdHBvd2VyMSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9H
QUlOQ1RMLCBiNDNfbnRhYl9nYWluY3RsMCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9D
MV9HQUlOQ1RMLCBiNDNfbnRhYl9nYWluY3RsMSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRB
Ql9DMF9JUUxULCBiNDNfbnRhYl9pcWx0MCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9D
MV9JUUxULCBiNDNfbnRhYl9pcWx0MSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9M
T0ZFRURUSCwgYjQzX250YWJfbG9mdGx0MCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9D
MV9MT0ZFRURUSCwgYjQzX250YWJfbG9mdGx0MSk7CisJaWYgKGRldi0+cGh5LnJldiA8IDMpCisJ
CWI0M19ucGh5X3JldjBfMV8yX3RhYmxlX2luaXQoZGV2KTsKKwllbHNlCisJCWI0M19ucGh5X3Jl
djNwbHVzX3RhYmxlX2luaXQoZGV2KTsKIH0KIAogc3RhdGljIHZvaWQgYjQzX25waHlfd29ya2Fy
b3VuZHMoc3RydWN0IGI0M193bGRldiAqZGV2KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2ly
ZWxlc3MvYjQzL3RhYmxlc19ucGh5LmMgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9iNDMvdGFibGVz
X25waHkuYwppbmRleCA0ZTIzMzYzLi5kNzA5NTU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC93
aXJlbGVzcy9iNDMvdGFibGVzX25waHkuYworKysgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9iNDMv
dGFibGVzX25waHkuYwpAQCAtMjQ3NCwzICsyNDc0LDUxIEBAIHZvaWQgYjQzX250YWJfd3JpdGUo
c3RydWN0IGI0M193bGRldiAqZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsdWUpCiAJLyogU29tZSBj
b21waWxldGltZSBhc3NlcnRpb25zLi4uICovCiAJYXNzZXJ0X250YWJfYXJyYXlfc2l6ZXMoKTsK
IH0KKworI2RlZmluZSBudGFiX3VwbG9hZChkZXYsIG9mZnNldCwgZGF0YSkgZG8geyBcCisJCXVu
c2lnbmVkIGludCBpOwkJCQkJCVwKKwkJZm9yIChpID0gMDsgaSA8IChvZmZzZXQjI19TSVpFKTsg
aSsrKQkJCVwKKwkJCWI0M19udGFiX3dyaXRlKGRldiwgKG9mZnNldCkgKyBpLCAoZGF0YSlbaV0p
OwlcCisJfSB3aGlsZSAoMCkKKwordm9pZCBiNDNfbnBoeV9yZXYwXzFfMl90YWJsZV9pbml0KHN0
cnVjdCBiNDNfd2xkZXYgKmRldikKK3sKKwkvKiBTdGF0aWMgdGFibGVzICovCisJbnRhYl91cGxv
YWQoZGV2LCBCNDNfTlRBQl9GUkFNRVNUUlVDVCwgYjQzX250YWJfZnJhbWVzdHJ1Y3QpOworCW50
YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfRlJBTUVMVCwgYjQzX250YWJfZnJhbWVsb29rdXApOwor
CW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfVE1BUCwgYjQzX250YWJfdG1hcCk7CisJbnRhYl91
cGxvYWQoZGV2LCBCNDNfTlRBQl9URFRSTiwgYjQzX250YWJfdGR0cm4pOworCW50YWJfdXBsb2Fk
KGRldiwgQjQzX05UQUJfSU5UTEVWRUwsIGI0M19udGFiX2ludGxldmVsKTsKKwludGFiX3VwbG9h
ZChkZXYsIEI0M19OVEFCX1BJTE9ULCBiNDNfbnRhYl9waWxvdCk7CisJbnRhYl91cGxvYWQoZGV2
LCBCNDNfTlRBQl9QSUxPVExULCBiNDNfbnRhYl9waWxvdGx0KTsKKwludGFiX3VwbG9hZChkZXYs
IEI0M19OVEFCX1RESTIwQTAsIGI0M19udGFiX3RkaTIwYTApOworCW50YWJfdXBsb2FkKGRldiwg
QjQzX05UQUJfVERJMjBBMSwgYjQzX250YWJfdGRpMjBhMSk7CisJbnRhYl91cGxvYWQoZGV2LCBC
NDNfTlRBQl9UREk0MEEwLCBiNDNfbnRhYl90ZGk0MGEwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0
M19OVEFCX1RESTQwQTEsIGI0M19udGFiX3RkaTQwYTEpOworCW50YWJfdXBsb2FkKGRldiwgQjQz
X05UQUJfQkRJLCBiNDNfbnRhYl9iZGkpOworCW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfQ0hB
TkVTVCwgYjQzX250YWJfY2hhbm5lbGVzdCk7CisJbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9N
Q1MsIGI0M19udGFiX21jcyk7CisKKwkvKiBWb2xhdGlsZSB0YWJsZXMgKi8KKwludGFiX3VwbG9h
ZChkZXYsIEI0M19OVEFCX05PSVNFVkFSMTAsIGI0M19udGFiX25vaXNldmFyMTApOworCW50YWJf
dXBsb2FkKGRldiwgQjQzX05UQUJfTk9JU0VWQVIxMSwgYjQzX250YWJfbm9pc2V2YXIxMSk7CisJ
bnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9FU1RQTFQsIGI0M19udGFiX2VzdGltYXRlcG93
ZXJsdDApOworCW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfQzFfRVNUUExULCBiNDNfbnRhYl9l
c3RpbWF0ZXBvd2VybHQxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0MwX0FESlBMVCwg
YjQzX250YWJfYWRqdXN0cG93ZXIwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0MxX0FE
SlBMVCwgYjQzX250YWJfYWRqdXN0cG93ZXIxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFC
X0MwX0dBSU5DVEwsIGI0M19udGFiX2dhaW5jdGwwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX0MxX0dBSU5DVEwsIGI0M19udGFiX2dhaW5jdGwxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0
M19OVEFCX0MwX0lRTFQsIGI0M19udGFiX2lxbHQwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX0MxX0lRTFQsIGI0M19udGFiX2lxbHQxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFC
X0MwX0xPRkVFRFRILCBiNDNfbnRhYl9sb2Z0bHQwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX0MxX0xPRkVFRFRILCBiNDNfbnRhYl9sb2Z0bHQxKTsKK30KKwordm9pZCBiNDNfbnBoeV9y
ZXYzcGx1c190YWJsZV9pbml0KHN0cnVjdCBiNDNfd2xkZXYgKmRldikKK3sKKwkvKiBTdGF0aWMg
dGFibGVzICovCisJLy9UT0RPCisKKwkvKiBWb2xhdGlsZSB0YWJsZXMgKi8KKwkvL1RPRE8KK30K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My90YWJsZXNfbnBoeS5oIGIvZHJp
dmVycy9uZXQvd2lyZWxlc3MvYjQzL3RhYmxlc19ucGh5LmgKaW5kZXggNGQ0OThiMC4uZjVjMGMy
ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvYjQzL3RhYmxlc19ucGh5LmgKKysr
IGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvYjQzL3RhYmxlc19ucGh5LmgKQEAgLTEyOCw2ICsxMjgs
OSBAQCBiNDNfbnBoeV9nZXRfY2hhbnRhYmVudChzdHJ1Y3QgYjQzX3dsZGV2ICpkZXYsIHU4IGNo
YW5uZWwpOwogCiB2b2lkIGI0M19udGFiX3dyaXRlKHN0cnVjdCBiNDNfd2xkZXYgKmRldiwgdTMy
IG9mZnNldCwgdTMyIHZhbHVlKTsKIAordm9pZCBiNDNfbnBoeV9yZXYwXzFfMl90YWJsZV9pbml0
KHN0cnVjdCBiNDNfd2xkZXYgKmRldik7Cit2b2lkIGI0M19ucGh5X3JldjNwbHVzX3RhYmxlX2lu
aXQoc3RydWN0IGI0M193bGRldiAqZGV2KTsKKwogZXh0ZXJuIGNvbnN0IHU4IGI0M19udGFiX2Fk
anVzdHBvd2VyMFtdOwogZXh0ZXJuIGNvbnN0IHU4IGI0M19udGFiX2FkanVzdHBvd2VyMVtdOwog
ZXh0ZXJuIGNvbnN0IHUxNiBiNDNfbnRhYl9iZGlbXTsKQEAgLTE1NSw1ICsxNTgsNCBAQCBleHRl
cm4gY29uc3QgdTMyIGI0M19udGFiX3RkaTQwYTFbXTsKIGV4dGVybiBjb25zdCB1MzIgYjQzX250
YWJfdGR0cm5bXTsKIGV4dGVybiBjb25zdCB1MzIgYjQzX250YWJfdG1hcFtdOwogCi0KICNlbmRp
ZiAvKiBCNDNfVEFCTEVTX05QSFlfSF8gKi8KLS0gCjEuNi40LjIKCg==
--000e0cdfc4f87a5b78047b474b07--


From zajec5 at gmail.com=  Wed Mar 14 13:15:41 2012
From: zajec5 at gmail.com= (=3D?UTF-8?q?Rafa=3DC5=3D82=3D20Mi=3DC5=3D82ecki?=3D)
Date: Wed, 14 Mar 2012 12:15:41 -0000
Subject: No subject
Message-ID: <mailman.37.1331727412.28966.bcm43xx-dev@lists.berlios.de>

>
Date: Tue, 22 Dec 2009 02:27:21 +0100
Subject: [PATCH] b43: N-PHY: clean table init, check PHY rev
MIME-Version: 1.0
Content-Type: text/plain; charset=3DUTF-8
Content-Transfer-Encoding: 8bit

Move table init to tables_nphy.c, detect newer PHY which use different init

Signed-off-by: Rafa=C5=82 Mi=C5=82ecki <zajec5 at gmail.com>
---
drivers/net/wireless/b43/phy_n.c       |   43 ++++------------------------
drivers/net/wireless/b43/tables_nphy.c |   48
++++++++++++++++++++++++++++++++
drivers/net/wireless/b43/tables_nphy.h |    4 ++-
3 files changed, 58 insertions(+), 37 deletions(-)

diff --git a/drivers/net/wireless/b43/phy_n.c
b/drivers/net/wireless/b43/phy_n.c
index 992318a..23cef71 100644
--- a/drivers/net/wireless/b43/phy_n.c
+++ b/drivers/net/wireless/b43/phy_n.c
@@ -197,44 +197,15 @@ void b43_nphy_radio_turn_off(struct b43_wldev *dev)
    ~B43_NPHY_RFCTL_CMD_EN);
}

-#define ntab_upload(dev, offset, data) do { \
- unsigned int i; \
- for (i =3D 0; i < (offset##_SIZE); i++) \
- b43_ntab_write(dev, (offset) + i, (data)[i]); \
- } while (0)
-
-/* Upload the N-PHY tables. */
+/* Upload the N-PHY tables.
+ * http://bcm-v4.sipsolutions.net/802.11/PHY/N/InitTables
+ */
static void b43_nphy_tables_init(struct b43_wldev *dev)
{
- /* Static tables */
- ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43_ntab_framestruct);
- ntab_upload(dev, B43_NTAB_FRAMELT, b43_ntab_framelookup);
- ntab_upload(dev, B43_NTAB_TMAP, b43_ntab_tmap);
- ntab_upload(dev, B43_NTAB_TDTRN, b43_ntab_tdtrn);
- ntab_upload(dev, B43_NTAB_INTLEVEL, b43_ntab_intlevel);
- ntab_upload(dev, B43_NTAB_PILOT, b43_ntab_pilot);
- ntab_upload(dev, B43_NTAB_PILOTLT, b43_ntab_pilotlt);
- ntab_upload(dev, B43_NTAB_TDI20A0, b43_ntab_tdi20a0);
- ntab_upload(dev, B43_NTAB_TDI20A1, b43_ntab_tdi20a1);
- ntab_upload(dev, B43_NTAB_TDI40A0, b43_ntab_tdi40a0);
- ntab_upload(dev, B43_NTAB_TDI40A1, b43_ntab_tdi40a1);
- ntab_upload(dev, B43_NTAB_BDI, b43_ntab_bdi);
- ntab_upload(dev, B43_NTAB_CHANEST, b43_ntab_channelest);
- ntab_upload(dev, B43_NTAB_MCS, b43_ntab_mcs);
-
- /* Volatile tables */
- ntab_upload(dev, B43_NTAB_NOISEVAR10, b43_ntab_noisevar10);
- ntab_upload(dev, B43_NTAB_NOISEVAR11, b43_ntab_noisevar11);
- ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt0);
- ntab_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);
- ntab_upload(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);
- ntab_upload(dev, B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);
- ntab_upload(dev, B43_NTAB_C0_GAINCTL, b43_ntab_gainctl0);
- ntab_upload(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);
- ntab_upload(dev, B43_NTAB_C0_IQLT, b43_ntab_iqlt0);
- ntab_upload(dev, B43_NTAB_C1_IQLT, b43_ntab_iqlt1);
- ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_ntab_loftlt0);
- ntab_upload(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);
+ if (dev->phy.rev < 3)
+ b43_nphy_rev0_1_2_table_init(dev);
+ else
+ b43_nphy_rev3plus_table_init(dev);
}

static void b43_nphy_workarounds(struct b43_wldev *dev)
diff --git a/drivers/net/wireless/b43/tables_nphy.c
b/drivers/net/wireless/b43/tables_nphy.c
index 4e23363..d709555 100644
--- a/drivers/net/wireless/b43/tables_nphy.c
+++ b/drivers/net/wireless/b43/tables_nphy.c
@@ -2474,3 +2474,51 @@ void b43_ntab_write(struct b43_wldev *dev, u32
offset, u32 value)
/* Some compiletime assertions... */
assert_ntab_array_sizes();
}
+
+#define ntab_upload(dev, offset, data) do { \
+ unsigned int i; \
+ for (i =3D 0; i < (offset##_SIZE); i++) \
+ b43_ntab_write(dev, (offset) + i, (data)[i]); \
+ } while (0)
+
+void b43_nphy_rev0_1_2_table_init(struct b43_wldev *dev)
+{
+ /* Static tables */
+ ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43_ntab_framestruct);
+ ntab_upload(dev, B43_NTAB_FRAMELT, b43_ntab_framelookup);
+ ntab_upload(dev, B43_NTAB_TMAP, b43_ntab_tmap);
+ ntab_upload(dev, B43_NTAB_TDTRN, b43_ntab_tdtrn);
+ ntab_upload(dev, B43_NTAB_INTLEVEL, b43_ntab_intlevel);
+ ntab_upload(dev, B43_NTAB_PILOT, b43_ntab_pilot);
+ ntab_upload(dev, B43_NTAB_PILOTLT, b43_ntab_pilotlt);
+ ntab_upload(dev, B43_NTAB_TDI20A0, b43_ntab_tdi20a0);
+ ntab_upload(dev, B43_NTAB_TDI20A1, b43_ntab_tdi20a1);
+ ntab_upload(dev, B43_NTAB_TDI40A0, b43_ntab_tdi40a0);
+ ntab_upload(dev, B43_NTAB_TDI40A1, b43_ntab_tdi40a1);
+ ntab_upload(dev, B43_NTAB_BDI, b43_ntab_bdi);
+ ntab_upload(dev, B43_NTAB_CHANEST, b43_ntab_channelest);
+ ntab_upload(dev, B43_NTAB_MCS, b43_ntab_mcs);
+
+ /* Volatile tables */
+ ntab_upload(dev, B43_NTAB_NOISEVAR10, b43_ntab_noisevar10);
+ ntab_upload(dev, B43_NTAB_NOISEVAR11, b43_ntab_noisevar11);
+ ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt0);
+ ntab_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);
+ ntab_upload(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);
+ ntab_upload(dev, B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);
+ ntab_upload(dev, B43_NTAB_C0_GAINCTL, b43_ntab_gainctl0);
+ ntab_upload(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);
+ ntab_upload(dev, B43_NTAB_C0_IQLT, b43_ntab_iqlt0);
+ ntab_upload(dev, B43_NTAB_C1_IQLT, b43_ntab_iqlt1);
+ ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_ntab_loftlt0);
+ ntab_upload(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);
+}
+
+void b43_nphy_rev3plus_table_init(struct b43_wldev *dev)
+{
+ /* Static tables */
+ //TODO
+
+ /* Volatile tables */
+ //TODO
+}
diff --git a/drivers/net/wireless/b43/tables_nphy.h
b/drivers/net/wireless/b43/tables_nphy.h
index 4d498b0..f5c0c2d 100644
--- a/drivers/net/wireless/b43/tables_nphy.h
+++ b/drivers/net/wireless/b43/tables_nphy.h
@@ -128,6 +128,9 @@ b43_nphy_get_chantabent(struct b43_wldev *dev, u8
channel);

void b43_ntab_write(struct b43_wldev *dev, u32 offset, u32 value);

+void b43_nphy_rev0_1_2_table_init(struct b43_wldev *dev);
+void b43_nphy_rev3plus_table_init(struct b43_wldev *dev);
+
extern const u8 b43_ntab_adjustpower0[];
extern const u8 b43_ntab_adjustpower1[];
extern const u16 b43_ntab_bdi[];
@@ -155,5 +158,4 @@ extern const u32 b43_ntab_tdi40a1[];
extern const u32 b43_ntab_tdtrn[];
extern const u32 b43_ntab_tmap[];

-
#endif /* B43_TABLES_NPHY_H_ */
--=20
1.6.4.2


--=20
Rafa=C5=82

--00148531b400f4d181047b6416b1
Content-Type: text/html; charset=UTF-8
Content-Transfer-Encoding: quoted-printable

It&#39;s just compilation-tested as I don&#39;t own N-PHY device yet (shoul=
d receive one for Christmas). Of course I enabled N-PHY in Kconfig.<br><br>=
I already sent this to bcm43xx-dev but didn&#39;t get any review. Michael t=
old me to send it to you John and to linux-wireless. Is there anyone how co=
uld review/ack my patch?<br>
<br><br>From 6800722c2fda0e302d7c759a5f2a993503b6581a Mon Sep 17 00:00:00 2=
001<br>From: =3D?UTF-8?q?Rafa=3DC5=3D82=3D20Mi=3DC5=3D82ecki?=3D &lt;<a hre=
f=3D"mailto:zajec5 at gmail.com">zajec5 at gmail.com</a>&gt;<br>Date: Tue, 22 Dec=
 2009 02:27:21 +0100<br>
Subject: [PATCH] b43: N-PHY: clean table init, check PHY rev<br>MIME-Versio=
n: 1.0<br>Content-Type: text/plain; charset=3DUTF-8<br>Content-Transfer-Enc=
oding: 8bit<br><br>Move table init to tables_nphy.c, detect newer PHY which=
 use different init<br>
<br>Signed-off-by: Rafa=C5=82 Mi=C5=82ecki &lt;<a href=3D"mailto:zajec5 at gma=
il.com">zajec5 at gmail.com</a>&gt;<br>---<br> drivers/net/wireless/b43/phy_n.=
c =C2=A0 =C2=A0 =C2=A0 | =C2=A0 43 ++++------------------------<br> drivers=
/net/wireless/b43/tables_nphy.c | =C2=A0 48 +++++++++++++++++++++++++++++++=
+<br>
 drivers/net/wireless/b43/tables_nphy.h | =C2=A0 =C2=A04 ++-<br> 3 files ch=
anged, 58 insertions(+), 37 deletions(-)<br><br>diff --git a/drivers/net/wi=
reless/b43/phy_n.c b/drivers/net/wireless/b43/phy_n.c<br>index 992318a..23c=
ef71 100644<br>
--- a/drivers/net/wireless/b43/phy_n.c<br>+++ b/drivers/net/wireless/b43/ph=
y_n.c<br>@@ -197,44 +197,15 @@ void b43_nphy_radio_turn_off(struct b43_wlde=
v *dev)<br> 		 =C2=A0 =C2=A0 ~B43_NPHY_RFCTL_CMD_EN);<br> }<br> <br>-#defin=
e ntab_upload(dev, offset, data) do { \<br>
-		unsigned int i;						\<br>-		for (i =3D 0; i &lt; (offset##_SIZE); i++)	=
		\<br>-			b43_ntab_write(dev, (offset) + i, (data)[i]);	\<br>-	} while (0)=
<br>-<br>-/* Upload the N-PHY tables. */<br>+/* Upload the N-PHY tables.<br=
>
+ * <a href=3D"http://bcm-v4.sipsolutions.net/802.11/PHY/N/InitTables">http=
://bcm-v4.sipsolutions.net/802.11/PHY/N/InitTables</a><br>+ */<br> static v=
oid b43_nphy_tables_init(struct b43_wldev *dev)<br> {<br>-	/* Static tables=
 */<br>
-	ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43_ntab_framestruct);<br>-	ntab_u=
pload(dev, B43_NTAB_FRAMELT, b43_ntab_framelookup);<br>-	ntab_upload(dev, B=
43_NTAB_TMAP, b43_ntab_tmap);<br>-	ntab_upload(dev, B43_NTAB_TDTRN, b43_nta=
b_tdtrn);<br>
-	ntab_upload(dev, B43_NTAB_INTLEVEL, b43_ntab_intlevel);<br>-	ntab_upload(=
dev, B43_NTAB_PILOT, b43_ntab_pilot);<br>-	ntab_upload(dev, B43_NTAB_PILOTL=
T, b43_ntab_pilotlt);<br>-	ntab_upload(dev, B43_NTAB_TDI20A0, b43_ntab_tdi2=
0a0);<br>
-	ntab_upload(dev, B43_NTAB_TDI20A1, b43_ntab_tdi20a1);<br>-	ntab_upload(de=
v, B43_NTAB_TDI40A0, b43_ntab_tdi40a0);<br>-	ntab_upload(dev, B43_NTAB_TDI4=
0A1, b43_ntab_tdi40a1);<br>-	ntab_upload(dev, B43_NTAB_BDI, b43_ntab_bdi);<=
br>
-	ntab_upload(dev, B43_NTAB_CHANEST, b43_ntab_channelest);<br>-	ntab_upload=
(dev, B43_NTAB_MCS, b43_ntab_mcs);<br>-<br>-	/* Volatile tables */<br>-	nta=
b_upload(dev, B43_NTAB_NOISEVAR10, b43_ntab_noisevar10);<br>-	ntab_upload(d=
ev, B43_NTAB_NOISEVAR11, b43_ntab_noisevar11);<br>
-	ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt0);<br>-	nta=
b_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);<br>-	ntab_upl=
oad(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);<br>-	ntab_upload(dev, =
B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);<br>
-	ntab_upload(dev, B43_NTAB_C0_GAINCTL, b43_ntab_gainctl0);<br>-	ntab_uploa=
d(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);<br>-	ntab_upload(dev, B43_N=
TAB_C0_IQLT, b43_ntab_iqlt0);<br>-	ntab_upload(dev, B43_NTAB_C1_IQLT, b43_n=
tab_iqlt1);<br>
-	ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_ntab_loftlt0);<br>-	ntab_uploa=
d(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);<br>+	if (dev-&gt;phy.rev &l=
t; 3)<br>+		b43_nphy_rev0_1_2_table_init(dev);<br>+	else<br>+		b43_nphy_rev=
3plus_table_init(dev);<br>
 }<br> <br> static void b43_nphy_workarounds(struct b43_wldev *dev)<br>diff=
 --git a/drivers/net/wireless/b43/tables_nphy.c b/drivers/net/wireless/b43/=
tables_nphy.c<br>index 4e23363..d709555 100644<br>--- a/drivers/net/wireles=
s/b43/tables_nphy.c<br>
+++ b/drivers/net/wireless/b43/tables_nphy.c<br>@@ -2474,3 +2474,51 @@ void=
 b43_ntab_write(struct b43_wldev *dev, u32 offset, u32 value)<br> 	/* Some =
compiletime assertions... */<br> 	assert_ntab_array_sizes();<br> }<br>+<br>
+#define ntab_upload(dev, offset, data) do { \<br>+		unsigned int i;						\=
<br>+		for (i =3D 0; i &lt; (offset##_SIZE); i++)			\<br>+			b43_ntab_write=
(dev, (offset) + i, (data)[i]);	\<br>+	} while (0)<br>+<br>+void b43_nphy_r=
ev0_1_2_table_init(struct b43_wldev *dev)<br>
+{<br>+	/* Static tables */<br>+	ntab_upload(dev, B43_NTAB_FRAMESTRUCT, b43=
_ntab_framestruct);<br>+	ntab_upload(dev, B43_NTAB_FRAMELT, b43_ntab_framel=
ookup);<br>+	ntab_upload(dev, B43_NTAB_TMAP, b43_ntab_tmap);<br>+	ntab_uplo=
ad(dev, B43_NTAB_TDTRN, b43_ntab_tdtrn);<br>
+	ntab_upload(dev, B43_NTAB_INTLEVEL, b43_ntab_intlevel);<br>+	ntab_upload(=
dev, B43_NTAB_PILOT, b43_ntab_pilot);<br>+	ntab_upload(dev, B43_NTAB_PILOTL=
T, b43_ntab_pilotlt);<br>+	ntab_upload(dev, B43_NTAB_TDI20A0, b43_ntab_tdi2=
0a0);<br>
+	ntab_upload(dev, B43_NTAB_TDI20A1, b43_ntab_tdi20a1);<br>+	ntab_upload(de=
v, B43_NTAB_TDI40A0, b43_ntab_tdi40a0);<br>+	ntab_upload(dev, B43_NTAB_TDI4=
0A1, b43_ntab_tdi40a1);<br>+	ntab_upload(dev, B43_NTAB_BDI, b43_ntab_bdi);<=
br>
+	ntab_upload(dev, B43_NTAB_CHANEST, b43_ntab_channelest);<br>+	ntab_upload=
(dev, B43_NTAB_MCS, b43_ntab_mcs);<br>+<br>+	/* Volatile tables */<br>+	nta=
b_upload(dev, B43_NTAB_NOISEVAR10, b43_ntab_noisevar10);<br>+	ntab_upload(d=
ev, B43_NTAB_NOISEVAR11, b43_ntab_noisevar11);<br>
+	ntab_upload(dev, B43_NTAB_C0_ESTPLT, b43_ntab_estimatepowerlt0);<br>+	nta=
b_upload(dev, B43_NTAB_C1_ESTPLT, b43_ntab_estimatepowerlt1);<br>+	ntab_upl=
oad(dev, B43_NTAB_C0_ADJPLT, b43_ntab_adjustpower0);<br>+	ntab_upload(dev, =
B43_NTAB_C1_ADJPLT, b43_ntab_adjustpower1);<br>
+	ntab_upload(dev, B43_NTAB_C0_GAINCTL, b43_ntab_gainctl0);<br>+	ntab_uploa=
d(dev, B43_NTAB_C1_GAINCTL, b43_ntab_gainctl1);<br>+	ntab_upload(dev, B43_N=
TAB_C0_IQLT, b43_ntab_iqlt0);<br>+	ntab_upload(dev, B43_NTAB_C1_IQLT, b43_n=
tab_iqlt1);<br>
+	ntab_upload(dev, B43_NTAB_C0_LOFEEDTH, b43_ntab_loftlt0);<br>+	ntab_uploa=
d(dev, B43_NTAB_C1_LOFEEDTH, b43_ntab_loftlt1);<br>+}<br>+<br>+void b43_nph=
y_rev3plus_table_init(struct b43_wldev *dev)<br>+{<br>+	/* Static tables */=
<br>
+	//TODO<br>+<br>+	/* Volatile tables */<br>+	//TODO<br>+}<br>diff --git a/=
drivers/net/wireless/b43/tables_nphy.h b/drivers/net/wireless/b43/tables_np=
hy.h<br>index 4d498b0..f5c0c2d 100644<br>--- a/drivers/net/wireless/b43/tab=
les_nphy.h<br>
+++ b/drivers/net/wireless/b43/tables_nphy.h<br>@@ -128,6 +128,9 @@ b43_nph=
y_get_chantabent(struct b43_wldev *dev, u8 channel);<br> <br> void b43_ntab=
_write(struct b43_wldev *dev, u32 offset, u32 value);<br> <br>+void b43_nph=
y_rev0_1_2_table_init(struct b43_wldev *dev);<br>
+void b43_nphy_rev3plus_table_init(struct b43_wldev *dev);<br>+<br> extern =
const u8 b43_ntab_adjustpower0[];<br> extern const u8 b43_ntab_adjustpower1=
[];<br> extern const u16 b43_ntab_bdi[];<br>@@ -155,5 +158,4 @@ extern cons=
t u32 b43_ntab_tdi40a1[];<br>
 extern const u32 b43_ntab_tdtrn[];<br> extern const u32 b43_ntab_tmap[];<b=
r> <br>-<br> #endif /* B43_TABLES_NPHY_H_ */<br>-- <br>1.6.4.2<br><br><br>-=
- <br>Rafa=C5=82

--00148531b400f4d181047b6416b1--
--00148531b400f4d193047b6416b3
Content-Type: application/octet-stream; 
	name="0001-b43-N-PHY-clean-table-init-check-PHY-rev.patch"
Content-Disposition: attachment; 
	filename="0001-b43-N-PHY-clean-table-init-check-PHY-rev.patch"
Content-Transfer-Encoding: base64
X-Attachment-Id: f_g3k1ynpg0

RnJvbSA2ODAwNzIyYzJmZGEwZTMwMmQ3Yzc1OWE1ZjJhOTkzNTAzYjY1ODFhIE1vbiBTZXAgMTcg
MDA6MDA6MDAgMjAwMQpGcm9tOiA9P1VURi04P3E/UmFmYT1DNT04Mj0yME1pPUM1PTgyZWNraT89
IDx6YWplYzVAZ21haWwuY29tPgpEYXRlOiBUdWUsIDIyIERlYyAyMDA5IDAyOjI3OjIxICswMTAw
ClN1YmplY3Q6IFtQQVRDSF0gYjQzOiBOLVBIWTogY2xlYW4gdGFibGUgaW5pdCwgY2hlY2sgUEhZ
IHJldgpNSU1FLVZlcnNpb246IDEuMApDb250ZW50LVR5cGU6IHRleHQvcGxhaW47IGNoYXJzZXQ9
VVRGLTgKQ29udGVudC1UcmFuc2Zlci1FbmNvZGluZzogOGJpdAoKTW92ZSB0YWJsZSBpbml0IHRv
IHRhYmxlc19ucGh5LmMsIGRldGVjdCBuZXdlciBQSFkgd2hpY2ggdXNlIGRpZmZlcmVudCBpbml0
CgpTaWduZWQtb2ZmLWJ5OiBSYWZhxYIgTWnFgmVja2kgPHphamVjNUBnbWFpbC5jb20+Ci0tLQog
ZHJpdmVycy9uZXQvd2lyZWxlc3MvYjQzL3BoeV9uLmMgICAgICAgfCAgIDQzICsrKystLS0tLS0t
LS0tLS0tLS0tLS0tLS0tLS0KIGRyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My90YWJsZXNfbnBoeS5j
IHwgICA0OCArKysrKysrKysrKysrKysrKysrKysrKysrKysrKysrKwogZHJpdmVycy9uZXQvd2ly
ZWxlc3MvYjQzL3RhYmxlc19ucGh5LmggfCAgICA0ICsrLQogMyBmaWxlcyBjaGFuZ2VkLCA1OCBp
bnNlcnRpb25zKCspLCAzNyBkZWxldGlvbnMoLSkKCmRpZmYgLS1naXQgYS9kcml2ZXJzL25ldC93
aXJlbGVzcy9iNDMvcGh5X24uYyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My9waHlfbi5jCmlu
ZGV4IDk5MjMxOGEuLjIzY2VmNzEgMTAwNjQ0Ci0tLSBhL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0
My9waHlfbi5jCisrKyBiL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My9waHlfbi5jCkBAIC0xOTcs
NDQgKzE5NywxNSBAQCB2b2lkIGI0M19ucGh5X3JhZGlvX3R1cm5fb2ZmKHN0cnVjdCBiNDNfd2xk
ZXYgKmRldikKIAkJICAgICB+QjQzX05QSFlfUkZDVExfQ01EX0VOKTsKIH0KIAotI2RlZmluZSBu
dGFiX3VwbG9hZChkZXYsIG9mZnNldCwgZGF0YSkgZG8geyBcCi0JCXVuc2lnbmVkIGludCBpOwkJ
CQkJCVwKLQkJZm9yIChpID0gMDsgaSA8IChvZmZzZXQjI19TSVpFKTsgaSsrKQkJCVwKLQkJCWI0
M19udGFiX3dyaXRlKGRldiwgKG9mZnNldCkgKyBpLCAoZGF0YSlbaV0pOwlcCi0JfSB3aGlsZSAo
MCkKLQotLyogVXBsb2FkIHRoZSBOLVBIWSB0YWJsZXMuICovCisvKiBVcGxvYWQgdGhlIE4tUEhZ
IHRhYmxlcy4KKyAqIGh0dHA6Ly9iY20tdjQuc2lwc29sdXRpb25zLm5ldC84MDIuMTEvUEhZL04v
SW5pdFRhYmxlcworICovCiBzdGF0aWMgdm9pZCBiNDNfbnBoeV90YWJsZXNfaW5pdChzdHJ1Y3Qg
YjQzX3dsZGV2ICpkZXYpCiB7Ci0JLyogU3RhdGljIHRhYmxlcyAqLwotCW50YWJfdXBsb2FkKGRl
diwgQjQzX05UQUJfRlJBTUVTVFJVQ1QsIGI0M19udGFiX2ZyYW1lc3RydWN0KTsKLQludGFiX3Vw
bG9hZChkZXYsIEI0M19OVEFCX0ZSQU1FTFQsIGI0M19udGFiX2ZyYW1lbG9va3VwKTsKLQludGFi
X3VwbG9hZChkZXYsIEI0M19OVEFCX1RNQVAsIGI0M19udGFiX3RtYXApOwotCW50YWJfdXBsb2Fk
KGRldiwgQjQzX05UQUJfVERUUk4sIGI0M19udGFiX3RkdHJuKTsKLQludGFiX3VwbG9hZChkZXYs
IEI0M19OVEFCX0lOVExFVkVMLCBiNDNfbnRhYl9pbnRsZXZlbCk7Ci0JbnRhYl91cGxvYWQoZGV2
LCBCNDNfTlRBQl9QSUxPVCwgYjQzX250YWJfcGlsb3QpOwotCW50YWJfdXBsb2FkKGRldiwgQjQz
X05UQUJfUElMT1RMVCwgYjQzX250YWJfcGlsb3RsdCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNf
TlRBQl9UREkyMEEwLCBiNDNfbnRhYl90ZGkyMGEwKTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX1RESTIwQTEsIGI0M19udGFiX3RkaTIwYTEpOwotCW50YWJfdXBsb2FkKGRldiwgQjQzX05U
QUJfVERJNDBBMCwgYjQzX250YWJfdGRpNDBhMCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRB
Ql9UREk0MEExLCBiNDNfbnRhYl90ZGk0MGExKTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19OVEFC
X0JESSwgYjQzX250YWJfYmRpKTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0NIQU5FU1Qs
IGI0M19udGFiX2NoYW5uZWxlc3QpOwotCW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfTUNTLCBi
NDNfbnRhYl9tY3MpOwotCi0JLyogVm9sYXRpbGUgdGFibGVzICovCi0JbnRhYl91cGxvYWQoZGV2
LCBCNDNfTlRBQl9OT0lTRVZBUjEwLCBiNDNfbnRhYl9ub2lzZXZhcjEwKTsKLQludGFiX3VwbG9h
ZChkZXYsIEI0M19OVEFCX05PSVNFVkFSMTEsIGI0M19udGFiX25vaXNldmFyMTEpOwotCW50YWJf
dXBsb2FkKGRldiwgQjQzX05UQUJfQzBfRVNUUExULCBiNDNfbnRhYl9lc3RpbWF0ZXBvd2VybHQw
KTsKLQludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0MxX0VTVFBMVCwgYjQzX250YWJfZXN0aW1h
dGVwb3dlcmx0MSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9BREpQTFQsIGI0M19u
dGFiX2FkanVzdHBvd2VyMCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMV9BREpQTFQs
IGI0M19udGFiX2FkanVzdHBvd2VyMSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9H
QUlOQ1RMLCBiNDNfbnRhYl9nYWluY3RsMCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9D
MV9HQUlOQ1RMLCBiNDNfbnRhYl9nYWluY3RsMSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRB
Ql9DMF9JUUxULCBiNDNfbnRhYl9pcWx0MCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9D
MV9JUUxULCBiNDNfbnRhYl9pcWx0MSk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9M
T0ZFRURUSCwgYjQzX250YWJfbG9mdGx0MCk7Ci0JbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9D
MV9MT0ZFRURUSCwgYjQzX250YWJfbG9mdGx0MSk7CisJaWYgKGRldi0+cGh5LnJldiA8IDMpCisJ
CWI0M19ucGh5X3JldjBfMV8yX3RhYmxlX2luaXQoZGV2KTsKKwllbHNlCisJCWI0M19ucGh5X3Jl
djNwbHVzX3RhYmxlX2luaXQoZGV2KTsKIH0KIAogc3RhdGljIHZvaWQgYjQzX25waHlfd29ya2Fy
b3VuZHMoc3RydWN0IGI0M193bGRldiAqZGV2KQpkaWZmIC0tZ2l0IGEvZHJpdmVycy9uZXQvd2ly
ZWxlc3MvYjQzL3RhYmxlc19ucGh5LmMgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9iNDMvdGFibGVz
X25waHkuYwppbmRleCA0ZTIzMzYzLi5kNzA5NTU1IDEwMDY0NAotLS0gYS9kcml2ZXJzL25ldC93
aXJlbGVzcy9iNDMvdGFibGVzX25waHkuYworKysgYi9kcml2ZXJzL25ldC93aXJlbGVzcy9iNDMv
dGFibGVzX25waHkuYwpAQCAtMjQ3NCwzICsyNDc0LDUxIEBAIHZvaWQgYjQzX250YWJfd3JpdGUo
c3RydWN0IGI0M193bGRldiAqZGV2LCB1MzIgb2Zmc2V0LCB1MzIgdmFsdWUpCiAJLyogU29tZSBj
b21waWxldGltZSBhc3NlcnRpb25zLi4uICovCiAJYXNzZXJ0X250YWJfYXJyYXlfc2l6ZXMoKTsK
IH0KKworI2RlZmluZSBudGFiX3VwbG9hZChkZXYsIG9mZnNldCwgZGF0YSkgZG8geyBcCisJCXVu
c2lnbmVkIGludCBpOwkJCQkJCVwKKwkJZm9yIChpID0gMDsgaSA8IChvZmZzZXQjI19TSVpFKTsg
aSsrKQkJCVwKKwkJCWI0M19udGFiX3dyaXRlKGRldiwgKG9mZnNldCkgKyBpLCAoZGF0YSlbaV0p
OwlcCisJfSB3aGlsZSAoMCkKKwordm9pZCBiNDNfbnBoeV9yZXYwXzFfMl90YWJsZV9pbml0KHN0
cnVjdCBiNDNfd2xkZXYgKmRldikKK3sKKwkvKiBTdGF0aWMgdGFibGVzICovCisJbnRhYl91cGxv
YWQoZGV2LCBCNDNfTlRBQl9GUkFNRVNUUlVDVCwgYjQzX250YWJfZnJhbWVzdHJ1Y3QpOworCW50
YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfRlJBTUVMVCwgYjQzX250YWJfZnJhbWVsb29rdXApOwor
CW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfVE1BUCwgYjQzX250YWJfdG1hcCk7CisJbnRhYl91
cGxvYWQoZGV2LCBCNDNfTlRBQl9URFRSTiwgYjQzX250YWJfdGR0cm4pOworCW50YWJfdXBsb2Fk
KGRldiwgQjQzX05UQUJfSU5UTEVWRUwsIGI0M19udGFiX2ludGxldmVsKTsKKwludGFiX3VwbG9h
ZChkZXYsIEI0M19OVEFCX1BJTE9ULCBiNDNfbnRhYl9waWxvdCk7CisJbnRhYl91cGxvYWQoZGV2
LCBCNDNfTlRBQl9QSUxPVExULCBiNDNfbnRhYl9waWxvdGx0KTsKKwludGFiX3VwbG9hZChkZXYs
IEI0M19OVEFCX1RESTIwQTAsIGI0M19udGFiX3RkaTIwYTApOworCW50YWJfdXBsb2FkKGRldiwg
QjQzX05UQUJfVERJMjBBMSwgYjQzX250YWJfdGRpMjBhMSk7CisJbnRhYl91cGxvYWQoZGV2LCBC
NDNfTlRBQl9UREk0MEEwLCBiNDNfbnRhYl90ZGk0MGEwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0
M19OVEFCX1RESTQwQTEsIGI0M19udGFiX3RkaTQwYTEpOworCW50YWJfdXBsb2FkKGRldiwgQjQz
X05UQUJfQkRJLCBiNDNfbnRhYl9iZGkpOworCW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfQ0hB
TkVTVCwgYjQzX250YWJfY2hhbm5lbGVzdCk7CisJbnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9N
Q1MsIGI0M19udGFiX21jcyk7CisKKwkvKiBWb2xhdGlsZSB0YWJsZXMgKi8KKwludGFiX3VwbG9h
ZChkZXYsIEI0M19OVEFCX05PSVNFVkFSMTAsIGI0M19udGFiX25vaXNldmFyMTApOworCW50YWJf
dXBsb2FkKGRldiwgQjQzX05UQUJfTk9JU0VWQVIxMSwgYjQzX250YWJfbm9pc2V2YXIxMSk7CisJ
bnRhYl91cGxvYWQoZGV2LCBCNDNfTlRBQl9DMF9FU1RQTFQsIGI0M19udGFiX2VzdGltYXRlcG93
ZXJsdDApOworCW50YWJfdXBsb2FkKGRldiwgQjQzX05UQUJfQzFfRVNUUExULCBiNDNfbnRhYl9l
c3RpbWF0ZXBvd2VybHQxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0MwX0FESlBMVCwg
YjQzX250YWJfYWRqdXN0cG93ZXIwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFCX0MxX0FE
SlBMVCwgYjQzX250YWJfYWRqdXN0cG93ZXIxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFC
X0MwX0dBSU5DVEwsIGI0M19udGFiX2dhaW5jdGwwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX0MxX0dBSU5DVEwsIGI0M19udGFiX2dhaW5jdGwxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0
M19OVEFCX0MwX0lRTFQsIGI0M19udGFiX2lxbHQwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX0MxX0lRTFQsIGI0M19udGFiX2lxbHQxKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19OVEFC
X0MwX0xPRkVFRFRILCBiNDNfbnRhYl9sb2Z0bHQwKTsKKwludGFiX3VwbG9hZChkZXYsIEI0M19O
VEFCX0MxX0xPRkVFRFRILCBiNDNfbnRhYl9sb2Z0bHQxKTsKK30KKwordm9pZCBiNDNfbnBoeV9y
ZXYzcGx1c190YWJsZV9pbml0KHN0cnVjdCBiNDNfd2xkZXYgKmRldikKK3sKKwkvKiBTdGF0aWMg
dGFibGVzICovCisJLy9UT0RPCisKKwkvKiBWb2xhdGlsZSB0YWJsZXMgKi8KKwkvL1RPRE8KK30K
ZGlmZiAtLWdpdCBhL2RyaXZlcnMvbmV0L3dpcmVsZXNzL2I0My90YWJsZXNfbnBoeS5oIGIvZHJp
dmVycy9uZXQvd2lyZWxlc3MvYjQzL3RhYmxlc19ucGh5LmgKaW5kZXggNGQ0OThiMC4uZjVjMGMy
ZCAxMDA2NDQKLS0tIGEvZHJpdmVycy9uZXQvd2lyZWxlc3MvYjQzL3RhYmxlc19ucGh5LmgKKysr
IGIvZHJpdmVycy9uZXQvd2lyZWxlc3MvYjQzL3RhYmxlc19ucGh5LmgKQEAgLTEyOCw2ICsxMjgs
OSBAQCBiNDNfbnBoeV9nZXRfY2hhbnRhYmVudChzdHJ1Y3QgYjQzX3dsZGV2ICpkZXYsIHU4IGNo
YW5uZWwpOwogCiB2b2lkIGI0M19udGFiX3dyaXRlKHN0cnVjdCBiNDNfd2xkZXYgKmRldiwgdTMy
IG9mZnNldCwgdTMyIHZhbHVlKTsKIAordm9pZCBiNDNfbnBoeV9yZXYwXzFfMl90YWJsZV9pbml0
KHN0cnVjdCBiNDNfd2xkZXYgKmRldik7Cit2b2lkIGI0M19ucGh5X3JldjNwbHVzX3RhYmxlX2lu
aXQoc3RydWN0IGI0M193bGRldiAqZGV2KTsKKwogZXh0ZXJuIGNvbnN0IHU4IGI0M19udGFiX2Fk
anVzdHBvd2VyMFtdOwogZXh0ZXJuIGNvbnN0IHU4IGI0M19udGFiX2FkanVzdHBvd2VyMVtdOwog
ZXh0ZXJuIGNvbnN0IHUxNiBiNDNfbnRhYl9iZGlbXTsKQEAgLTE1NSw1ICsxNTgsNCBAQCBleHRl
cm4gY29uc3QgdTMyIGI0M19udGFiX3RkaTQwYTFbXTsKIGV4dGVybiBjb25zdCB1MzIgYjQzX250
YWJfdGR0cm5bXTsKIGV4dGVybiBjb25zdCB1MzIgYjQzX250YWJfdG1hcFtdOwogCi0KICNlbmRp
ZiAvKiBCNDNfVEFCTEVTX05QSFlfSF8gKi8KLS0gCjEuNi40LjIKCg==
--00148531b400f4d193047b6416b3--


