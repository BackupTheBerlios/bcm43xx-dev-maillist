<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> mac80211: changing number of queues in ops-&gt;start
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-April/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20mac80211%3A%20changing%20number%20of%20queues%20in%20ops-%3Estart&In-Reply-To=%3C1239132567.7187.1.camel%40johannes.local%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005388.html">
   <LINK REL="Next"  HREF="005390.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>mac80211: changing number of queues in ops-&gt;start</H1>
    <B>Johannes Berg</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20mac80211%3A%20changing%20number%20of%20queues%20in%20ops-%3Estart&In-Reply-To=%3C1239132567.7187.1.camel%40johannes.local%3E"
       TITLE="mac80211: changing number of queues in ops-&gt;start">johannes at sipsolutions.net
       </A><BR>
    <I>Tue Apr  7 21:29:27 CEST 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005388.html">mac80211: changing number of queues in ops-&gt;start
</A></li>
        <LI>Next message: <A HREF="005390.html">mac80211: changing number of queues in ops-&gt;start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5389">[ date ]</a>
              <a href="thread.html#5389">[ thread ]</a>
              <a href="subject.html#5389">[ subject ]</a>
              <a href="author.html#5389">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Tue, 2009-04-07 at 20:24 +0200, Michael Buesch wrote:
&gt;<i> I'm wondering how to implement QoS capability runtime detection
</I>&gt;<i> in a mac80211 driver.
</I>&gt;<i> 
</I>&gt;<i> In b43 we don't know at ieee80211_register time whether the firmware does
</I>&gt;<i> support QoS or not, because it's not loaded yet. (Reasons for not loading
</I>&gt;<i> it that early are issues with builtin-b43, etc...).
</I>&gt;<i> So we don't know whether we are going to load opensource fw (no QoS) or
</I>&gt;<i> proprietary fw (QoS capable).
</I>&gt;<i> But it seems that mac80211 requires to set hw-&gt;queues before ieee80211_register.
</I>&gt;<i> 
</I>&gt;<i> So what I'd need is a way to change the number of possible queues from within
</I>&gt;<i> the ops-&gt;start handler.
</I>
Well, I suppose you could register with the max and later reduce and
stop the remaining queues you're not using... Or not stop them and drop
packets on them. That's somewhat fragile, gives people who look at tc a
wrong idea, and I can't imagine supporting it, but it should work.

johannes
-------------- next part --------------
A non-text attachment was scrubbed...
Name: signature.asc
Type: application/pgp-signature
Size: 836 bytes
Desc: This is a digitally signed message part
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20090407/8a98a844/attachment.pgp">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20090407/8a98a844/attachment.pgp</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005388.html">mac80211: changing number of queues in ops-&gt;start
</A></li>
	<LI>Next message: <A HREF="005390.html">mac80211: changing number of queues in ops-&gt;start
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5389">[ date ]</a>
              <a href="thread.html#5389">[ thread ]</a>
              <a href="subject.html#5389">[ subject ]</a>
              <a href="author.html#5389">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
