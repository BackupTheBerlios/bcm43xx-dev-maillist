<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Updated Status on b43 driver and Fedora 7
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-August/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Updated%20Status%20on%20b43%20driver%20and%20Fedora%207&In-Reply-To=%3C46D2B7C3.9040206%40sms.ed.ac.uk%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002207.html">
   <LINK REL="Next"  HREF="002222.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Updated Status on b43 driver and Fedora 7</H1>
    <B>Ioannis Nousias</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Updated%20Status%20on%20b43%20driver%20and%20Fedora%207&In-Reply-To=%3C46D2B7C3.9040206%40sms.ed.ac.uk%3E"
       TITLE="Updated Status on b43 driver and Fedora 7">s0238762 at sms.ed.ac.uk
       </A><BR>
    <I>Mon Aug 27 13:38:43 CEST 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002207.html">Updated Status on b43 driver and Fedora 7
</A></li>
        <LI>Next message: <A HREF="002222.html">Updated Status on b43 driver and Fedora 7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2217">[ date ]</a>
              <a href="thread.html#2217">[ thread ]</a>
              <a href="subject.html#2217">[ subject ]</a>
              <a href="author.html#2217">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Larry Finger wrote:
&gt;<i> Andrig T. Miller wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> I booted a new Fedora kernel this morning, and it loaded the new b43 
</I>&gt;&gt;<i> driver, and I still had the v4 firmware in /lib/firmware.  The first 
</I>&gt;&gt;<i> time I connected it connected at 2 Mb/s, versus the 1 Mb/s that it used 
</I>&gt;&gt;<i> to connect at.  I had needed to reboot a second time for an unrelated 
</I>&gt;&gt;<i> reason, and when it connected the next time I connected at 5 Mb/s, and I 
</I>&gt;&gt;<i> have been happily using my internal Broadcom 4318 wireless networking 
</I>&gt;&gt;<i> all day, without issue.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Thanks for all the hard work, it is really paying off!
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> It is connecting at 1 Mbs every time, the increases are the natural ramp-up of the rates. Why it 
</I>&gt;<i> differed from boot to boot is probably a matter of when you happened to check and how many 
</I>&gt;<i> transmissions happened before you looked.
</I>&gt;<i>
</I>&gt;<i> If your V4 firmware is still in /lib/firmware, then the Fedora kernel is a little behind the 
</I>&gt;<i> wireless-dev tree. Once the code that uses the new naming scheme hits their kernel, your wireless 
</I>&gt;<i> will probably stop working. Be prepared.
</I>&gt;<i>
</I>&gt;<i> Yes, the new driver is very solid.
</I>&gt;<i>
</I>&gt;<i> Larry
</I>&gt;<i> _______________________________________________
</I>&gt;<i> Bcm43xx-dev mailing list
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">Bcm43xx-dev at lists.berlios.de</A>
</I>&gt;<i> <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i>   
</I>It's not that 'solid' on my chipset, at least not the one present in the 
Fedora kernel. I have a BCM4309 14e4:4324 (rev 02) chipset and it drops 
connection from time to time with this driver.

It connects fine at 1Mbps, really quick link establishment, but maybe 
half an hour later it drops and reconnects again. There are lots of 
messages in the kernel log, I'm including here what I think is useful:

this is what I get when it first initialises:

b43-phy1: Broadcom 4306 WLAN found
b43-phy1 debug: Found PHY: Analog 1, Type 2, Revision 1
b43-phy1 debug: Found Radio: Manuf 0x17F, Version 0x2050, Revision 2
b43-phy1 debug: Radio turned off
wmaster0: Selected rate control algorithm 'simple'
b43-phy1 debug: Ignoring unconnected 802.11 core
b43-phy1 debug: Adding Interface type 2
b43-phy1 debug: Loading firmware version 351.126 (2006-07-29 05:54:02)
b43-phy1 debug: Radio turned on
b43-phy1 debug: Radio enabled by hardware
b43-phy1 ERROR: bbatt(11) &gt;= size of LO array
b43-phy1 debug: Chip initialized
b43-phy1 debug: 30-bit DMA initialized
b43-wlan: TODO: Incomplete code in keymac_write() at 
drivers/net/wireless/b43/main
.c:753 *&lt;---- repeated several times*
b43-phy1 debug: Wireless interface started
ADDRCONF(NETDEV_UP): wlan0: link is not ready
wlan0: Initial auth_alg=0
wlan0: authenticate with AP 00:30:bd:fe:23:83
wlan0: RX authentication from 00:30:bd:fe:23:83 (alg=0 transaction=2 
status=0)
wlan0: authenticated
wlan0: associate with AP 00:30:bd:fe:23:83
wlan0: RX AssocResp from 00:30:bd:fe:23:83 (capab=0x411 status=0 aid=10)
wlan0: associated
wlan0: switched to short barker preamble (BSSID=00:30:bd:fe:23:83)
ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready

when it drops connection I get the following messages in dmesg:

wlan0: No ProbeResp from current AP 00:30:bd:fe:23:83 - assume out of range
b43-phy1 debug: Using software based encryption for keyidx: 0, mac: 
00:30:bd:fe:23
:<i>83
</I>wlan0: No STA entry for own AP 00:30:bd:fe:23:83
wlan0: No STA entry for own AP 00:30:bd:fe:23:83
wlan0: No STA entry for own AP 00:30:bd:fe:23:83
ADDRCONF(NETDEV_CHANGE): wlan0: link becomes ready
b43-phy1 debug: Removing Interface type 2
b43-phy1 ERROR: MAC suspend failed
b43-phy1 debug: Wireless interface stopped
b43-phy1 debug: DMA-32 0x0260 (RX) max used slots: 1/64
b43-phy1 debug: DMA-32 0x0200 (RX) max used slots: 2/64
b43-phy1 debug: DMA-32 0x02A0 (TX) max used slots: 0/128
b43-phy1 debug: DMA-32 0x0280 (TX) max used slots: 0/128
b43-phy1 debug: DMA-32 0x0260 (TX) max used slots: 0/128
b43-phy1 debug: DMA-32 0x0240 (TX) max used slots: 0/128
b43-phy1 debug: DMA-32 0x0220 (TX) max used slots: 92/128
b43-phy1 debug: DMA-32 0x0200 (TX) max used slots: 0/128
b43-phy1 debug: Radio turned off
b43-phy1 debug: Radio turned off
b43-phy1 debug: Adding Interface type 2

this is the link quality info:
Bit Rate=1 Mb/s
Retry min limit:7 RTS thr:off Fragment thr=2346 B
Link Quality=73/100 Signal level=-56 dBm Noise level=-41 dBm
Rx invalid nwid:0 Rx invalid crypt:0 Rx invalid frag:0
Tx excessive retries:0 Invalid misc:0 Missed beacon:0

is the SNR low? Is that why it drops the connection ? The router sits 3 
meters away from my laptop, direct sight.


thanks
-Ioannis




</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002207.html">Updated Status on b43 driver and Fedora 7
</A></li>
	<LI>Next message: <A HREF="002222.html">Updated Status on b43 driver and Fedora 7
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2217">[ date ]</a>
              <a href="thread.html#2217">[ thread ]</a>
              <a href="subject.html#2217">[ subject ]</a>
              <a href="author.html#2217">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
