<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> kubuntu on an acer
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-October/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20kubuntu%20on%20an%20acer&In-Reply-To=%3C47274904.9030400%40wbs.edu%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002638.html">
   <LINK REL="Next"  HREF="002640.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>kubuntu on an acer</H1>
    <B>Robert Easter</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20kubuntu%20on%20an%20acer&In-Reply-To=%3C47274904.9030400%40wbs.edu%3E"
       TITLE="kubuntu on an acer">RDEaster at wbs.edu
       </A><BR>
    <I>Tue Oct 30 16:08:52 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002638.html">[PATCH] b43: Fix rfkill callback deadlock
</A></li>
        <LI>Next message: <A HREF="002640.html">kubuntu on an acer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2639">[ date ]</a>
              <a href="thread.html#2639">[ thread ]</a>
              <a href="subject.html#2639">[ subject ]</a>
              <a href="author.html#2639">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Larry, et. al.,

I was that close!  After the various steps and procedures I had the bcm
driver kit &quot;installed&quot; and the knetwork manager said I was online.  No
applications were connecting so I rebooted, and had to re-inRe:
Bcm43xx-dev Digest, Vol 16, Issue 28 install the OS.  Back on the
computer now, driver kit installed according to the gui installers, but
not making the trip past the &quot;IP configuration&quot; stage (the &quot;57%&quot; on the
progress bar graph).  Any sage advice would be welcome, and saved out of
reach in case of another crash!

r.e.

<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev-request at lists.berlios.de</A> wrote:
&gt;<i> Send Bcm43xx-dev mailing list submissions to
</I>&gt;<i> 	<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> To subscribe or unsubscribe via the World Wide Web, visit
</I>&gt;<i> 	<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">https://lists.berlios.de/mailman/listinfo/bcm43xx-dev</A>
</I>&gt;<i> or, via email, send a message with subject or body 'help' to
</I>&gt;<i> 	<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev-request at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> You can reach the person managing the list at
</I>&gt;<i> 	<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev-owner at lists.berlios.de</A>
</I>&gt;<i>
</I>&gt;<i> When replying, please edit your Subject line so it is more specific
</I>&gt;<i> than &quot;Re: Contents of Bcm43xx-dev digest...&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Today's Topics:
</I>&gt;<i>
</I>&gt;<i>    1. [PATCH] b43: Fix rfkill callback deadlock (David Ellingsworth)
</I>&gt;<i>    2. Re: [PATCH] b43: Fix rfkill callback deadlock (Michael Buesch)
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> ----------------------------------------------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 1
</I>&gt;<i> Date: Mon, 29 Oct 2007 21:58:00 -0400
</I>&gt;<i> From: David Ellingsworth &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">identd_ at hotmail.com</A>&gt;
</I>&gt;<i> Subject: [PATCH] b43: Fix rfkill callback deadlock
</I>&gt;<i> To: bcm43xx-dev &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev at lists.berlios.de</A>&gt;
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">BAY128-W1964444D925BF962CC6A2E86920 at phx.gbl</A>&gt;
</I>&gt;<i> Content-Type: text/plain; charset=&quot;windows-1252&quot;
</I>&gt;<i>
</I>&gt;<i>
</I>&gt;<i> Forgot to send to list
</I>&gt;<i>
</I>&gt;<i>   
</I>&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">identd_ at hotmail.com</A>
</I>&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">mb at bu3sch.de</A>
</I>&gt;&gt;<i> Subject: RE: [PATCH] b43: Fix rfkill callback deadlock
</I>&gt;&gt;<i> Date: Mon, 29 Oct 2007 21:56:51 -0400
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>
</I>&gt;&gt;<i>     
</I>&gt;&gt;&gt;<i> From: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">mb at bu3sch.de</A>
</I>&gt;&gt;&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev at lists.berlios.de</A>; <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">david at identd.dyndns.org</A>
</I>&gt;&gt;&gt;<i> Subject: Re: [PATCH] b43: Fix rfkill callback deadlock
</I>&gt;&gt;&gt;<i> Date: Mon, 29 Oct 2007 01:16:05 +0100
</I>&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;<i> On Monday 29 October 2007 01:06:51 David Ellingsworth wrote:
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;&gt;&gt;&gt;<i> - mutex_lock(&amp;wl-&gt;mutex);
</I>&gt;&gt;&gt;&gt;&gt;<i> + /* When RFKILL is registered, it will call back into this callback.
</I>&gt;&gt;&gt;&gt;&gt;<i> + * wl-&gt;mutex will already be locked when this happens.
</I>&gt;&gt;&gt;&gt;&gt;<i> + * So first trylock. On contention check if we are in initialization.
</I>&gt;&gt;&gt;&gt;&gt;<i> + * Silently return if that happens to avoid a deadlock. */
</I>&gt;&gt;&gt;&gt;&gt;<i> + if (mutex_trylock(&amp;wl-&gt;mutex) == 0) {
</I>&gt;&gt;&gt;&gt;&gt;<i> + if (b43_status(dev) &lt; B43_STAT_INITIALIZED)
</I>&gt;&gt;&gt;&gt;&gt;<i> + return 0;
</I>&gt;&gt;&gt;&gt;&gt;<i> + mutex_lock(&amp;wl-&gt;mutex);
</I>&gt;&gt;&gt;&gt;&gt;<i> + }
</I>&gt;&gt;&gt;&gt;&gt;<i> if (b43_status(dev) &lt; B43_STAT_INITIALIZED)
</I>&gt;&gt;&gt;&gt;&gt;<i> goto out_unlock;
</I>&gt;&gt;&gt;&gt;&gt;<i>           
</I>&gt;&gt;&gt;&gt;<i> Why not replace everything above up to and including the '- mutex_lock(&amp;wl-&gt;mutex); with:
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> if(b43_status(dev) &lt; B43_STAT_INITIALIZED)
</I>&gt;&gt;&gt;&gt;<i> return 0;
</I>&gt;&gt;&gt;&gt;<i>
</I>&gt;&gt;&gt;&gt;<i> mutex_lock(&amp;wl-&gt;mutex);
</I>&gt;&gt;&gt;&gt;<i>         
</I>&gt;&gt;&gt;<i> because the status should be queried under lock, of course.
</I>&gt;&gt;&gt;<i>       
</I>&gt;&gt;<i> If that is the case, then a proper fix would be to use two locks to protect access to the status. One for allowing read access when no one is writing, and another for allowing exclusive write access. In such a configuration you could allow multiple readers while having only one writer. The above fix is not proper since the lock obtained by another section of code could be released before or during the status check.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> Regards,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> David Ellingsworth
</I>&gt;&gt;<i> _________________________________________________________________
</I>&gt;&gt;<i> Peek-a-boo FREE Tricks &amp; Treats for You!
</I>&gt;&gt;<i> <A HREF="http://www.reallivemoms.com?ocid=TXT_TAGHM&amp;loc=us">http://www.reallivemoms.com?ocid=TXT_TAGHM&amp;loc=us</A>
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> _________________________________________________________________
</I>&gt;<i> Windows Live Hotmail and Microsoft Office Outlook ? together at last. ?Get it now.
</I>&gt;<i> <A HREF="http://office.microsoft.com/en-us/outlook/HA102225181033.aspx?pid=CL100626971033">http://office.microsoft.com/en-us/outlook/HA102225181033.aspx?pid=CL100626971033</A>
</I>&gt;<i> -------------- next part --------------
</I>&gt;<i> An HTML attachment was scrubbed...
</I>&gt;<i> URL: <A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20071029/f843da81/attachment-0001.html">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20071029/f843da81/attachment-0001.html</A> 
</I>&gt;<i>
</I>&gt;<i> ------------------------------
</I>&gt;<i>
</I>&gt;<i> Message: 2
</I>&gt;<i> Date: Tue, 30 Oct 2007 11:06:53 +0100
</I>&gt;<i> From: Michael Buesch &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">mb at bu3sch.de</A>&gt;
</I>&gt;<i> Subject: Re: [PATCH] b43: Fix rfkill callback deadlock
</I>&gt;<i> To: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">david at identd.dyndns.org</A>
</I>&gt;<i> Cc: <A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">bcm43xx-dev at lists.berlios.de</A>
</I>&gt;<i> Message-ID: &lt;<A HREF="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">200710301106.53841.mb at bu3sch.de</A>&gt;
</I>&gt;<i> Content-Type: text/plain;  charset=&quot;iso-8859-1&quot;
</I>&gt;<i>
</I>&gt;<i> On Tuesday 30 October 2007 02:56:51 David Ellingsworth wrote:
</I>&gt;<i>   
</I>&gt;&gt;<i> If that is the case, then a proper fix would be to use two locks to protect access to the status. One for allowing read access when no one is writing, and another for allowing exclusive write access. In such a configuration you could allow multiple readers while having only one writer. The above fix is not proper since the lock obtained by another section of code could be released before or during the status check.
</I>&gt;&gt;<i>     
</I>&gt;<i>
</I>&gt;<i> We don't care for that case, as the status is rechecked under lock later.
</I>&gt;<i> This really is not a problem.
</I>&gt;<i> We only care for the case where status!=INITIALIZED. Because then we mustn't aquire the lock
</I>&gt;<i> and return silently. And that's what we do.
</I>&gt;<i>
</I>&gt;<i>   
</I>

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002638.html">[PATCH] b43: Fix rfkill callback deadlock
</A></li>
	<LI>Next message: <A HREF="002640.html">kubuntu on an acer
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2639">[ date ]</a>
              <a href="thread.html#2639">[ thread ]</a>
              <a href="subject.html#2639">[ subject ]</a>
              <a href="author.html#2639">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
