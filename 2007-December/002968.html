<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> microcode reverse engineering
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20microcode%20reverse%20engineering&In-Reply-To=%3C59AF9768-2054-48A7-BA14-35E6AF75E476%40ing.unibs.it%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="002967.html">
   <LINK REL="Next"  HREF="002969.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>microcode reverse engineering</H1>
    <B>Francesco Gringoli</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20microcode%20reverse%20engineering&In-Reply-To=%3C59AF9768-2054-48A7-BA14-35E6AF75E476%40ing.unibs.it%3E"
       TITLE="microcode reverse engineering">francesco.gringoli at ing.unibs.it
       </A><BR>
    <I>Mon Dec  3 12:43:20 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="002967.html">microcode reverse engineering
</A></li>
        <LI>Next message: <A HREF="002969.html">microcode reverse engineering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2968">[ date ]</a>
              <a href="thread.html#2968">[ thread ]</a>
              <a href="subject.html#2968">[ subject ]</a>
              <a href="author.html#2968">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi Johannes,

I found the 802.11 section on your website this morning, I don't know  
why I didn't find it before. That's very interesting and you did an  
impressive work!! I don't understand when you say that you're not  
interested in r4 microcode or higher because it seems that there are  
two different microcode description and it seems that the boundary is  
between (r3,r4) and (r5), is that correct? From these links I can find

<A HREF="http://bcm-v4.sipsolutions.net/802.11/Microcode">http://bcm-v4.sipsolutions.net/802.11/Microcode</A>   -&gt; core revision 5.  
Is that r5?

and

<A HREF="http://bcm-v4.sipsolutions.net/802.11/OldMicrocode">http://bcm-v4.sipsolutions.net/802.11/OldMicrocode</A>   -&gt; core revision  
4 and lower. Is that r3 and r4? Are they the same?


Have you tried to write your own mac to see if it works?

Thank you very much,
FG

On Dec 3, 2007, at 11:38, Johannes Berg wrote:

&gt;<i>
</I>&gt;<i> On Sun, 2007-12-02 at 15:55 +0100, Francesco Gringoli wrote:
</I>&gt;&gt;<i> Hi Johannes,
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> I read the interesting note you wrote on September about r4 ucode
</I>&gt;&gt;<i> reverse engineering. Have you new results since then?
</I>&gt;<i>
</I>&gt;<i> <A HREF="http://bcm-v4.sipsolutions.net/802.11/Microcode">http://bcm-v4.sipsolutions.net/802.11/Microcode</A> has a link to the old
</I>&gt;<i> format too. I'm not particularly interested in the r4 format.
</I>&gt;<i>
</I>&gt;&gt;<i> Did you
</I>&gt;&gt;<i> understand what kind of core is bcm4318 based on? From broadcom
</I>&gt;&gt;<i> website it should be a MIPS32 core (check <A HREF="http://www.broadcom.com/">http://www.broadcom.com/</A>
</I>&gt;&gt;<i> products/Wireless-LAN/802.11-Wireless-LAN-Solutions they say that
</I>&gt;&gt;<i> &quot;The AirForce family of network processors features MIPS32
</I>&gt;&gt;<i> processor...(cut)&quot;). It's interesting that you found out a 6 bit
</I>&gt;&gt;<i> prefix, like in MIPS!
</I>&gt;<i>
</I>&gt;<i> Nope, I don't think it's MIPS. I think &quot;AirForce network processor&quot;
</I>&gt;<i> refers to the whole integrated thing that can be used as a full-mac
</I>&gt;<i> chipset or a whole access point etc.
</I>&gt;<i>
</I>&gt;&gt;<i> Before reading your post I came to these conclusions
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> - all odd words begins with zero (or a couple of them, this depends
</I>&gt;&gt;<i> on the firmware version). This led me to think to 8 byte wide
</I>&gt;&gt;<i> instructions. Unfortunately both mips32 and mips64 use 32bit wide
</I>&gt;&gt;<i> instructions. No mips?
</I>&gt;&gt;<i> - odd words are control codes to check even words correctness during
</I>&gt;&gt;<i> firmware upload: unfortunately there are a lot of even words repeated
</I>&gt;&gt;<i> throughout the code with different paired odd words. Did you try to
</I>&gt;&gt;<i> change randomly some values and see what happens?
</I>&gt;&gt;<i> - disassembling the code after having cut out odd words leads to MIPS
</I>&gt;&gt;<i> assembly without ret instructions. There is no code too to handle  
</I>&gt;&gt;<i> IRQ.
</I>&gt;<i>
</I>&gt;<i> You want to read the above link and what is linked from it.
</I>&gt;<i>
</I>&gt;&gt;<i> I also tried to change endianness but didn't find anything more
</I>&gt;&gt;<i> interesting.
</I>&gt;&gt;<i>
</I>&gt;&gt;<i> By the way, do you think that a complete reverse engineering could
</I>&gt;&gt;<i> give us a platform to test new MAC methodologies? E.g. do you think
</I>&gt;&gt;<i> it would be possible to change timings or medium control?
</I>&gt;<i>
</I>&gt;<i> Yes.
</I>&gt;<i>
</I>&gt;<i> johannes
</I>
%%%%%%%%%%%%%%%%%%%%%

Francesco Gringoli, PhD - Assistant Professor
Dept. of Electrical Engineering for Automation
University of Brescia
via Branze, 38
25123 Brescia
ITALY

Ph:  ++39.030.3715843
FAX: ++39.030.380014
WWW: <A HREF="http://www.ing.unibs.it/~gringoli">http://www.ing.unibs.it/~gringoli</A>

%%%%%%%%%%%%%%%%%%%%%


-------------- next part --------------
An HTML attachment was scrubbed...
URL: &lt;<A HREF="https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20071203/eea00df1/attachment.html">https://lists.berlios.de/pipermail/bcm43xx-dev/attachments/20071203/eea00df1/attachment.html</A>&gt;
</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="002967.html">microcode reverse engineering
</A></li>
	<LI>Next message: <A HREF="002969.html">microcode reverse engineering
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#2968">[ date ]</a>
              <a href="thread.html#2968">[ thread ]</a>
              <a href="subject.html#2968">[ subject ]</a>
              <a href="author.html#2968">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
