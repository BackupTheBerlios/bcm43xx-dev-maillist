<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH 3/3] net: wireless: bcm43xx: big_buffer_sem semaphore	to	mutex
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2007-December/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%203/3%5D%20net%3A%20wireless%3A%20bcm43xx%3A%20big_buffer_sem%20semaphore%0A%09to%09mutex&In-Reply-To=%3C4762E7D2.1040301%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003040.html">
   <LINK REL="Next"  HREF="003031.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH 3/3] net: wireless: bcm43xx: big_buffer_sem semaphore	to	mutex</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%203/3%5D%20net%3A%20wireless%3A%20bcm43xx%3A%20big_buffer_sem%20semaphore%0A%09to%09mutex&In-Reply-To=%3C4762E7D2.1040301%40lwfinger.net%3E"
       TITLE="[PATCH 3/3] net: wireless: bcm43xx: big_buffer_sem semaphore	to	mutex">larry.finger at lwfinger.net
       </A><BR>
    <I>Fri Dec 14 21:30:10 CET 2007</I>
    <P><UL>
        <LI>Previous message: <A HREF="003040.html">[PATCH 3/3] net: wireless: bcm43xx: big_buffer_sem semaphore to	mutex
</A></li>
        <LI>Next message: <A HREF="003031.html">[PATCH 3/3] net: wireless: bcm43xx: big_buffer_sem semaphore to	mutex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3048">[ date ]</a>
              <a href="thread.html#3048">[ thread ]</a>
              <a href="subject.html#3048">[ subject ]</a>
              <a href="author.html#3048">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Celejar wrote:
&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> # This file was automatically generated by the /lib/udev/write_net_rules
</I>&gt;<i> # program, probably run by the persistent-net-generator.rules rules file.
</I>&gt;<i> #
</I>&gt;<i> # You can modify it, as long as you keep each rule on a single line.
</I>&gt;<i> # MAC addresses must be written in lowercase.
</I>&gt;<i> 
</I>&gt;<i> # PCI device 0x14e4:0x4318 (bcm43xx)
</I>&gt;<i> SUBSYSTEM==&quot;net&quot;, DRIVERS==&quot;?*&quot;, ATTRS{address}==&quot;00:19:7d:06:a5:44&quot;,
</I>&gt;<i> NAME=&quot;eth0&quot;
</I>&gt;<i> 
</I>&gt;<i> # PCI device 0x14e4:0x170c (b44)
</I>&gt;<i> SUBSYSTEM==&quot;net&quot;, DRIVERS==&quot;?*&quot;, ATTRS{address}==&quot;00:16:d4:5e:1e:9c&quot;,
</I>&gt;<i> NAME=&quot;eth1&quot;
</I>&gt;<i> 
</I>&gt;<i> # PCI device 0x168c:0x0013 (ath_pci)
</I>&gt;<i> SUBSYSTEM==&quot;net&quot;, DRIVERS==&quot;?*&quot;, ATTRS{address}==&quot;00:40:f4:e5:07:7e&quot;,
</I>&gt;<i> ATTRS{type}==&quot;1&quot;, NAME=&quot;ath0&quot;
</I>&gt;<i> 
</I>&gt;<i> The two Broadcom lines (wired and wireless cards builtin to my Acer
</I>&gt;<i> Aspire 3690-2672 laptop) don't contain the 'ATTRS{type}==&quot;1&quot;' clause,
</I>&gt;<i> while the Atheros line (for a PCMCIA card) does.  Adding the clause to
</I>&gt;<i> the Broadcom wireless line fixed the problem, and it now seems to be
</I>&gt;<i> working perfectly (no screen flicker, which I had seen with bcm43xx),
</I>&gt;<i> so thanks.
</I>&gt;<i> 
</I>&gt;<i> My questions:
</I>&gt;<i> 
</I>&gt;<i> A)  I have only a very basic understanding of udev; what does that
</I>&gt;<i> clause mean?  I couldn't figure it out by googling or looking in the
</I>&gt;<i> basic udev docs.
</I>&gt;<i> 
</I>&gt;<i> B)  I'm running Debian Sid; I assume the installer wrote the builtin
</I>&gt;<i> cards' lines and the running system the subsequently inserted PCMCIA
</I>&gt;<i> line.  Is this a bug?  Do you know where I should report it?  I have
</I>&gt;<i> never (until my addition of your clause) touched the ruls file.
</I>&gt;<i> 
</I>&gt;<i> C)  I wasn't seeing this device naming problem with my old kernels
</I>&gt;<i> (2.6.18 - 2.6.22) and bcm43xx / ndiswrapper.  Is this a 2.6.24 thing,
</I>&gt;<i> or a b43 thing, or some combination thereof, or something else entirely?
</I>
It is a mac80211-introduced &quot;problem&quot;. With bcm43xx-softmac, there is only a single device 
presented, and one does not care what type it is when it is renamed. With mac80211 (used by b43), at 
least two devices are available, wmaster0 with type==0x801, and wlan0 with type==1. Without the 
ATTRS{type==1} clause, wmaster=&gt;eth1 and wlan0=&gt;wlan0_rename. With the clause, only wlan0 is subject 
to renaming and all works OK.

On some distros, merely deleting the rename rule gets the correct one written upon reboot. Sorry, I 
don't know which ones fit that category. I would expect that it depends on the version of udev that 
is included.

If I were you, I would put it on Debian's bug-reporting system. Be sure that your message makes the 
problem associated with any wireless driver that uses mac80211. As I said before, the problem is 
more general than for b43.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003040.html">[PATCH 3/3] net: wireless: bcm43xx: big_buffer_sem semaphore to	mutex
</A></li>
	<LI>Next message: <A HREF="003031.html">[PATCH 3/3] net: wireless: bcm43xx: big_buffer_sem semaphore to	mutex
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3048">[ date ]</a>
              <a href="thread.html#3048">[ thread ]</a>
              <a href="subject.html#3048">[ subject ]</a>
              <a href="author.html#3048">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
