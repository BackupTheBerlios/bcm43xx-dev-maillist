<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> More data on open-source firmware crash
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20More%20data%20on%20open-source%20firmware%20crash&In-Reply-To=%3C200902231218.25215.mb%40bu3sch.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005262.html">
   <LINK REL="Next"  HREF="005279.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>More data on open-source firmware crash</H1>
    <B>Michael Buesch</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20More%20data%20on%20open-source%20firmware%20crash&In-Reply-To=%3C200902231218.25215.mb%40bu3sch.de%3E"
       TITLE="More data on open-source firmware crash">mb at bu3sch.de
       </A><BR>
    <I>Mon Feb 23 12:18:25 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005262.html">More data on open-source firmware crash
</A></li>
        <LI>Next message: <A HREF="005279.html">[PATCH] b43: Remove bogus integer truncation warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5264">[ date ]</a>
              <a href="thread.html#5264">[ thread ]</a>
              <a href="subject.html#5264">[ subject ]</a>
              <a href="author.html#5264">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Monday 23 February 2009 07:30:13 Larry Finger wrote:
&gt;<i> Francesco Gringoli wrote:
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; do you mind testing this firmware? It's not the solution, but can help
</I>&gt;<i> &gt; us understanding if we should follow this way. Download at
</I>&gt;<i> &gt; <A HREF="http://www.ing.unibs.it/~gringoli/fwtest.tar.gz">http://www.ing.unibs.it/~gringoli/fwtest.tar.gz</A>
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; Before using this firmware please recompile b43 changing these two
</I>&gt;<i> &gt; definitions in b43.h
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; #define B43_MARKER_ID_REG               52
</I>&gt;<i> &gt; #define B43_MARKER_LINE_REG             53
</I>&gt;<i> &gt; 
</I>&gt;<i> &gt; I coded the firmware so that it will raise a B43_DEBUGIRQ_MARKER with id
</I>&gt;<i> &gt; 10, line 100 if the condition I'm thinking to is true. You will see (I
</I>&gt;<i> &gt; hope) in dmesg.
</I>&gt;<i> 
</I>&gt;<i> I ran the test firmware until there was a failure. The B43_DEBUGIRQ_MARKER was
</I>&gt;<i> not present in the dmesg output.
</I>&gt;<i> 
</I>&gt;<i> I also did as Michael suggested and preserved the depth of the tx_status queue,
</I>&gt;<i> as well as the maximum depth observed. The latter value is 16; therefore, it is
</I>&gt;<i> possible that the queue is being overrun. It is certainly full if the limit
</I>&gt;<i> really is 16. I still need to look at the detailed data from the last run, but
</I>&gt;<i> it is late here today.
</I>
Note again that I expect the &quot;tx status queue is full&quot; check at the _start_ of the TX
processing in firmware. Because if we started TX and later figure out the status queue
is full, we can't really do anything about it. So we'd have to check that before even
fetching the frame from the DMA.

-- 
Greetings, Michael.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005262.html">More data on open-source firmware crash
</A></li>
	<LI>Next message: <A HREF="005279.html">[PATCH] b43: Remove bogus integer truncation warnings
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5264">[ date ]</a>
              <a href="thread.html#5264">[ thread ]</a>
              <a href="subject.html#5264">[ subject ]</a>
              <a href="author.html#5264">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
