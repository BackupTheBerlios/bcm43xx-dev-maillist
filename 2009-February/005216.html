<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> Capturing FCS error frames using b43 driver
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2009-February/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Capturing%20FCS%20error%20frames%20using%20b43%20driver&In-Reply-To=%3C200902172354.32152.mb%40bu3sch.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="005210.html">
   <LINK REL="Next"  HREF="005217.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>Capturing FCS error frames using b43 driver</H1>
    <B>Michael Buesch</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20Capturing%20FCS%20error%20frames%20using%20b43%20driver&In-Reply-To=%3C200902172354.32152.mb%40bu3sch.de%3E"
       TITLE="Capturing FCS error frames using b43 driver">mb at bu3sch.de
       </A><BR>
    <I>Tue Feb 17 23:54:31 CET 2009</I>
    <P><UL>
        <LI>Previous message: <A HREF="005210.html">Capturing FCS error frames using b43 driver
</A></li>
        <LI>Next message: <A HREF="005217.html">Capturing FCS error frames using b43 driver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5216">[ date ]</a>
              <a href="thread.html#5216">[ thread ]</a>
              <a href="subject.html#5216">[ subject ]</a>
              <a href="author.html#5216">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Please read the code. There are lots of sanity checks in b43 and mac80211
that make it impossible to receive completely corrupted frames.

On Tuesday 17 February 2009 23:05:51 Bo Han wrote:
&gt;<i> Hi,
</I>&gt;<i> 
</I>&gt;<i> I am interested in capturing FCS error frames using b43 driver.  My hardware
</I>&gt;<i> information is as follows.
</I>&gt;<i> 
</I>&gt;<i> b43-phy9: Broadcom 4318 WLAN found
</I>&gt;<i> b43-phy9 debug: Found PHY: Analog 3, Type 2, Revision 7
</I>&gt;<i> b43-phy9 debuf: Found Radio: Manuf 0x17f, Version 0x2050, Revision 8
</I>&gt;<i> 
</I>&gt;<i> I am using firmware version 410.2160 with linux kernel version 2.6.27.10.  I
</I>&gt;<i> told the firmware to keep the bad frames by setting ctl |=
</I>&gt;<i> B43_MACCTL_KEEP_BAD just before b43_write32(dev, b43_MMIO_MACCTL, ctl) in
</I>&gt;<i> b43_adjust_mode(...) in main.c.
</I>&gt;<i> From b43_rx(...) in xmit.c, I can only see packets dropped because their
</I>&gt;<i> rate_idx == -1.  The length of all the dropped packets is 80 bytes and they
</I>&gt;<i> look like the following:
</I>&gt;<i> 
</I>&gt;<i> 8fae 0308 0000 0b01 0085 0000 1500 482c
</I>&gt;<i> 50b3 0b01 0085 0000 5fa0 1500 482c 50b3
</I>&gt;<i> aaaa 0003 850b cdcc 1b00 1d00 b945 c0cd
</I>&gt;<i> b905 630a 5e10 0101 0601 0b06 000b 07d6
</I>&gt;<i> bab9 addb 35fd 33e8 cd8f 8eaa 6f77 b9e8
</I>&gt;<i> 
</I>&gt;<i> However, there is still no packet received with macstat B43_RX_MAC_FCSERR.
</I>&gt;<i> I also tried the 351 firmware for which I saw several FCS error frames in
</I>&gt;<i> PIO mode.  But the sniffing tools like Wireshark cannot get any packets.
</I>&gt;<i> including the correct ones, when using that firmware.
</I>&gt;<i> 
</I>&gt;<i> Am I missing something?
</I>&gt;<i> 
</I>&gt;<i> Thanks,
</I>&gt;<i> -Bo
</I>&gt;<i> 
</I>


-- 
Greetings, Michael.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="005210.html">Capturing FCS error frames using b43 driver
</A></li>
	<LI>Next message: <A HREF="005217.html">Capturing FCS error frames using b43 driver
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#5216">[ date ]</a>
              <a href="thread.html#5216">[ thread ]</a>
              <a href="subject.html#5216">[ subject ]</a>
              <a href="author.html#5216">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
