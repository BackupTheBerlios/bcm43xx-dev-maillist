<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> b43legacy does not work
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-December/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43legacy%20does%20not%20work&In-Reply-To=%3C200812270048.20701.mb%40bu3sch.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="004994.html">
   <LINK REL="Next"  HREF="004996.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>b43legacy does not work</H1>
    <B>Michael Buesch</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20b43legacy%20does%20not%20work&In-Reply-To=%3C200812270048.20701.mb%40bu3sch.de%3E"
       TITLE="b43legacy does not work">mb at bu3sch.de
       </A><BR>
    <I>Sat Dec 27 00:48:20 CET 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="004994.html">b43legacy does not work
</A></li>
        <LI>Next message: <A HREF="004996.html">b43legacy does not work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4995">[ date ]</a>
              <a href="thread.html#4995">[ thread ]</a>
              <a href="subject.html#4995">[ subject ]</a>
              <a href="author.html#4995">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On Saturday 27 December 2008 00:28:01 Ulf Dambacher wrote:
&gt;<i> Hi Michael
</I>&gt;<i> 
</I>&gt;<i> I did like you wanted and wrote the following output from screen (no 
</I>&gt;<i> digicam at hand .-(
</I>&gt;<i> 
</I>&gt;<i> kernel 2.6.27.9 init=/bin/bash, no modules loaded so far
</I>&gt;<i> 
</I>&gt;<i> modprobe b43legacy:
</I>&gt;<i> 
</I>&gt;<i> ssb: Core 0 found: IEEE 802.11 (cc 0x812 rev 0x02 vendor 0x4243)
</I>&gt;<i> ssb: Core 1 found: PCMCIA (cc 0x80d rev 0x00 vendor 0x4243)
</I>&gt;<i> ssb: core 2 found: Fast Ethernet (cc 0x806 rev 0x02 vendor 0x4243)
</I>&gt;<i> ssb: core 3 found: V90 (cc 0x807 rev 0x01 vendor 0x4243)
</I>&gt;<i> ssb: core 4 found: PCI (cc 0x803 rev 0x03 vendor 0x4243)
</I>&gt;<i> ssb: sonics silicon backplane found on PCI device 0000:02:02.0
</I>&gt;<i> b43legacy-phy0: Broadcom4301 WLAN found
</I>&gt;<i> Broadcom 43xx-legacy driver loaded [features PLRID, Firmware-ID: FW10]
</I>&gt;<i> 
</I>&gt;<i> now insmod b44__.ko:
</I>&gt;<i> 
</I>&gt;<i> ACPI PCI INterrupt Link LNKB enabled at irq7
</I>&gt;<i> b44 0000:02:01.0: PCI INTA-&gt; LNKB-&gt;GSI 7 (level,low) -&gt;IRQ7
</I>&gt;<i> ssb: Core 0 found: Fast Ethernet(cc 0x806 rev 0x4 vendor 0x4243)
</I>&gt;<i> ssb: Core 1 found: V90 (cc 0x807 rev 0x01 vendor 0x4243)
</I>&gt;<i> ssb: core 2 found: PCI (cc 0x804 rev 0x02 vendor 0x4243)
</I>&gt;<i> ssb: sonics silicon backplane found on pci device 0000:02:01.0
</I>&gt;<i> b44.c: v2.0
</I>&gt;<i> b44: invalid mac address found in EEPROM
</I>&gt;<i> b44 ssb0:1: Problem fetching invariants of chip,abording
</I>&gt;<i> b44: Probe of ssb0:1 faild with error -22
</I>&gt;<i> 
</I>&gt;<i> then the system is unresponsible.
</I>&gt;<i> 
</I>&gt;<i> Now I did the same thing with an up and working wlan connection and
</I>&gt;<i> insmod b44__.ko:
</I>&gt;<i> 
</I>&gt;<i> ...
</I>&gt;<i> b44 ssb0:1: Problem fetching invariants of chip,abording
</I>&gt;<i> b44: Probe of ssb0:1 faild with error -22
</I>&gt;<i> ssb: fatal error: bus powerd down while accessing PCI MMIO space
</I>&gt;<i> Pid:4 comm: events/0 not tainted 2.6.27.9-ud5#5
</I>&gt;<i> [&lt;e0812e56&gt;] ssb_pci_assert_buspower+0x40/0x42[ssb]
</I>&gt;<i> [&lt;e08135a6&gt;] ssb_pci_read32+0x11/0x3d [ssb]
</I>&gt;<i> [&lt;e087f878&gt;] b43legacy_interrupt_handler+0x1e/0x1f6 [b43legacy]
</I>&gt;<i> [&lt;c013a25a&gt;] handle_IRQ_event+0x25/0x4a
</I>&gt;<i> [&lt;c010531a&gt;] do_IRQ+0x44/0x78
</I>&gt;<i> [&lt;c0103a3b&gt;} common_interrupt+0x23/0x28
</I>&gt;<i> [&lt;c011007b&gt;] do_page_fault+0x2fa/0x65f
</I>&gt;<i> [&lt;c0275580&gt;] __linkwatch_run_queue+0x86/0x129
</I>&gt;<i> [&lt;c0275623&gt;] linkwatch_event+0x0/0x22
</I>&gt;<i> [&lt;c0275640&gt;] linkwatch_event+0x1d/0x22
</I>&gt;<i> [&lt;c012365f&gt;] run_workqueue+0x8b/0x103
</I>&gt;<i>               worker_thread
</I>&gt;<i> 	     worker_thread
</I>&gt;<i> 	     autoremove_wake_function
</I>&gt;<i>               worker_thread
</I>&gt;<i>               kthread
</I>&gt;<i>               kthread
</I>&gt;<i>               kernek_thread_helper
</I>&gt;<i> ============================0
</I>&gt;<i> 
</I>&gt;<i> 
</I>&gt;<i> you see these are two different pci ids. maybe that's the problem?
</I>
Ok thanks for catching the messages.
I think we have three different problems here.

1) We fail to fetch the MAC address from the ROM.
2) We crash in the MAC failure codepath.
3) We have an interrupt while the device is down.

2 and 3 are most likely trivial to fix, but 1 is a little bit strange...

Do you get other messages from ssb about the SPROM?
For example checksum-failed or something like that...

-- 
Greetings, Michael.

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="004994.html">b43legacy does not work
</A></li>
	<LI>Next message: <A HREF="004996.html">b43legacy does not work
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#4995">[ date ]</a>
              <a href="thread.html#4995">[ thread ]</a>
              <a href="subject.html#4995">[ subject ]</a>
              <a href="author.html#4995">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
