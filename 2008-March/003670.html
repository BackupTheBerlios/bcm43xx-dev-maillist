<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> BCM4328 latest GIT driver.
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2008-March/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4328%20latest%20GIT%20driver.&In-Reply-To=%3C8b12046a0803310615y2c2ff8e4p45f501e4d51e468e%40mail.gmail.com%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="003667.html">
   <LINK REL="Next"  HREF="003672.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>BCM4328 latest GIT driver.</H1>
    <B>Subodh Shrivastava</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20BCM4328%20latest%20GIT%20driver.&In-Reply-To=%3C8b12046a0803310615y2c2ff8e4p45f501e4d51e468e%40mail.gmail.com%3E"
       TITLE="BCM4328 latest GIT driver.">subodh.shrivastava at gmail.com
       </A><BR>
    <I>Mon Mar 31 15:15:03 CEST 2008</I>
    <P><UL>
        <LI>Previous message: <A HREF="003667.html">[PATCH] ssb: Turn suspend/resume upside down
</A></li>
        <LI>Next message: <A HREF="003672.html">BCM4328 latest GIT driver.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3670">[ date ]</a>
              <a href="thread.html#3670">[ thread ]</a>
              <a href="subject.html#3670">[ subject ]</a>
              <a href="author.html#3670">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Hi,

 First of all congratulations for the good work on Broadcom chipset.
 I tried the latest GIT kernel to try out the BCM 4328 chip support.
 I remember reading some where that It loads firmware successfully.
 Please find below the results.

 uname -r = 2.6.25-rc7-custom
 uname -m = x86_64
 uname -v = #2 SMP Mon Mar 31 08:32:18 BST 2008

 Without the NPHY support card failed to initialize.

 [ 2056.792896] b43-phy1: Broadcom 4321 WLAN found
 [ 2056.834017] b43-phy1 ERROR: FOUND UNSUPPORTED PHY (Analog 5, Type
 4, Revision 1)
 [ 2056.834077] b43: probe of ssb0:0 failed with error -95

 In order to compile the driver with NPHY support I had to cheat the
 Kconfig for b43.

 Relevant dmesg:

 [ 4063.609938] ACPI: PCI Interrupt 0000:03:00.0[A] -&gt; GSI 17 (level,
 low) -&gt; IRQ 17
 [ 4063.609974] PCI: Setting latency timer of device 0000:03:00.0 to 64
 [ 4063.676950] ssb: Sonics Silicon Backplane found on PCI device 0000:03:00.0
 [ 4063.834714] b43-phy3: Broadcom 4321 WLAN found
 [ 4063.875625] b43-phy3 debug: Found PHY: Analog 5, Type 4, Revision 1
 [ 4063.875650] b43-phy3 debug: Found Radio: Manuf 0x17F, Version
 0x2055, Revision 4
 [ 4063.901072] phy3: Selected rate control algorithm 'pid'
 [ 4063.902174] Broadcom 43xx driver loaded [ Features: PNLR,
Firmware-ID: FW13 ]
 [ 4063.965038] input: b43-phy3 as /class/input/input25
 [ 4064.253954] b43-phy3: Loading firmware version 410.2160
(2007-05-26 15:32:10)
 [ 4064.365266] b43-phy3 ERROR: IEEE 802.11n devices are not supported, yet.
 [ 4064.365335] b43-phy3 debug: Chip initialized
 [ 4064.365610] b43-phy3 debug: 64-bit DMA initialized
 [ 4064.385619] Registered led device: b43-phy3::tx
 [ 4064.385656] Registered led device: b43-phy3::rx
 [ 4064.385698] Registered led device: b43-phy3::radio
 [ 4064.385794] b43-phy3 debug: Wireless interface started
 [ 4064.385799] b43-phy3 debug: Adding Interface type 2
 [ 4064.389937] ADDRCONF(NETDEV_UP): wlan0: link is not ready
 [ 4064.821593] b43-phy3: Radio hardware status changed to DISABLED
 [ 4121.458866] b43-phy3: Radio turned on by software
 [ 4121.458875] b43-phy3: The hardware RF-kill button still turns the
 radio physically off. Press the button to turn it on.
 [ 4332.013844] b43-phy3 debug: Using hardware based encryption for
 keyidx: 0, mac: ff:ff:ff:ff:ff:ff
 [ 4817.566647] b43-phy3 debug: Disabling hardware based encryption for
 keyidx: 0, mac: ff:ff:ff:ff:ff:ff
 [ 4817.566658] b43-phy3 debug: Removing Interface type 2
 [ 4817.637786] b43-phy3 debug: Wireless interface stopped
 [ 4817.637972] b43-phy3 debug: DMA-64 0x0200 (RX) max used slots: 0/64
 [ 4817.638041] b43-phy3 debug: DMA-64 0x0340 (TX) max used slots: 0/128
 [ 4817.642841] b43-phy3 debug: DMA-64 0x0300 (TX) max used slots: 0/128
 [ 4817.650625] b43-phy3 debug: DMA-64 0x02C0 (TX) max used slots: 0/128
 [ 4817.658629] b43-phy3 debug: DMA-64 0x0280 (TX) max used slots: 0/128
 [ 4817.667508] b43-phy3 debug: DMA-64 0x0240 (TX) max used slots: 2/128
 [ 4817.674592] b43-phy3 debug: DMA-64 0x0200 (TX) max used slots: 0/128
 [ 5131.430565] ACPI: PCI interrupt for device 0000:03:00.0 disabled.

 Card is recognized as &quot;Broadcom 4321 WLAN found&quot;

 Although lspci output states otherwise.

 03:00.0 Network controller: Broadcom Corporation BCM4328 802.11a/b/g/n (rev 01)
        Subsystem: Apple Computer Inc. Unknown device 0087
        Flags: bus master, fast devsel, latency 0, IRQ 17
        Memory at 48200000 (64-bit, non-prefetchable) [size=16K]
        Memory at 48000000 (64-bit, prefetchable) [size=1M]
        Capabilities: [40] Power Management version 2
        Capabilities: [58] Message Signalled Interrupts: Mask- 64bit+
 Queue=0/0 Enable-
        Capabilities: [d0] Express Endpoint IRQ 0
        Capabilities: [100] Advanced Error Reporting
        Capabilities: [13c] Virtual Channel
        Capabilities: [15c] Power Budgeting

 Also when the driver module is loaded Radio is turned off and requests
 to turn on the radio using hardware switch,
 this is an Apple iMac and I don't have any hardware switch to turn on
 the Radio. Does it require some user space utility
 or driver does not contain support for the Radio yet?

 wlan0 shows up in the system after loading the driver.

 wlan0     IEEE 802.11g  ESSID:&quot;&quot;
          Mode:Managed  Frequency:2.412 GHz  Access Point: Not-Associated
          Tx-Power=27 dBm
          Retry min limit:7   RTS thr:off   Fragment thr=2352 B
          Link Quality:0  Signal level:0  Noise level:0
          Rx invalid nwid:0  Rx invalid crypt:0  Rx invalid frag:0
          Tx excessive retries:0  Invalid misc:0   Missed beacon:0

 I am aware that support for this chipset is work in progress, I would
 be happy to help in testing.
 --
 Subodh

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="003667.html">[PATCH] ssb: Turn suspend/resume upside down
</A></li>
	<LI>Next message: <A HREF="003672.html">BCM4328 latest GIT driver.
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#3670">[ date ]</a>
              <a href="thread.html#3670">[ thread ]</a>
              <a href="subject.html#3670">[ subject ]</a>
              <a href="author.html#3670">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
