<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [PATCH V2] ssb: Implement virtual SPROM on disk
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/bcm43xx-dev/2010-March/index.html" >
   <LINK REL="made" HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20V2%5D%20ssb%3A%20Implement%20virtual%20SPROM%20on%20disk&In-Reply-To=%3C4BA8CF6C.2050701%40lwfinger.net%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="007142.html">
   <LINK REL="Next"  HREF="007163.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[PATCH V2] ssb: Implement virtual SPROM on disk</H1>
    <B>Larry Finger</B> 
    <A HREF="mailto:bcm43xx-dev%40lists.berlios.de?Subject=Re%3A%20%5BPATCH%20V2%5D%20ssb%3A%20Implement%20virtual%20SPROM%20on%20disk&In-Reply-To=%3C4BA8CF6C.2050701%40lwfinger.net%3E"
       TITLE="[PATCH V2] ssb: Implement virtual SPROM on disk">Larry.Finger at lwfinger.net
       </A><BR>
    <I>Tue Mar 23 15:25:48 CET 2010</I>
    <P><UL>
        <LI>Previous message: <A HREF="007142.html">[PATCH V2] ssb: Implement virtual SPROM on disk
</A></li>
        <LI>Next message: <A HREF="007163.html">[PATCH V2] ssb: Implement virtual SPROM on disk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7144">[ date ]</a>
              <a href="thread.html#7144">[ thread ]</a>
              <a href="subject.html#7144">[ subject ]</a>
              <a href="author.html#7144">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>On 03/23/2010 03:52 AM, Michael Buesch wrote:
&gt;<i> On Tuesday 23 March 2010 00:45:28 Larry Finger wrote:
</I>&gt;&gt;<i> (2) In drivers/ssb/pci.c, the firmware loading process reads the file, then
</I>&gt;&gt;<i> modifies it using the bus address.
</I>&gt;<i> 
</I>&gt;<i> No. You don't need firmware loading at all.
</I>&gt;<i> udev can just set the mac address through the standard ioctl calls.
</I>&gt;<i> Just like how ifconfig and ip can do.
</I>
Will someone please write me udev rule(s) that do the following:

1. Detect a MAC address of FF:FF:FF:FF:FF:FF
2. If this is the first time for this bus address, then generate a random MAC
address with the bus address encoded in it.
3. Preserve the address for future reloads
4. Load the saved address into the device.
5. Do the above with only standard external commands - no new programs

My skills with udev are not up to the task.

I now have code running that uses the firmware load facility to read a
file created by /bin/dbus-uuidgen to create a MAC address that will satisfy the
requirements. If the file is needed but not available, then the user is prompted
with the commands needed to create it.

Larry

</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="007142.html">[PATCH V2] ssb: Implement virtual SPROM on disk
</A></li>
	<LI>Next message: <A HREF="007163.html">[PATCH V2] ssb: Implement virtual SPROM on disk
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#7144">[ date ]</a>
              <a href="thread.html#7144">[ thread ]</a>
              <a href="subject.html#7144">[ subject ]</a>
              <a href="author.html#7144">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/bcm43xx-dev">More information about the Bcm43xx-dev
mailing list</a><br>
</body></html>
